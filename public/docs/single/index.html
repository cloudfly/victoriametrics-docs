<!DOCTYPE html>
<html lang="en"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex, nofollow" />
  <link rel="icon shortcut" href="/favicon.ico" sizes="32x32" />
<link rel="icon" href="/favicon.svg" type="image/svg+xml" />
<link rel="icon" href="/favicon-dark.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)" />
<link rel="icon" href="/favicon-16x16.png" type="image/png" sizes="16x16" />
<link rel="icon" href="/favicon-32x32.png" type="image/png" sizes="32x32" />
<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180" />
<link fetchpriority="low" href="/site.webmanifest" rel="manifest" />

  <title>单机版本 – 中文手册(WIP)</title>
  <meta name="description" content="安装部署 安装 要快速尝试VictoriaMetrics，只需下载VictoriaMetrics可执行文件或Docker镜像，并使用所需的运行参数启动它。还可以参考快速开始指南获取更多信息。
此外，也可以通过以下方法来安装VictoriaMetrics：
Helm charts Kubernetes operator 安装集群版本的 Ansible Role（官方） 安装集群版本的 Ansible Role（社区） 安装单机版的 Ansible Role（社区） Snap package 运行 下面的几个运行参数是最常用的：
-storageDataPath：VictoriaMetrics 把所有的数据都保存在这个目录。默认的路径是当前工作目录中的victoria-metrics-data 子目录。 -retentionPeriod：数据的保留时间。历史的数据会被自动清理删除。默认的保留时间是 1 个月。最小的保留时间是 1 天（即 24 小时）。点击了解更多详情。 其他的运行参数，基本使用默认值就可以了，所以只有在有特殊需求的时候再修改他们就行。用-help 参数看下所有可用参数及他们描述和默认值。
正因 VictoriaMetrics 的配置参数都是通过命令行传递的，所以它不支持动态修改配置。如果要修改配置就只能用新的命令行对 VictoriaMetrics 进行重启。步骤如下：
向VictoriaMetrics进程发送SIGINT信号以正常停止它。请参阅如何向进程发送信号。 等待进程停止。这可能需要几秒钟时间。 启动已升级的VictoriaMetrics。 下面的几个文档，对初始化 VictoriaMetrics 可能会有些帮助：
How to set up scraping of Prometheus-compatible targets How to ingest data to VictoriaMetrics How to set up Prometheus to write data to VictoriaMetrics How to query VictoriaMetrics via Grafana How to query VictoriaMetrics via Graphite API How to handle alerts VictoriaMetrics 默认使用 8428 端口处理 Prometheus 查询请求。建议为 VictoriaMetrics 搭建监控。" />

  
    <link rel="canonical" href="http://localhost:1313/docs/single/" itemprop="url" />
  

  

<meta property="og:title" content="单机版本" />
<meta property="og:description" content="安装部署
    安装
    要快速尝试VictoriaMetrics，只需下载VictoriaMetrics可执行文件或Docker镜像，并使用所需的运行参数启动它。还可以参考快速开始指南获取更多信息。
此外，也可以通过以下方法来安装VictoriaMetrics：

Helm charts
Kubernetes operator
安装集群版本的 Ansible Role（官方）
安装集群版本的 Ansible Role（社区）
安装单机版的 Ansible Role（社区）
Snap package

运行
    下面的几个运行参数是最常用的：

-storageDataPath：VictoriaMetrics 把所有的数据都保存在这个目录。默认的路径是当前工作目录中的victoria-metrics-data 子目录。
-retentionPeriod：数据的保留时间。历史的数据会被自动清理删除。默认的保留时间是 1 个月。最小的保留时间是 1 天（即 24 小时）。点击了解更多详情。

其他的运行参数，基本使用默认值就可以了，所以只有在有特殊需求的时候再修改他们就行。用-help 参数看下所有可用参数及他们描述和默认值。
正因 VictoriaMetrics 的配置参数都是通过命令行传递的，所以它不支持动态修改配置。如果要修改配置就只能用新的命令行对 VictoriaMetrics 进行重启。步骤如下：

向VictoriaMetrics进程发送SIGINT信号以正常停止它。请参阅如何向进程发送信号。
等待进程停止。这可能需要几秒钟时间。
启动已升级的VictoriaMetrics。

下面的几个文档，对初始化 VictoriaMetrics 可能会有些帮助：

How to set up scraping of Prometheus-compatible targets
How to ingest data to VictoriaMetrics
How to set up Prometheus to write data to VictoriaMetrics
How to query VictoriaMetrics via Grafana
How to query VictoriaMetrics via Graphite API
How to handle alerts

VictoriaMetrics 默认使用 8428 端口处理 Prometheus 查询请求。建议为 VictoriaMetrics 搭建监控。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/docs/single/" /><meta property="article:section" content="docs" />



  
  <meta itemprop="name" content="单机版本">
  <meta itemprop="description" content="安装部署 安装 要快速尝试VictoriaMetrics，只需下载VictoriaMetrics可执行文件或Docker镜像，并使用所需的运行参数启动它。还可以参考快速开始指南获取更多信息。
此外，也可以通过以下方法来安装VictoriaMetrics：
Helm charts Kubernetes operator 安装集群版本的 Ansible Role（官方） 安装集群版本的 Ansible Role（社区） 安装单机版的 Ansible Role（社区） Snap package 运行 下面的几个运行参数是最常用的：
-storageDataPath：VictoriaMetrics 把所有的数据都保存在这个目录。默认的路径是当前工作目录中的victoria-metrics-data 子目录。 -retentionPeriod：数据的保留时间。历史的数据会被自动清理删除。默认的保留时间是 1 个月。最小的保留时间是 1 天（即 24 小时）。点击了解更多详情。 其他的运行参数，基本使用默认值就可以了，所以只有在有特殊需求的时候再修改他们就行。用-help 参数看下所有可用参数及他们描述和默认值。
正因 VictoriaMetrics 的配置参数都是通过命令行传递的，所以它不支持动态修改配置。如果要修改配置就只能用新的命令行对 VictoriaMetrics 进行重启。步骤如下：
向VictoriaMetrics进程发送SIGINT信号以正常停止它。请参阅如何向进程发送信号。 等待进程停止。这可能需要几秒钟时间。 启动已升级的VictoriaMetrics。 下面的几个文档，对初始化 VictoriaMetrics 可能会有些帮助：
How to set up scraping of Prometheus-compatible targets How to ingest data to VictoriaMetrics How to set up Prometheus to write data to VictoriaMetrics How to query VictoriaMetrics via Grafana How to query VictoriaMetrics via Graphite API How to handle alerts VictoriaMetrics 默认使用 8428 端口处理 Prometheus 查询请求。建议为 VictoriaMetrics 搭建监控。">
  <meta itemprop="wordCount" content="9465">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="单机版本">
  <meta name="twitter:description" content="安装部署 安装 要快速尝试VictoriaMetrics，只需下载VictoriaMetrics可执行文件或Docker镜像，并使用所需的运行参数启动它。还可以参考快速开始指南获取更多信息。
此外，也可以通过以下方法来安装VictoriaMetrics：
Helm charts Kubernetes operator 安装集群版本的 Ansible Role（官方） 安装集群版本的 Ansible Role（社区） 安装单机版的 Ansible Role（社区） Snap package 运行 下面的几个运行参数是最常用的：
-storageDataPath：VictoriaMetrics 把所有的数据都保存在这个目录。默认的路径是当前工作目录中的victoria-metrics-data 子目录。 -retentionPeriod：数据的保留时间。历史的数据会被自动清理删除。默认的保留时间是 1 个月。最小的保留时间是 1 天（即 24 小时）。点击了解更多详情。 其他的运行参数，基本使用默认值就可以了，所以只有在有特殊需求的时候再修改他们就行。用-help 参数看下所有可用参数及他们描述和默认值。
正因 VictoriaMetrics 的配置参数都是通过命令行传递的，所以它不支持动态修改配置。如果要修改配置就只能用新的命令行对 VictoriaMetrics 进行重启。步骤如下：
向VictoriaMetrics进程发送SIGINT信号以正常停止它。请参阅如何向进程发送信号。 等待进程停止。这可能需要几秒钟时间。 启动已升级的VictoriaMetrics。 下面的几个文档，对初始化 VictoriaMetrics 可能会有些帮助：
How to set up scraping of Prometheus-compatible targets How to ingest data to VictoriaMetrics How to set up Prometheus to write data to VictoriaMetrics How to query VictoriaMetrics via Grafana How to query VictoriaMetrics via Graphite API How to handle alerts VictoriaMetrics 默认使用 8428 端口处理 Prometheus 查询请求。建议为 VictoriaMetrics 搭建监控。">

    <link href="/css/compiled/main.css" rel="stylesheet" />



  <link href="/css/custom.css" rel="stylesheet" />





  <script>
     
    const defaultTheme = 'system';

    const setDarkTheme = () => {
      document.documentElement.classList.add("dark");
      document.documentElement.style.colorScheme = "dark";
    }
    const setLightTheme = () => {
      document.documentElement.classList.remove("dark");
      document.documentElement.style.colorScheme = "light";
    }

    if ("color-theme" in localStorage) {
      localStorage.getItem("color-theme") === "dark" ? setDarkTheme() : setLightTheme();
    } else {
      defaultTheme === "dark" ? setDarkTheme() : setLightTheme();
      if (defaultTheme === "system") {
        window.matchMedia("(prefers-color-scheme: dark)").matches ? setDarkTheme() : setLightTheme();
      }
    }
  </script>

  
</head>
<body dir="ltr"><div class="nav-container hx-sticky hx-top-0 hx-z-20 hx-w-full hx-bg-transparent print:hx-hidden">
  <div class="nav-container-blur hx-pointer-events-none hx-absolute hx-z-[-1] hx-h-full hx-w-full hx-bg-white dark:hx-bg-dark hx-shadow-[0_2px_4px_rgba(0,0,0,.02),0_1px_0_rgba(0,0,0,.06)] contrast-more:hx-shadow-[0_0_0_1px_#000] dark:hx-shadow-[0_-1px_0_rgba(255,255,255,.1)_inset] contrast-more:dark:hx-shadow-[0_0_0_1px_#fff]"></div>

  <nav class="hx-mx-auto hx-flex hx-items-center hx-justify-end hx-gap-2 hx-h-16 hx-px-6 hx-max-w-[90rem]">
    <a class="hx-flex hx-items-center hover:hx-opacity-75 ltr:hx-mr-auto rtl:hx-ml-auto" href="/">
        <img class="hx-block dark:hx-hidden" src="/logo-victoriametrics.svg" alt="中文手册(WIP)" height="80" width="160" />
        <img class="hx-hidden dark:hx-block" src="/logo-victoriametrics-dark.svg" alt="中文手册(WIP)" height="80" width="160" />
        <span class="hx-mx-2 hx-font-extrabold hx-inline hx-select-none" title="中文手册(WIP)">中文手册(WIP)</span>
    </a><a
            title="手册"
            href="/docs"
            
            class="hx-text-sm contrast-more:hx-text-gray-700 contrast-more:dark:hx-text-gray-100 hx-relative -hx-ml-2 hx-hidden hx-whitespace-nowrap hx-p-2 md:hx-inline-block hx-font-medium"
          >
            <span class="hx-text-center">手册</span>
          </a><a
            title="关于"
            href="/about"
            
            class="hx-text-sm contrast-more:hx-text-gray-700 contrast-more:dark:hx-text-gray-100 hx-relative -hx-ml-2 hx-hidden hx-whitespace-nowrap hx-p-2 md:hx-inline-block hx-text-gray-600 hover:hx-text-gray-800 dark:hx-text-gray-400 dark:hover:hx-text-gray-200"
          >
            <span class="hx-text-center">关于</span>
          </a><button type="button" aria-label="Menu" class="hamburger-menu -hx-mr-2 hx-rounded hx-p-2 active:hx-bg-gray-400/20 md:hx-hidden"><svg height=24 fill="none" viewBox="0 0 24 24" stroke="currentColor"><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8H20"></path></g><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16H20"></path></g></svg></button>
  </nav>
</div>

  <div class='hx-mx-auto hx-flex hx-max-w-[90rem]'>
    <div class="mobile-menu-overlay [transition:background-color_1.5s_ease] hx-fixed hx-inset-0 hx-z-10 hx-bg-black/80 dark:hx-bg-black/60 hx-hidden"></div>
<aside class="sidebar-container hx-flex hx-flex-col print:hx-hidden md:hx-top-16 md:hx-shrink-0 md:hx-w-64 md:hx-self-start max-md:[transform:translate3d(0,-100%,0)] md:hx-sticky">
  
  <div class="hx-px-4 hx-pt-4 md:hx-hidden">
    <div class="search-wrapper hx-relative md:hx-w-64">
  <div class="hx-relative hx-flex hx-items-center hx-text-gray-900 contrast-more:hx-text-gray-800 dark:hx-text-gray-300 contrast-more:dark:hx-text-gray-300">
    <input
      placeholder="Search..."
      class="search-input hx-block hx-w-full hx-appearance-none hx-rounded-lg hx-px-3 hx-py-2 hx-transition-colors hx-text-base hx-leading-tight md:hx-text-sm hx-bg-black/[.05] dark:hx-bg-gray-50/10 focus:hx-bg-white dark:focus:hx-bg-dark placeholder:hx-text-gray-500 dark:placeholder:hx-text-gray-400 contrast-more:hx-border contrast-more:hx-border-current"
      type="search"
      value=""
      spellcheck="false"
    />
    <kbd
      class="hx-absolute hx-my-1.5 hx-select-none ltr:hx-right-1.5 rtl:hx-left-1.5 hx-h-5 hx-rounded hx-bg-white hx-px-1.5 hx-font-mono hx-text-[10px] hx-font-medium hx-text-gray-500 hx-border dark:hx-border-gray-100/20 dark:hx-bg-dark/50 contrast-more:hx-border-current contrast-more:hx-text-current contrast-more:dark:hx-border-current hx-items-center hx-gap-1 hx-transition-opacity hx-pointer-events-none hx-hidden sm:hx-flex"
    >
      CTRL K
    </kbd>
  </div>

  <div>
    <ul
      class="search-results hextra-scrollbar hx-hidden hx-border hx-border-gray-200 hx-bg-white hx-text-gray-100 dark:hx-border-neutral-800 dark:hx-bg-neutral-900 hx-absolute hx-top-full hx-z-20 hx-mt-2 hx-overflow-auto hx-overscroll-contain hx-rounded-xl hx-py-2.5 hx-shadow-xl hx-max-h-[min(calc(50vh-11rem-env(safe-area-inset-bottom)),400px)] md:hx-max-h-[min(calc(100vh-5rem-env(safe-area-inset-bottom)),400px)] hx-inset-x-0 ltr:md:hx-left-auto rtl:md:hx-right-auto contrast-more:hx-border contrast-more:hx-border-gray-900 contrast-more:dark:hx-border-gray-50 hx-w-screen hx-min-h-[100px] hx-max-w-[min(calc(100vw-2rem),calc(100%+20rem))]"
      style="transition: max-height 0.2s ease 0s;"
    ></ul>
  </div>
</div>

  </div>
  <div class="hextra-scrollbar hx-overflow-y-auto hx-overflow-x-hidden hx-p-4 hx-grow md:hx-h-[calc(100vh-var(--navbar-height)-var(--menu-height))]">
    <ul class="hx-flex hx-flex-col hx-gap-1 md:hx-hidden">
      
      
          <li class="open"><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/"
    
  >VictoriaMetrics 中文手册
        <span class="hextra-sidebar-collapsible-button"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="hx-h-[18px] hx-min-w-[18px] hx-rounded-sm hx-p-0.5 hover:hx-bg-gray-800/5 dark:hover:hx-bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="hx-origin-center hx-transition-transform rtl:-hx-rotate-180"></path></svg></span>
    </a><div class="ltr:hx-pr-0 hx-overflow-hidden">
        <ul class='hx-relative hx-flex hx-flex-col hx-gap-1 before:hx-absolute before:hx-inset-y-1 before:hx-w-px before:hx-bg-gray-200 before:hx-content-[""] ltr:hx-ml-3 ltr:hx-pl-3 ltr:before:hx-left-0 rtl:hx-mr-3 rtl:hx-pr-3 rtl:before:hx-right-0 dark:before:hx-bg-neutral-800'><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/concepts/"
    
  >核心概念
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/quickstart/"
    
  >快速开始
    </a>
              
            </li><li class="hx-flex hx-flex-col open"><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      sidebar-active-item hx-bg-primary-100 hx-font-semibold hx-text-primary-800 contrast-more:hx-border contrast-more:hx-border-primary-500 dark:hx-bg-primary-400/10 dark:hx-text-primary-600 contrast-more:dark:hx-border-primary-500"
    href="/docs/single/"
    
  >单机版本
    </a>
  
    <ul class='hx-flex hx-flex-col hx-gap-1 hx-relative before:hx-absolute before:hx-inset-y-1 before:hx-w-px before:hx-bg-gray-200 before:hx-content-[""] dark:before:hx-bg-neutral-800 ltr:hx-pl-3 ltr:before:hx-left-0 rtl:hx-pr-3 rtl:before:hx-right-0 ltr:hx-ml-3 rtl:hx-mr-3'><li>
              <a
                href="#%e5%ae%89%e8%a3%85%e9%83%a8%e7%bd%b2"
                class="hx-flex hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [word-break:break-word] hx-cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] contrast-more:hx-border hx-gap-2 before:hx-opacity-25 before:hx-content-['#'] hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:hx-text-gray-900 contrast-more:dark:hx-text-gray-50 contrast-more:hx-border-transparent contrast-more:hover:hx-border-gray-900 contrast-more:dark:hover:hx-border-gray-50"
              >安装部署</a>
            </li>
          <li>
              <a
                href="#%e6%95%b0%e6%8d%ae%e8%bf%90%e7%bb%b4"
                class="hx-flex hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [word-break:break-word] hx-cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] contrast-more:hx-border hx-gap-2 before:hx-opacity-25 before:hx-content-['#'] hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:hx-text-gray-900 contrast-more:dark:hx-text-gray-50 contrast-more:hx-border-transparent contrast-more:hover:hx-border-gray-900 contrast-more:dark:hover:hx-border-gray-50"
              >数据运维</a>
            </li>
          <li>
              <a
                href="#%e9%ab%98%e7%ba%a7%e7%89%b9%e6%80%a7"
                class="hx-flex hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [word-break:break-word] hx-cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] contrast-more:hx-border hx-gap-2 before:hx-opacity-25 before:hx-content-['#'] hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:hx-text-gray-900 contrast-more:dark:hx-text-gray-50 contrast-more:hx-border-transparent contrast-more:hover:hx-border-gray-900 contrast-more:dark:hover:hx-border-gray-50"
              >高级特性</a>
            </li>
          <li>
              <a
                href="#%e5%85%b6%e4%bb%96"
                class="hx-flex hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [word-break:break-word] hx-cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] contrast-more:hx-border hx-gap-2 before:hx-opacity-25 before:hx-content-['#'] hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:hx-text-gray-900 contrast-more:dark:hx-text-gray-50 contrast-more:hx-border-transparent contrast-more:hover:hx-border-gray-900 contrast-more:dark:hover:hx-border-gray-50"
              >其他</a>
            </li>
          <li>
              <a
                href="#%e8%bf%90%e8%a1%8c%e5%8f%82%e6%95%b0"
                class="hx-flex hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [word-break:break-word] hx-cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] contrast-more:hx-border hx-gap-2 before:hx-opacity-25 before:hx-content-['#'] hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:hx-text-gray-900 contrast-more:dark:hx-text-gray-50 contrast-more:hx-border-transparent contrast-more:hover:hx-border-gray-900 contrast-more:dark:hover:hx-border-gray-50"
              >运行参数</a>
            </li>
          </ul>
  
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/cluster/"
    
  >集群版本
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/"
    
  >数据查询
        <span class="hextra-sidebar-collapsible-button"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="hx-h-[18px] hx-min-w-[18px] hx-rounded-sm hx-p-0.5 hover:hx-bg-gray-800/5 dark:hover:hx-bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="hx-origin-center hx-transition-transform rtl:-hx-rotate-180"></path></svg></span>
    </a>
              <div class="ltr:hx-pr-0 hx-overflow-hidden">
        <ul class='hx-relative hx-flex hx-flex-col hx-gap-1 before:hx-absolute before:hx-inset-y-1 before:hx-w-px before:hx-bg-gray-200 before:hx-content-[""] ltr:hx-ml-3 ltr:hx-pl-3 ltr:before:hx-left-0 rtl:hx-mr-3 rtl:hx-pr-3 rtl:before:hx-right-0 dark:before:hx-bg-neutral-800'><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/"
    
  >MetricQL
        <span class="hextra-sidebar-collapsible-button"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="hx-h-[18px] hx-min-w-[18px] hx-rounded-sm hx-p-0.5 hover:hx-bg-gray-800/5 dark:hover:hx-bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="hx-origin-center hx-transition-transform rtl:-hx-rotate-180"></path></svg></span>
    </a>
              <div class="ltr:hx-pr-0 hx-overflow-hidden">
        <ul class='hx-relative hx-flex hx-flex-col hx-gap-1 before:hx-absolute before:hx-inset-y-1 before:hx-w-px before:hx-bg-gray-200 before:hx-content-[""] ltr:hx-ml-3 ltr:hx-pl-3 ltr:before:hx-left-0 rtl:hx-mr-3 rtl:hx-pr-3 rtl:before:hx-right-0 dark:before:hx-bg-neutral-800'><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/basic/"
    
  >基本用法
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/functions/"
    
  >函数
        <span class="hextra-sidebar-collapsible-button"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="hx-h-[18px] hx-min-w-[18px] hx-rounded-sm hx-p-0.5 hover:hx-bg-gray-800/5 dark:hover:hx-bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="hx-origin-center hx-transition-transform rtl:-hx-rotate-180"></path></svg></span>
    </a>
              <div class="ltr:hx-pr-0 hx-overflow-hidden">
        <ul class='hx-relative hx-flex hx-flex-col hx-gap-1 before:hx-absolute before:hx-inset-y-1 before:hx-w-px before:hx-bg-gray-200 before:hx-content-[""] ltr:hx-ml-3 ltr:hx-pl-3 ltr:before:hx-left-0 rtl:hx-mr-3 rtl:hx-pr-3 rtl:before:hx-right-0 dark:before:hx-bg-neutral-800'><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/functions/rollup/"
    
  >汇总（Rollup）
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/functions/label/"
    
  >操作 Label
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/functions/aggregation/"
    
  >聚合统计
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/functions/transmit/"
    
  >数值转换
    </a>
              
            </li></ul>
      </div>
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/promql/"
    
  >PromQL 新手入门
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/promql-diff/"
    
  >对比PromQL
    </a>
              
            </li></ul>
      </div>
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/http/"
    
  >HTTP 查询接口
    </a>
              
            </li></ul>
      </div>
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/write/"
    
  >数据写入
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/faq/"
    
  >FAQ
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/ops/"
    
  >运维指南
        <span class="hextra-sidebar-collapsible-button"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="hx-h-[18px] hx-min-w-[18px] hx-rounded-sm hx-p-0.5 hover:hx-bg-gray-800/5 dark:hover:hx-bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="hx-origin-center hx-transition-transform rtl:-hx-rotate-180"></path></svg></span>
    </a>
              <div class="ltr:hx-pr-0 hx-overflow-hidden">
        <ul class='hx-relative hx-flex hx-flex-col hx-gap-1 before:hx-absolute before:hx-inset-y-1 before:hx-w-px before:hx-bg-gray-200 before:hx-content-[""] ltr:hx-ml-3 ltr:hx-pl-3 ltr:before:hx-left-0 rtl:hx-mr-3 rtl:hx-pr-3 rtl:before:hx-right-0 dark:before:hx-bg-neutral-800'><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/ops/disk-space/"
    
  >如何处理磁盘空间不足
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/ops/cluster-resize/"
    
  >如何对集群版进行扩缩容
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/ops/node-crash/"
    
  >如何处理机器故障
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/ops/write-history/"
    
  >如何补写历史数据
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/ops/multi-disk/"
    
  >有效利用一机多盘
    </a>
              
            </li></ul>
      </div>
            </li></ul>
      </div></li>
    </ul>

    <ul class="hx-flex hx-flex-col hx-gap-1 max-md:hx-hidden">
        
          <li class=""><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/concepts/"
    
  >核心概念
    </a></li>
          <li class=""><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/quickstart/"
    
  >快速开始
    </a></li>
          <li class="open"><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      sidebar-active-item hx-bg-primary-100 hx-font-semibold hx-text-primary-800 contrast-more:hx-border contrast-more:hx-border-primary-500 dark:hx-bg-primary-400/10 dark:hx-text-primary-600 contrast-more:dark:hx-border-primary-500"
    href="/docs/single/"
    
  >单机版本
    </a></li>
          <li class=""><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/cluster/"
    
  >集群版本
    </a></li>
          <li class=""><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/"
    
  >数据查询
        <span class="hextra-sidebar-collapsible-button"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="hx-h-[18px] hx-min-w-[18px] hx-rounded-sm hx-p-0.5 hover:hx-bg-gray-800/5 dark:hover:hx-bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="hx-origin-center hx-transition-transform rtl:-hx-rotate-180"></path></svg></span>
    </a><div class="ltr:hx-pr-0 hx-overflow-hidden">
        <ul class='hx-relative hx-flex hx-flex-col hx-gap-1 before:hx-absolute before:hx-inset-y-1 before:hx-w-px before:hx-bg-gray-200 before:hx-content-[""] ltr:hx-ml-3 ltr:hx-pl-3 ltr:before:hx-left-0 rtl:hx-mr-3 rtl:hx-pr-3 rtl:before:hx-right-0 dark:before:hx-bg-neutral-800'><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/"
    
  >MetricQL
        <span class="hextra-sidebar-collapsible-button"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="hx-h-[18px] hx-min-w-[18px] hx-rounded-sm hx-p-0.5 hover:hx-bg-gray-800/5 dark:hover:hx-bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="hx-origin-center hx-transition-transform rtl:-hx-rotate-180"></path></svg></span>
    </a>
              <div class="ltr:hx-pr-0 hx-overflow-hidden">
        <ul class='hx-relative hx-flex hx-flex-col hx-gap-1 before:hx-absolute before:hx-inset-y-1 before:hx-w-px before:hx-bg-gray-200 before:hx-content-[""] ltr:hx-ml-3 ltr:hx-pl-3 ltr:before:hx-left-0 rtl:hx-mr-3 rtl:hx-pr-3 rtl:before:hx-right-0 dark:before:hx-bg-neutral-800'><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/basic/"
    
  >基本用法
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/functions/"
    
  >函数
        <span class="hextra-sidebar-collapsible-button"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="hx-h-[18px] hx-min-w-[18px] hx-rounded-sm hx-p-0.5 hover:hx-bg-gray-800/5 dark:hover:hx-bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="hx-origin-center hx-transition-transform rtl:-hx-rotate-180"></path></svg></span>
    </a>
              <div class="ltr:hx-pr-0 hx-overflow-hidden">
        <ul class='hx-relative hx-flex hx-flex-col hx-gap-1 before:hx-absolute before:hx-inset-y-1 before:hx-w-px before:hx-bg-gray-200 before:hx-content-[""] ltr:hx-ml-3 ltr:hx-pl-3 ltr:before:hx-left-0 rtl:hx-mr-3 rtl:hx-pr-3 rtl:before:hx-right-0 dark:before:hx-bg-neutral-800'><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/functions/rollup/"
    
  >汇总（Rollup）
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/functions/label/"
    
  >操作 Label
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/functions/aggregation/"
    
  >聚合统计
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/functions/transmit/"
    
  >数值转换
    </a>
              
            </li></ul>
      </div>
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/promql/"
    
  >PromQL 新手入门
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/metricsql/promql-diff/"
    
  >对比PromQL
    </a>
              
            </li></ul>
      </div>
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/query/http/"
    
  >HTTP 查询接口
    </a>
              
            </li></ul>
      </div></li>
          <li class=""><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/write/"
    
  >数据写入
    </a></li>
          <li class=""><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/faq/"
    
  >FAQ
    </a></li>
          <li class=""><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/ops/"
    
  >运维指南
        <span class="hextra-sidebar-collapsible-button"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="hx-h-[18px] hx-min-w-[18px] hx-rounded-sm hx-p-0.5 hover:hx-bg-gray-800/5 dark:hover:hx-bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="hx-origin-center hx-transition-transform rtl:-hx-rotate-180"></path></svg></span>
    </a><div class="ltr:hx-pr-0 hx-overflow-hidden">
        <ul class='hx-relative hx-flex hx-flex-col hx-gap-1 before:hx-absolute before:hx-inset-y-1 before:hx-w-px before:hx-bg-gray-200 before:hx-content-[""] ltr:hx-ml-3 ltr:hx-pl-3 ltr:before:hx-left-0 rtl:hx-mr-3 rtl:hx-pr-3 rtl:before:hx-right-0 dark:before:hx-bg-neutral-800'><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/ops/disk-space/"
    
  >如何处理磁盘空间不足
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/ops/cluster-resize/"
    
  >如何对集群版进行扩缩容
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/ops/node-crash/"
    
  >如何处理机器故障
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/ops/write-history/"
    
  >如何补写历史数据
    </a>
              
            </li><li class="hx-flex hx-flex-col "><a
    class="hx-flex hx-items-center hx-justify-between hx-gap-2 hx-cursor-pointer hx-rounded hx-px-2 hx-py-1.5 hx-text-sm hx-transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] [word-break:break-word]
      hx-text-gray-500 hover:hx-bg-gray-100 hover:hx-text-gray-900 contrast-more:hx-border contrast-more:hx-border-transparent contrast-more:hx-text-gray-900 contrast-more:hover:hx-border-gray-900 dark:hx-text-neutral-400 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50 contrast-more:dark:hx-text-gray-50 contrast-more:dark:hover:hx-border-gray-50"
    href="/docs/ops/multi-disk/"
    
  >有效利用一机多盘
    </a>
              
            </li></ul>
      </div></li>
        
      </ul>
    </div>
  
  
    <div class="  hx-sticky hx-bottom-0 hx-bg-white dark:hx-bg-dark hx-mx-4 hx-py-4 hx-shadow-[0_-12px_16px_#fff] hx-flex hx-items-center hx-gap-2 dark:hx-border-neutral-800 dark:hx-shadow-[0_-12px_16px_#111] contrast-more:hx-border-neutral-400 contrast-more:hx-shadow-none contrast-more:dark:hx-shadow-none hx-border-t" data-toggle-animation="show"><div class="hx-flex hx-grow hx-flex-col"><button
  title="Change theme"
  data-theme="light"
  class="theme-toggle hx-group hx-h-7 hx-rounded-md hx-px-2 hx-text-left hx-text-xs hx-font-medium hx-text-gray-600 hx-transition-colors dark:hx-text-gray-400 hover:hx-bg-gray-100 hover:hx-text-gray-900 dark:hover:hx-bg-primary-100/5 dark:hover:hx-text-gray-50"
  type="button"
  aria-label="Change theme"
>
  <div class="hx-flex hx-items-center hx-gap-2 hx-capitalize"><svg height=12 class="group-data-[theme=light]:hx-hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg><span class="group-data-[theme=light]:hx-hidden">Light</span><svg height=12 class="group-data-[theme=dark]:hx-hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg><span class="group-data-[theme=dark]:hx-hidden">Dark</span></div>
</button>
</div></div></aside>
    
<nav class="hextra-toc hx-order-last hx-hidden hx-w-64 hx-shrink-0 xl:hx-block print:hx-hidden hx-px-4" aria-label="table of contents">
    <div class="hextra-scrollbar hx-sticky hx-top-16 hx-overflow-y-auto hx-pr-4 hx-pt-6 hx-text-sm [hyphens:auto] hx-max-h-[calc(100vh-var(--navbar-height)-env(safe-area-inset-bottom))] ltr:hx--mr-4 rtl:hx--ml-4"><p class="hx-mb-4 hx-font-semibold hx-tracking-tight">On this page</p><ul>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="hx-font-semibold hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%ae%89%e8%a3%85%e9%83%a8%e7%bd%b2">安装部署
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%ae%89%e8%a3%85">安装
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e8%bf%90%e8%a1%8c">运行
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f">环境变量
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e4%bd%bf%e7%94%a8-snap-%e5%8c%85">使用 Snap 包
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%8d%87%e7%ba%a7-victoriametrics">升级 VictoriaMetrics
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a6%82%e4%bd%95%e6%9e%84%e5%bb%ba%e6%ba%90%e4%bb%a3%e7%a0%81">如何构建源代码
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e6%9e%84%e5%bb%ba%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83">构建开发环境
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e6%9e%84%e5%bb%ba%e7%94%9f%e4%ba%a7%e7%8e%af%e5%a2%83">构建生产环境
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#arm-build">ARM build
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#development-arm-build">Development ARM build
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#production-arm-build">Production ARM build
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e7%ba%af-go-%e6%9e%84%e5%bb%ba-cgo_enabled0">纯 Go 构建 (CGO_ENABLED=0)
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e6%9e%84%e5%bb%ba-docker-%e9%95%9c%e5%83%8f">构建 Docker 镜像
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e4%bd%bf%e7%94%a8-docker-compose-%e5%90%af%e5%8a%a8">使用 docker-compose 启动
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#systemd-service">Systemd Service
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%ae%b9%e9%87%8f%e8%a7%84%e5%88%92">容量规划
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e4%bf%9d%e5%ad%98%e6%9c%9f">保存期
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e8%b5%84%e6%ba%90%e4%bd%bf%e7%94%a8%e9%99%90%e5%88%b6">资源使用限制
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e9%ab%98%e5%8f%af%e7%94%a8">高可用
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e7%9b%91%e6%8e%a7">监控
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#push-metrics">Push Metrics
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e8%b0%83%e6%95%b4">调整？
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="hx-font-semibold hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e6%95%b0%e6%8d%ae%e8%bf%90%e7%bb%b4">数据运维
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a6%82%e4%bd%95%e8%bf%90%e7%94%a8-snapshots">如何运用 snapshots
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a6%82%e4%bd%95%e5%88%a0%e9%99%a4-timeseries">如何删除 Timeseries
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%bc%ba%e5%88%b6%e5%90%88%e5%b9%b6">强制合并
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%af%bc%e5%87%ba-timeseries">导出 timeseries
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%87%ba-json-%e6%a0%bc%e5%bc%8f">如何导出 JSON 格式
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%87%ba-csv-%e6%95%b0%e6%8d%ae">如何导出 CSV 数据
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%87%ba%e5%8e%9f%e7%94%9f%e6%95%b0%e6%8d%ae">如何导出原生数据
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%85%a5-timeseries-%e6%95%b0%e6%8d%ae">如何导入 timeseries 数据
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%85%a5-json-%e6%a0%bc%e5%bc%8f%e6%95%b0%e6%8d%ae">如何导入 JSON 格式数据
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%85%a5%e5%8e%9f%e7%94%9f%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%95%b0%e6%8d%ae">如何导入原生二进制数据
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-8 rtl:hx-pr-8 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%85%a5-csv-%e6%95%b0%e6%8d%ae">如何导入 CSV 数据
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%85%a5-prometheus-exporter-%e6%a0%bc%e5%bc%8f%e6%95%b0%e6%8d%ae">如何导入 Prometheus Exporter 格式数据
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="hx-font-semibold hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e9%ab%98%e7%ba%a7%e7%89%b9%e6%80%a7">高级特性
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#relabeling">Relabeling
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#cache-removal">Cache removal
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#cache-tuning">Cache tuning
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e8%a1%a5%e6%95%b0%e6%8d%ae">补数据
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e6%95%b0%e6%8d%ae%e6%9b%b4%e6%96%b0">数据更新
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a4%87%e4%bb%bd">备份
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%8e%bb%e9%87%8d%e7%89%b9%e6%80%a7">去重特性
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#storage">Storage
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a4%9a%e7%a7%9f%e6%88%b7">多租户
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%a4%9a%e5%89%af%e6%9c%ac">多副本
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%8f%af%e6%89%a9%e5%b1%95%e5%92%8c%e9%9b%86%e7%be%a4%e7%89%88%e6%9c%ac">可扩展和集群版本
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%9f%ba%e6%95%b0%e9%99%90%e5%88%b6">基数限制
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#tsdb%e7%8a%b6%e6%80%81">TSDB状态
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#query-%e8%bf%bd%e8%b8%aa">Query 追踪
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%ae%89%e5%85%a8">安全
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="hx-font-semibold hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%85%b6%e4%bb%96">其他
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%8e%8b%e6%b5%8b">压测
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#profiling">Profiling
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="ltr:hx-pl-4 rtl:hx-pr-4 hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e5%bb%ba%e8%ae%ae">常见问题建议
        </a>
      </li>
      <li class="hx-my-2 hx-scroll-my-6 hx-scroll-py-6">
        <a class="hx-font-semibold hx-inline-block hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-300 contrast-more:hx-text-gray-900 contrast-more:hx-underline contrast-more:dark:hx-text-gray-50 hx-w-full hx-break-words" href="#%e8%bf%90%e8%a1%8c%e5%8f%82%e6%95%b0">运行参数
        </a>
      </li></ul>
      <div class="hx-mt-8 hx-border-t hx-bg-white hx-pt-8 hx-shadow-[0_-12px_16px_white] dark:hx-bg-dark dark:hx-shadow-[0_-12px_16px_#111] hx-sticky hx-bottom-0 hx-flex hx-flex-col hx-items-start hx-gap-2 hx-pb-8 dark:hx-border-neutral-800 contrast-more:hx-border-t contrast-more:hx-border-neutral-400 contrast-more:hx-shadow-none contrast-more:dark:hx-border-neutral-400">
        <button aria-hidden="true" id="backToTop" onClick="scrollUp();" class="hx-transition-all hx-duration-75 hx-opacity-0 hx-text-xs hx-font-medium hx-text-gray-500 hover:hx-text-gray-900 dark:hx-text-gray-400 dark:hover:hx-text-gray-100 contrast-more:hx-text-gray-800 contrast-more:dark:hx-text-gray-50">
          <span>Scroll to top</span>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="hx-inline ltr:hx-ml-1 rtl:hx-mr-1 hx-h-3.5 hx-w-3.5 hx-border hx-rounded-full hx-border-gray-500 hover:hx-border-gray-900 dark:hx-border-gray-400 dark:hover:hx-border-gray-100 contrast-more:hx-border-gray-800 contrast-more:dark:hx-border-gray-50">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" />
          </svg>
        </button>
      </div>
    </div>
  </nav>


    <article class="hx-w-full hx-break-words hx-flex hx-min-h-[calc(100vh-var(--navbar-height))] hx-min-w-0 hx-justify-center hx-pb-8 hx-pr-[calc(env(safe-area-inset-right)-1.5rem)]">
      <main class="hx-w-full hx-min-w-0 hx-max-w-6xl hx-px-6 hx-pt-4 md:hx-px-12">
        
  <div class="hx-mt-1.5 hx-flex hx-items-center hx-gap-1 hx-overflow-hidden hx-text-sm hx-text-gray-500 dark:hx-text-gray-400 contrast-more:hx-text-current">
        <div class="hx-whitespace-nowrap hx-transition-colors hx-min-w-[24px] hx-overflow-hidden hx-text-ellipsis hover:hx-text-gray-900 dark:hover:hx-text-gray-100">
          <a href="/docs/">VictoriaMetrics 中文手册</a>
        </div><svg class="hx-w-3.5 hx-shrink-0 rtl:-hx-rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg><div class="hx-whitespace-nowrap hx-transition-colors hx-font-medium hx-text-gray-700 contrast-more:hx-font-bold contrast-more:hx-text-current dark:hx-text-gray-100 contrast-more:dark:hx-text-current">单机版本</div>
  </div>

        <div class="content">
          <h1>单机版本</h1>
          <h2>安装部署<span class="hx-absolute -hx-mt-20" id="安装部署"></span>
    <a href="#%e5%ae%89%e8%a3%85%e9%83%a8%e7%bd%b2" class="subheading-anchor" aria-label="Permalink for this section"></a></h2><h3>安装<span class="hx-absolute -hx-mt-20" id="安装"></span>
    <a href="#%e5%ae%89%e8%a3%85" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>要快速尝试VictoriaMetrics，只需下载<a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases" target="_blank" rel="noopener">VictoriaMetrics可执行文件</a>或<a href="https://hub.docker.com/r/victoriametrics/victoria-metrics/" target="_blank" rel="noopener">Docker镜像</a>，并使用所需的运行参数启动它。还可以参考<a href="http://localhost:1313/docs/quickstart/" >快速开始</a>指南获取更多信息。</p>
<p>此外，也可以通过以下方法来安装VictoriaMetrics：</p>
<ul>
<li><a href="https://github.com/VictoriaMetrics/helm-charts" target="_blank" rel="noopener">Helm charts</a></li>
<li><a href="https://github.com/VictoriaMetrics/operator" target="_blank" rel="noopener">Kubernetes operator</a></li>
<li><a href="https://github.com/VictoriaMetrics/ansible-playbooks" target="_blank" rel="noopener">安装集群版本的 Ansible Role（官方）</a></li>
<li><a href="https://github.com/Slapper/ansible-victoriametrics-cluster-role" target="_blank" rel="noopener">安装集群版本的 Ansible Role（社区）</a></li>
<li><a href="https://github.com/dreamteam-gg/ansible-victoriametrics-role" target="_blank" rel="noopener">安装单机版的 Ansible Role（社区）</a></li>
<li><a href="https://snapcraft.io/victoriametrics" target="_blank" rel="noopener">Snap package</a></li>
</ul>
<h3>运行<span class="hx-absolute -hx-mt-20" id="运行"></span>
    <a href="#%e8%bf%90%e8%a1%8c" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>下面的几个运行参数是最常用的：</p>
<ul>
<li><code>-storageDataPath</code>：VictoriaMetrics 把所有的数据都保存在这个目录。默认的路径是当前工作目录中的<code>victoria-metrics-data</code> 子目录。</li>
<li><code>-retentionPeriod</code>：数据的保留时间。历史的数据会被自动清理删除。默认的保留时间是 1 个月。最小的保留时间是 1 天（即 24 小时）。<a href="#deduplication" >点击了解更多详情</a>。</li>
</ul>
<p>其他的运行参数，基本使用默认值就可以了，所以只有在有特殊需求的时候再修改他们就行。用<code>-help</code> 参数看下<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#list-of-command-line-flags" target="_blank" rel="noopener">所有可用参数及他们描述和默认值</a>。</p>
<p>正因 VictoriaMetrics 的配置参数都是通过命令行传递的，所以它不支持动态修改配置。如果要修改配置就只能用新的命令行对 VictoriaMetrics 进行重启。步骤如下：</p>
<ul>
<li>向VictoriaMetrics进程发送<code>SIGINT</code>信号以正常停止它。请参阅<a href="https://stackoverflow.com/questions/33239959/send-signal-to-process-from-command-line" target="_blank" rel="noopener">如何向进程发送信号</a>。</li>
<li>等待进程停止。这可能需要几秒钟时间。</li>
<li>启动已升级的VictoriaMetrics。</li>
</ul>
<p>下面的几个文档，对初始化 VictoriaMetrics 可能会有些帮助：</p>
<ul>
<li><a href="https://docs.victoriametrics.com/#how-to-scrape-prometheus-exporters-such-as-node-exporter" target="_blank" rel="noopener">How to set up scraping of Prometheus-compatible targets</a></li>
<li><a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-import-time-series-data" target="_blank" rel="noopener">How to ingest data to VictoriaMetrics</a></li>
<li><a href="https://docs.victoriametrics.com/#prometheus-setup" target="_blank" rel="noopener">How to set up Prometheus to write data to VictoriaMetrics</a></li>
<li><a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#grafana-setup" target="_blank" rel="noopener">How to query VictoriaMetrics via Grafana</a></li>
<li><a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#graphite-api-usage" target="_blank" rel="noopener">How to query VictoriaMetrics via Graphite API</a></li>
<li><a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#alerting" target="_blank" rel="noopener">How to handle alerts</a></li>
</ul>
<p>VictoriaMetrics 默认使用 8428 端口处理 <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#prometheus-querying-api-usage" target="_blank" rel="noopener">Prometheus 查询请求</a>。建议为 VictoriaMetrics 搭建<a href="https://www.victoriametrics.com.cn/victoriametrics/dan-ji-ban-ben#jian-kong" target="_blank" rel="noopener">监控</a>。</p>
<h3>环境变量<span class="hx-absolute -hx-mt-20" id="环境变量"></span>
    <a href="#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>所有的 VictoriaMetrics 组件都支持在命令行参数中使用语法<code>%{ENV_VAR}</code>引用环境变量。比如，</p>
<p>在 VictoriaMetrics 启动时，如果环境变量中存在<code>METRICS_AUTH_KEY=top-secret</code>，那么<code>-metricsAuthKey=%{METRICS_AUTH_KEY}</code>就会自动转换成<code>metricsAuthKey=top-secret</code>。这个转换是 VictoriaMetrics 自动做的。</p>
<p>VictoriaMetrics 会递归的转换环境变量。比如我们有 2 个环境变量 <code>BAR=a%{BAZ}</code> 和 <code>BAZ=bc</code>。那对于 <code>FOO=%{BAR}</code> 就会自动被转换成<code>FOO=abc</code>。</p>
<p>此外，所有的VictoriaMetrics组件都允许根据以下规则通过环境变量设置参数：</p>
<p>Additionally, all the VictoriaMetrics components allow setting flag values via environment variables according to these rules:</p>
<ul>
<li><code>-envflag.enable</code> 参数必须开启。</li>
<li>参数名中的每一个<code>.</code>字符都会被用<code>_</code>替代（比如<code>-insert.maxQueueDuration &lt;duration&gt;</code> 会被转换成<code>insert_maxQueueDuration=&lt;duration&gt;</code>）。</li>
<li>对于重复参数，有一个替代方式就是用逗号<code>,</code>把多个参数值链接起来（比如 <code>-storageNode &lt;nodeA&gt; -storageNode &lt;nodeB&gt;</code> 会被转换成 <code>storageNode=&lt;nodeA&gt;,&lt;nodeB&gt;</code>）。</li>
<li>环境变量的前缀可以通过参数 <code>-envflag.prefix</code> 设定. 比如，如果<code>-envflag.prefix=VM_</code>, 那么所有环境变量名都要以 <code>VM_</code>开头。</li>
</ul>
<h3>使用 Snap 包<span class="hx-absolute -hx-mt-20" id="使用-snap-包"></span>
    <a href="#%e4%bd%bf%e7%94%a8-snap-%e5%8c%85" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics 的 Snap 包在 <a href="https://snapcraft.io/victoriametrics" target="_blank" rel="noopener">这里</a> 可以找到。</p>
<p>可以使用以下命令设置Snap软件包的命令行参数：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>echo &#39;FLAGS=&#34;-selfScrapeInterval=10s -search.logSlowQueryDuration=20s&#34;&#39; &gt; $SNAP_DATA/var/snap/victoriametrics/current/extra_flags
</span></span><span style="display:flex;"><span>snap restart victoriametrics</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>不要修改 <code>-storageDataPath</code> 的参数值， 因为 snap 包对宿主机的文件系统有访问限制。</p>
<p>可以使用一个文本编辑器修改采集配置：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>vi $SNAP_DATA/var/snap/victoriametrics/current/etc/victoriametrics-scrape-config.yaml</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>上面步骤完成后， 使用命令 <code>curl 127.0.0.1:8428/-/reload</code>触发一下配置中心加载。</p>
<h3>升级 VictoriaMetrics<span class="hx-absolute -hx-mt-20" id="升级-victoriametrics"></span>
    <a href="#%e5%8d%87%e7%ba%a7-victoriametrics" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>除非<a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases" target="_blank" rel="noopener">发布说明</a>另有说明，升级VictoriaMetrics到新版本是安全的。在升级过程中跳过多个版本也是安全的，除非<a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases" target="_blank" rel="noopener">发布说明</a>另有说明。建议定期升级到最新版本，因为它可能包含重要的错误修复、性能优化或新功能。</p>
<p>除非<a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases" target="_blank" rel="noopener">发布说明</a>另有说明，降级到旧版本也是安全的。</p>
<p>在升级/降级过程中必须执行以下步骤：</p>
<ul>
<li>向VictoriaMetrics进程发送<code>SIGINT</code>信号以正常停止它。请参阅<a href="https://stackoverflow.com/questions/33239959/send-signal-to-process-from-command-line" target="_blank" rel="noopener">如何向进程发送信号</a>。</li>
<li>等待进程停止。这可能需要几秒钟时间。</li>
<li>启动已升级的VictoriaMetrics。</li>
</ul>
<p>Prometheus在重新启动VictoriaMetrics时不会丢失数据。详细信息请<a href="https://grafana.com/blog/2019/03/25/whats-new-in-prometheus-2.8-wal-based-remote-write/" target="_blank" rel="noopener">参阅本文</a>。对于<a href="https://docs.victoriametrics.com/vmagent.html" target="_blank" rel="noopener">vmagent</a>也适用相同规则。</p>
<h3>如何构建源代码<span class="hx-absolute -hx-mt-20" id="如何构建源代码"></span>
    <a href="#%e5%a6%82%e4%bd%95%e6%9e%84%e5%bb%ba%e6%ba%90%e4%bb%a3%e7%a0%81" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>我们建议使用<a href="https://github.com/VictoriaMetrics/VictoriaMetrics/releases" target="_blank" rel="noopener">发布的二进制</a> 或者 <a href="https://hub.docker.com/r/victoriametrics/victoria-metrics/" target="_blank" rel="noopener">Docker 镜像</a>，而不是使用源代码进行构建。构建源代码一般是在你要开发一些定制化需求或者测试 BUG 修复时候才需要。</p>
<h4>构建开发环境<span class="hx-absolute -hx-mt-20" id="构建开发环境"></span>
    <a href="#%e6%9e%84%e5%bb%ba%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><ol>
<li><a href="https://golang.org/doc/install" target="_blank" rel="noopener">安装 Go</a>。 要求最低版本是 Go 1.19。</li>
<li>在<a href="https://github.com/VictoriaMetrics/VictoriaMetrics" target="_blank" rel="noopener">仓库</a>的根目录运行命令 <code>make victoria-metrics</code> 。命令会构建 <code>victoria-metrics</code> 二进制然后把它放到 <code>bin</code> 目录中。</li>
</ol>
<h4>构建生产环境<span class="hx-absolute -hx-mt-20" id="构建生产环境"></span>
    <a href="#%e6%9e%84%e5%bb%ba%e7%94%9f%e4%ba%a7%e7%8e%af%e5%a2%83" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><ol>
<li><a href="https://docs.docker.com/install/" target="_blank" rel="noopener">安装 docker</a>。</li>
<li>在<a href="https://github.com/VictoriaMetrics/VictoriaMetrics" target="_blank" rel="noopener">仓库</a>的跟目录执行命令<code>make victoria-metrics-prod</code> 。 命令会构建 <code>victoria-metrics-prod</code> 二进制，并把它放到 <code>bin</code> 目录中.</li>
</ol>
<h4>ARM build<span class="hx-absolute -hx-mt-20" id="arm-build"></span>
    <a href="#arm-build" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>ARM 的构建可以在树莓派或 <a href="https://blog.cloudflare.com/arm-takes-wing/" target="_blank" rel="noopener">energy-efficient ARM servers</a>上执行。</p>
<h4>Development ARM build<span class="hx-absolute -hx-mt-20" id="development-arm-build"></span>
    <a href="#development-arm-build" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><ol>
<li><a href="https://golang.org/doc/install" target="_blank" rel="noopener">Install Go</a>. 要求最低版本是 Go 1.19。</li>
<li>Run <code>make victoria-metrics-linux-arm</code> or <code>make victoria-metrics-linux-arm64</code> from the root folder of <a href="https://github.com/VictoriaMetrics/VictoriaMetrics" target="_blank" rel="noopener">the repository</a>. It builds <code>victoria-metrics-linux-arm</code> or <code>victoria-metrics-linux-arm64</code> binary respectively and puts it into the <code>bin</code> folder.</li>
</ol>
<h4>Production ARM build<span class="hx-absolute -hx-mt-20" id="production-arm-build"></span>
    <a href="#production-arm-build" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><ol>
<li><a href="https://docs.docker.com/install/" target="_blank" rel="noopener">Install docker</a>.</li>
<li>Run <code>make victoria-metrics-linux-arm-prod</code> or <code>make victoria-metrics-linux-arm64-prod</code> from the root folder of <a href="https://github.com/VictoriaMetrics/VictoriaMetrics" target="_blank" rel="noopener">the repository</a>. It builds <code>victoria-metrics-linux-arm-prod</code> or <code>victoria-metrics-linux-arm64-prod</code> binary respectively and puts it into the <code>bin</code> folder.</li>
</ol>
<h4>纯 Go 构建 (CGO_ENABLED=0)<span class="hx-absolute -hx-mt-20" id="纯-go-构建-cgo_enabled0"></span>
    <a href="#%e7%ba%af-go-%e6%9e%84%e5%bb%ba-cgo_enabled0" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p><code>纯Go</code> 模式构建就是只构建没有 <a href="https://golang.org/cmd/cgo/" target="_blank" rel="noopener">cgo</a> 的依赖的 Go 代码。</p>
<ol>
<li><a href="https://golang.org/doc/install" target="_blank" rel="noopener">安装Go</a>。 要求最低版本是 Go 1.19。</li>
<li>在<a href="https://github.com/VictoriaMetrics/VictoriaMetrics" target="_blank" rel="noopener">仓库</a>的根目录执行命令 <code>make victoria-metrics-pure</code> ，命令会构建出二进制 <code>victoria-metrics-pure</code> ，并把它放到 <code>bin</code> 目录中。</li>
</ol>
<h4>构建 Docker 镜像<span class="hx-absolute -hx-mt-20" id="构建-docker-镜像"></span>
    <a href="#%e6%9e%84%e5%bb%ba-docker-%e9%95%9c%e5%83%8f" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>执行命令 <code>make package-victoria-metrics</code>。 命令会在本地构建 <code>victoriametrics/victoria-metrics:&lt;PKG_TAG&gt;</code> 的镜像。 <code>&lt;PKG_TAG&gt;</code> 是使用仓库的源代码自动生成的镜像 Tag。 The <code>&lt;PKG_TAG&gt;</code> 可以通过命令 <code>PKG_TAG=foobar make package-victoria-metrics</code>手动指定。</p>
<p>Base Image 用的是 <a href="https://hub.docker.com/_/alpine" target="_blank" rel="noopener">alpine</a>，但是可以使用 <code>&lt;ROOT_IMAGE&gt;</code>环境变量选择使用其他 Base Image。比如，下面的命令就是使用 <a href="https://hub.docker.com/_/scratch" target="_blank" rel="noopener">scratch</a> 镜像作为我们的 Base Image:</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>ROOT_IMAGE=scratch make package-victoria-metrics</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<h3>使用 docker-compose 启动<span class="hx-absolute -hx-mt-20" id="使用-docker-compose-启动"></span>
    <a href="#%e4%bd%bf%e7%94%a8-docker-compose-%e5%90%af%e5%8a%a8" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p><a href="https://github.com/VictoriaMetrics/VictoriaMetrics/blob/master/deployment/docker/docker-compose.yml" target="_blank" rel="noopener">Docker-compose</a> 能帮助我们用一条命令加速启动 VictoriaMetrics, <a href="https://docs.victoriametrics.com/vmagent.html" target="_blank" rel="noopener">vmagent</a> 和 Grafana。更多详细信息请查阅<a href="https://github.com/VictoriaMetrics/VictoriaMetrics/tree/master/deployment/docker#folder-contains-basic-images-and-tools-for-building-and-running-victoria-metrics-in-docker" target="_blank" rel="noopener">这里</a>。</p>
<h3>Systemd Service<span class="hx-absolute -hx-mt-20" id="systemd-service"></span>
    <a href="#systemd-service" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>参考<a href="https://github.com/VictoriaMetrics/VictoriaMetrics/issues/43" target="_blank" rel="noopener">这里</a>将 VictoriaMetrics 设置为一个系统 Service。 一个 <a href="https://snapcraft.io/victoriametrics" target="_blank" rel="noopener">snap 包</a> 可在 Ubuntu 上直接使用。</p>
<h3>容量规划<span class="hx-absolute -hx-mt-20" id="容量规划"></span>
    <a href="#%e5%ae%b9%e9%87%8f%e8%a7%84%e5%88%92" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics在我们的<a href="https://docs.victoriametrics.com/CaseStudies.html" target="_blank" rel="noopener">案例研究</a>中表明，与竞争解决方案（Prometheus、Thanos、Cortex、TimescaleDB、InfluxDB、QuestDB和M3DB）相比，在生产工作负载上使用更少的CPU、RAM和存储空间。</p>
<p>VictoriaMetrics的容量与可用资源呈线性扩展。所需的CPU和RAM数量高度依赖于工作负载 - <a href="https://docs.victoriametrics.com/FAQ.html#what-is-an-active-time-series" target="_blank" rel="noopener">活跃时间序列</a>的数量、指标<a href="https://docs.victoriametrics.com/FAQ.html#what-is-high-churn-rate" target="_blank" rel="noopener">流失率</a>、查询类型、查询每秒请求数等等。建议根据<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#troubleshooting" target="_blank" rel="noopener">故障排除</a>文档，为您的生产工作负载设置一个测试VictoriaMetrics，并迭代地调整CPU和RAM资源，直到其稳定运行。根据我们的<a href="https://docs.victoriametrics.com/CaseStudies.html" target="_blank" rel="noopener">案例研究</a>，单节点VictoriaMetrics可以完美地处理以下生产工作负载：</p>
<ul>
<li>写入速率: 150万/秒+ 的样本数。</li>
<li>活跃 time series 总量: 5000万+</li>
<li>time series 总量: 50亿+</li>
<li>Time series 流失率: 每天1.5亿+</li>
<li>样本总数: 10万亿</li>
<li>查询：200+ qps</li>
<li>查询延时 (P99): 1 second</li>
</ul>
<p>根据测试运行期间的磁盘空间使用情况，可以推算出所需的存储空间（保留期通过<code>-retentionPeriod</code>命令行标志设置）。例如，如果在生产工作负载上进行了为期一天的测试运行后，<code>-storageDataPath</code>目录大小变为<code>10GB</code>，则对于<code>-retentionPeriod=100d</code>（100天保留期），至少需要<code>10GB*100=1TB</code>的磁盘空间。</p>
<p>建议保留以下数量的备用资源：</p>
<ul>
<li>为了降低工作负载暂时性峰值期间内存溢出（OOM）崩溃和减速的概率，建议保留50%的空闲RAM。</li>
<li>为了在工作负载暂时激增期间降低减速的可能性，将50%的空闲CPU用于分配。</li>
<li>至少保留 <code>-storageDataPath</code> 命令行标志指定的目录中 <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#storage" target="_blank" rel="noopener">20% 的可用存储空间</a>。详见<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#list-of-command-line-flags" target="_blank" rel="noopener">此处</a><code>-storage.minFreeDiskSpaceBytes</code> 命令行参数说明。</li>
<li>At least <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#storage" target="_blank" rel="noopener">20% of free storage space</a> at the directory pointed by <code>-storageDataPath</code> command-line flag. See also <code>-storage.minFreeDiskSpaceBytes</code> command-line flag description <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#list-of-command-line-flags" target="_blank" rel="noopener">here</a>.</li>
</ul>
<p>参见<a href="/o/132gTaNIXiiCk9qpfjsj/s/vRBuMkJtXHBycCjZtWfn/~/changes/34/victoriametrics/dan-ji-ban-ben/~/page#resource-usage-limits" >资源使用限制</a>。</p>
<h3>保存期<span class="hx-absolute -hx-mt-20" id="保存期"></span>
    <a href="#%e4%bf%9d%e5%ad%98%e6%9c%9f" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>保留期是通过 -retentionPeriod 命令行标志进行配置的，该标志后面跟着一个数字和时间单位字符 - h(小时), d(天), w(周), y(年)。如果未指定时间单位，则默认为月份。例如，-retentionPeriod=3 表示数据将被存储 3 个月然后删除。默认的保留期为一个月。最小的保留期为 24 小时或者 1 天。</p>
<p>数据被分割成每月的分区，存储在&lt;-storageDataPath&gt;/data/{small,big}文件夹中。超出配置保留期限的数据分区会在新月的第一天被删除。每个分区由一个或多个数据部分组成。超出配置保留期限的数据part最终会在</p>
<p>后台合并</p>
<p>过程中被删除。数据part所覆盖的时间范围不受保留期单位限制。一个数据part可以涵盖几小时或几天的数据。因此，只有当完全超出配置保留期时才能删除一个数据部分。请点击</p>
<p>这里</p>
<p>了解更多关于分区和部件。</p>
<p>给定的保留期（<code>-retentionPeriod</code>）对应的最大磁盘空间使用量将是（<code>-retentionPeriod</code> + 1）个月。例如，如果 <code>-retentionPeriod</code> 设置为 1，则一月份的数据将在三月一日被删除。</p>
<p>在现有数据上延长保留期是安全的。如果将保留期（<code>-retentionPeriod</code>）设置为比之前更低的值，则配置周期外的数据最终将被删除。</p>
<p>VictoriaMetrics不支持无限保留时间，但您可以指定一个任意长的持续时间，例如<code>-retentionPeriod=100</code>年。</p>
<h3>资源使用限制<span class="hx-absolute -hx-mt-20" id="资源使用限制"></span>
    <a href="#%e8%b5%84%e6%ba%90%e4%bd%bf%e7%94%a8%e9%99%90%e5%88%b6" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>默认情况下，VictoriaMetrics针对典型工作负载进行了优化，以实现最佳资源使用。某些工作负载可能需要细粒度的资源使用限制。在这些情况下，以下命令行标志可能会有用：</p>
<ul>
<li><code>-memory.allowedPercent</code> 和 <code>-memory.allowedBytes</code> 限制 VictoriaMetrics 内部缓存使用的内存量。请注意，VictoriaMetrics 可能会使用更多的内存，因为这些标志不限制每个查询所需的额外内存。</li>
<li><code>-search.maxMemoryPerQuery</code> 限制了用于处理单个查询的内存量。需要更多内存的查询将被拒绝。选择大量时间序列的重型查询可能会略微超过每个查询的内存限制。同时执行的查询的总内存限制可以估计为<code>-search.maxMemoryPerQuery</code>乘以<code>-search.maxConcurrentRequests</code>。</li>
<li><code>-search.maxUniqueTimeseries</code> 限制了单个查询可以找到和处理的唯一时间序列的数量。VictoriaMetrics在内存中保留有关每个查询定位到的时间序列的一些元信息，并花费一些CPU时间来处理找到的时间序列。这意味着单个查询可以使用的最大内存使用量和CPU使用量与<code>-search.maxUniqueTimeseries</code>成比例。</li>
<li><code>-search.maxQueryDuration</code> 限制了单个查询的持续时间。如果查询超过给定的持续时间，那么它将被取消。这样可以在执行意外繁重的查询时节省CPU和内存。</li>
<li><code>-search.maxConcurrentRequests</code> 限制了VictoriaMetrics可以处理的并发请求数量。更多的并发请求通常意味着更大的内存使用量。例如，如果单个查询在执行过程中需要100 MiB的额外内存，则可能需要100个并发查询需要<code>100 * 100 MiB = 10 GiB</code> 的额外内存。因此，在达到并发限制时，最好限制并发查询的数量，并暂停进入的附加查询。VictoriaMetrics提供了<code>-search.maxQueueDuration</code>命令行标志来限制挂起查询的最长等待时间。另请参阅<code>-search.maxMemoryPerQuery</code>命令行标志。</li>
<li><code>-search.maxSamplesPerSeries</code> 每个时间序列查询可以处理的原始样本数量。VictoriaMetrics在查询期间按顺序处理每个找到的时间序列的原始样本。它将所选时间范围内每个时间序列的原始样本解压缩到内存中，然后应用给定的<a href="/o/132gTaNIXiiCk9qpfjsj/s/vRBuMkJtXHBycCjZtWfn/~/changes/34/victoriametrics/shu-ju-cha-xun/metricql/functions/~/page" >汇总函数</a>。当查询在包含数亿条原始样本的时间范围上执行时，<code>-search.maxSamplesPerSeries</code>命令行标志允许限制内存使用量。</li>
<li><code>-search.maxSamplesPerQuery</code> 限制单个查询可以处理的原始样本数量。这样可以限制重负载查询的CPU使用率。</li>
<li><code>-search.maxPointsPerTimeseries</code> 限制每个范围查询匹配时间序列返回的计算点数。</li>
<li><code>-search.maxPointsSubqueryPerTimeseries</code>限制了在子查询评估过程中，每个匹配时间序列可以生成的计算点数。</li>
<li><code>-search.maxSeriesPerAggrFunc</code> 限制了在单个查询中由<a href="https://docs.victoriametrics.com/MetricsQL.html#aggregate-functions" target="_blank" rel="noopener">MetricsQL聚合函数</a>生成的时间序列数量。</li>
<li><code>-search.maxSeries</code> 限制了从<a href="https://prometheus.io/docs/prometheus/latest/querying/api/#finding-series-by-label-matchers" target="_blank" rel="noopener">/api/v1/series</a>返回的时间序列数量。这个端点主要被Grafana用于自动完成指标名称、标签名称和标签值。当数据库包含大量唯一时间序列时，对该端点的查询可能会消耗大量的CPU时间和内存，因为存在<a href="https://docs.victoriametrics.com/FAQ.html#what-is-high-churn-rate" target="_blank" rel="noopener">高频率变化</a>。在这种情况下，将<code>-search.maxSeries</code>设置为较低的值可能有助于限制CPU和内存使用。</li>
<li><code>-search.maxTagKeys</code> 限制从<a href="https://prometheus.io/docs/prometheus/latest/querying/api/#getting-label-names" target="_blank" rel="noopener">/api/v1/labels</a>返回的项目数量。此端点主要用于Grafana自动完成标签名称。当数据库包含大量唯一时间序列时，对此端点的查询可能会消耗大量的CPU时间和内存，因为存在<a href="https://docs.victoriametrics.com/FAQ.html#what-is-high-churn-rate" target="_blank" rel="noopener">高频率变化</a>。在这种情况下，将-search.maxTagKeys设置为较低值可能有助于限制CPU和内存使用。</li>
<li><code>-search.maxTagValues</code> 限制从<a href="https://prometheus.io/docs/prometheus/latest/querying/api/#querying-label-values" target="_blank" rel="noopener">/api/v1/label/&hellip;/values</a>返回的项目数量。此端点主要用于Grafana自动完成标签值。由于<a href="https://docs.victoriametrics.com/FAQ.html#what-is-high-churn-rate" target="_blank" rel="noopener">高频率更改</a>，当数据库包含大量唯一时间序列时，对该端点的查询可能会消耗大量CPU时间和内存。在这种情况下，将<code>-search.maxTagValues</code>设置为较低的值可能有助于限制CPU和内存使用。</li>
<li><code>-search.maxTagValueSuffixesPerSearch</code> 限制了从<code>/metrics/find</code>端点返回的条目数量。请参阅<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#graphite-metrics-api-usage" target="_blank" rel="noopener">Graphite Metrics API使用文档</a>。</li>
</ul>
<p>参见 <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#cardinality-limiter" target="_blank" rel="noopener">cardinality limiter</a> and <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#capacity-planning" target="_blank" rel="noopener">capacity planning docs</a>.</p>
<h3>高可用<span class="hx-absolute -hx-mt-20" id="高可用"></span>
    <a href="#%e9%ab%98%e5%8f%af%e7%94%a8" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><ul>
<li>在不同的数据中心（可用区）安装多个VictoriaMetrics实例。</li>
<li>将这些实例的地址通过 <code>-remoteWrite.url</code> 命令行标志传递给 <a href="https://docs.victoriametrics.com/vmagent.html" target="_blank" rel="noopener">vmagent</a>。</li>
</ul>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>/path/to/vmagent -remoteWrite.url=http://&lt;victoriametrics-addr-1&gt;:8428/api/v1/write -remoteWrite.url=http://&lt;victoriametrics-addr-2&gt;:8428/api/v1/write</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>或者这些地址可以传递给Prometheus配置中的<code>remote_write</code>部分：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>remote_write:
</span></span><span style="display:flex;"><span>  - url: http://&lt;victoriametrics-addr-1&gt;:8428/api/v1/write
</span></span><span style="display:flex;"><span>    queue_config:
</span></span><span style="display:flex;"><span>      max_samples_per_send: 10000
</span></span><span style="display:flex;"><span>  # ...
</span></span><span style="display:flex;"><span>  - url: http://&lt;victoriametrics-addr-N&gt;:8428/api/v1/write
</span></span><span style="display:flex;"><span>    queue_config:
</span></span><span style="display:flex;"><span>      max_samples_per_send: 10000</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<ul>
<li>应用更新的配置：</li>
</ul>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>kill -HUP `pidof prometheus`</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>建议在高负载环境中使用<a href="https://docs.victoriametrics.com/vmagent.html" target="_blank" rel="noopener">vmagent</a>而不是Prometheus。</p>
<ul>
<li>现在Prometheus应该并行地将数据写入所有配置的<code>remote_write</code> URL。</li>
<li>在所有的VictoriaMetrics副本前面设置<a href="https://github.com/jacksontj/promxy" target="_blank" rel="noopener">Promxy</a>。</li>
<li>在Grafana中设置一个指向Promxy的Prometheus数据源。</li>
</ul>
<p>如果您在每个Prometheus HA对中有副本<code>r1</code>和<code>r2</code>，那么请将每个r1配置为将数据写入<code>victoriametrics-addr-1</code>，而每个<code>r2</code>应该将数据写入<code>victoriametrics-addr-2</code>。</p>
<p>另一种选择是从Prometheus HA对同时向一对启用了去重功能的VictoriaMetrics实例写入数据。有关详细信息，请参阅<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#deduplication" target="_blank" rel="noopener">此部分</a>。</p>
<h3>监控<span class="hx-absolute -hx-mt-20" id="监控"></span>
    <a href="#%e7%9b%91%e6%8e%a7" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics在<code>/metrics</code>页面以Prometheus公开格式导出内部指标。这些指标可以通过<a href="https://docs.victoriametrics.com/vmagent.html" target="_blank" rel="noopener">vmagent</a>或Prometheus进行抓取。另外，当<code>-selfScrapeInterval</code>命令行标志设置为大于0的持续时间时，单节点的VictoriaMetrics可以自动抓取指标。例如，<code>-selfScrapeInterval=10s</code>将启用每10秒一次的自动抓取<code>/metrics</code>页面。</p>
<p>官方提供了适用于<a href="https://grafana.com/grafana/dashboards/10229-victoriametrics/" target="_blank" rel="noopener">单节点</a>和<a href="https://grafana.com/grafana/dashboards/11176-victoriametrics-cluster/" target="_blank" rel="noopener">集群</a> VictoriaMetrics 的 Grafana 仪表板。还可以查看由社区创建的适用于<a href="https://grafana.com/grafana/dashboards/11831" target="_blank" rel="noopener">集群 VictoriaMetrics 的替代仪表板</a>。</p>
<p>仪表板上的图表包含有用的提示 - 将鼠标悬停在每个图表左上角的 <code>i</code> 图标上以阅读它。</p>
<p>我们建议通过<a href="https://docs.victoriametrics.com/vmalert.html" target="_blank" rel="noopener">vmalert</a>或Prometheus设置警报。</p>
<p>VictoriaMetrics 在<code>/api/v1/status/active_queries</code> 页面中展示当前正在执行的查询以及它们的运行时间。</p>
<p>VictoriaMetrics <code>/api/v1/status/top_queries</code> 页面展示执行时间最长的查询语句。</p>
<p>参见 <a href="https://victoriametrics.com/blog/victoriametrics-monitoring/" target="_blank" rel="noopener">VictoriaMetrics Monitoring</a> 和 <a href="https://docs.victoriametrics.com/Troubleshooting.html" target="_blank" rel="noopener">troubleshooting docs</a>.</p>
<h4>Push Metrics<span class="hx-absolute -hx-mt-20" id="push-metrics"></span>
    <a href="#push-metrics" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>所有的VictoriaMetrics组件都支持将其在/metrics页面上公开的指标以Prometheus文本格式推送到远程存储。如果VictoriaMetrics组件位于隔离网络中，无法被本地<a href="https://docs.victoriametrics.com/vmagent.html" target="_blank" rel="noopener">vmagent</a>抓取，则可以使用此功能来替代<a href="https://docs.victoriametrics.com/#how-to-scrape-prometheus-exporters-such-as-node-exporter" target="_blank" rel="noopener">经典的类Prometheus指标抓取</a>。</p>
<p>以下命令行参数与从VictoriaMetrics组件推送指标相关：</p>
<ul>
<li><code>-pushmetrics.url</code> - push 的目标 URL 地址。比如， <code>-pushmetrics.url=http://victoria-metrics:8428/api/v1/import/prometheus</code> 表示把内部指标 Push 到 <code>/api/v1/import/prometheus</code> 中，参见<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-import-data-in-prometheus-exposition-format" target="_blank" rel="noopener">这个文档</a>。 <code>-pushmetrics.url</code> 参数可以被指定多次。这种情况下 metrics 会被 Push 到所有目标 URL 地址上。URL 中也可以包含上 Basic Auth 信息，格式是<code>http://user:pass@hostname/api/v1/import/prometheus</code>。Metrics 是以压缩的形式被 Push 到 <code>-pushmetrics.url</code> 中的，请求头中带有<code>Content-Encoding: gzip</code> 。这可以减少 Push 所需的网络带宽。</li>
<li><code>-pushmetrics.extraLabel</code> - 在把 metrics 数据 Push 到<code>-pushmetrics.url</code>之前追加一些 Label 。每一个Label都是用<code>label=&quot;value&quot;</code>的格式指定。命令行参数 <code>-pushmetrics.extraLabel</code> 也是可以被多次指定的。这种情况下会将指定的多个Label 全都追加到 metrics 数据中，再 Push 给 <code>-pushmetrics.url</code>地址。</li>
<li><code>-pushmetrics.interval</code> - Push 动作的间隔，默认是 10t秒一次。</li>
</ul>
<p>例如，以下命令指示VictoriaMetrics将<code>/metrics</code>页面的指标推送到<code>https://maas.victoriametrics.com/api/v1/import/prometheus</code>，并使用<code>user:pass</code>基本身份验证。在将指标发送到远程存储之前，会添加<code>instance=&quot;foobar&quot;</code>和<code>job=&quot;vm&quot;</code>标签给所有的指标：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>/path/to/victoria-metrics \
</span></span><span style="display:flex;"><span>  -pushmetrics.url=https://user:pass@maas.victoriametrics.com/api/v1/import/prometheus \
</span></span><span style="display:flex;"><span>  -pushmetrics.extraLabel=&#39;instance=&#34;foobar&#34;&#39; \
</span></span><span style="display:flex;"><span>  -pushmetrics.extraLabel=&#39;job=&#34;vm&#34;&#39;</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<h3>调整？<span class="hx-absolute -hx-mt-20" id="调整"></span>
    <a href="#%e8%b0%83%e6%95%b4" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><ul>
<li>不需要调整VictoriaMetrics - 它使用合理的默认命令行标志，这些标志会自动根据可用的CPU和RAM资源进行调整。</li>
<li>操作系统不需要调优 - VictoriaMetrics已经针对默认的操作系统设置进行了优化。唯一的选项是增加操作系统中<a href="https://medium.com/@muhammadtriwibowo/set-permanently-ulimit-n-open-files-in-ubuntu-4d61064429a" target="_blank" rel="noopener">打开文件数量的限制</a>。这个建议不仅适用于VictoriaMetrics，也适用于任何处理大量HTTP连接并将数据存储在磁盘上的服务。</li>
<li>VictoriaMetrics是一个写入密集型应用程序，其性能取决于磁盘性能。因此，请注意其他可能<a href="https://github.com/VictoriaMetrics/VictoriaMetrics/issues/1521" target="_blank" rel="noopener">耗尽磁盘资源</a>的应用程序或实用工具（如<a href="http://manpages.ubuntu.com/manpages/bionic/man8/fstrim.8.html" target="_blank" rel="noopener">fstrim</a>）。</li>
<li>推荐使用ext4文件系统，并且<a href="https://cloud.google.com/compute/docs/disks/#pdspecs" target="_blank" rel="noopener">推荐在GCP上使用基于持久HDD硬盘作为持久存储</a>，因为它通过内部复制受到硬件故障保护，并且可以<a href="https://cloud.google.com/compute/docs/disks/add-persistent-disk#resize_pd" target="_blank" rel="noopener">动态调整大小</a>。如果您计划在ext4分区上存储超过1TB的数据或者计划将其扩展到超过16TB，则建议传递以下选项给mkfs.ext4：</li>
</ul>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>mkfs.ext4 ... -O 64bit,huge_file,extent -T huge</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<h2>数据运维<span class="hx-absolute -hx-mt-20" id="数据运维"></span>
    <a href="#%e6%95%b0%e6%8d%ae%e8%bf%90%e7%bb%b4" class="subheading-anchor" aria-label="Permalink for this section"></a></h2><h3>如何运用 snapshots<span class="hx-absolute -hx-mt-20" id="如何运用-snapshots"></span>
    <a href="#%e5%a6%82%e4%bd%95%e8%bf%90%e7%94%a8-snapshots" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics可以为存储在<code>-storageDataPath</code>目录下的所有数据创建<a href="https://www.victoriametrics.com.cn/victoriametrics/dan-ji-ban-ben#how-to-work-with-snapshots" target="_blank" rel="noopener">即时快照</a>。请访问<code>http://:8428/snapshot/create</code>以创建即时快照。该页面将返回以下JSON响应：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>{&#34;status&#34;:&#34;ok&#34;,&#34;snapshot&#34;:&#34;&lt;snapshot-name&gt;&#34;}</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>快照是在<code>&lt;-storageDataPath&gt;/snapshots</code>目录下创建的，其中<code>&lt;-storageDataPath&gt;</code>是命令行参数。可以随时使用<a href="https://docs.victoriametrics.com/vmbackup.html" target="_blank" rel="noopener">vmbackup</a>将快照归档到备份存储中。</p>
<p><code>http://&lt;victoriametrics-addr&gt;:8428/snapshot/list</code> 页面包含了可用快照列表。</p>
<p><code>http://&lt;victoriametrics-addr&gt;:8428/snapshot/delete?snapshot=&lt;snapshot-name&gt;</code> 则可删除 <code>&lt;snapshot-name&gt;</code> 快照.</p>
<p><code>http://&lt;victoriametrics-addr&gt;:8428/snapshot/delete_all</code> 可删除所有快照。</p>
<p>从快照中恢复数据的步骤：</p>
<ol>
<li>使用命令 <code>kill -INT</code>停掉 VictoriaMetrics。</li>
<li>使用 <a href="https://docs.victoriametrics.com/vmrestore.html" target="_blank" rel="noopener">vmrestore</a> 将快照内容恢复到 <code>-storageDataPath</code>.参数指定的目录。</li>
<li>启动 VictoriaMetrics.</li>
</ol>
<h3>如何删除 Timeseries<span class="hx-absolute -hx-mt-20" id="如何删除-timeseries"></span>
    <a href="#%e5%a6%82%e4%bd%95%e5%88%a0%e9%99%a4-timeseries" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>发送一个请求到<code>http://:8428/api/v1/admin/tsdb/delete_series</code>，其中<code>&lt;timeseries_selector_for_delete&gt;</code>可以包含任何用于删除指标的时间序列选择器。删除API不支持删除特定的时间范围，timeseries 只能完全删除。已删除时间序列的存储空间不会立即释放 - 它在后续数据文件的后台 Merge 过程中释放。</p>
<p>请注意，对于以前月份的数据可能永远不会进行后台合并，因此历史数据将无法释放存储空间。在这种情况下，强制合并可能有助于释放存储空间。</p>
<p>建议在实际删除指标之前使用调用<code>http://:8428/api/v1/series?match[]=&lt;timeseries_selector_for_delete&gt;</code>验证将要被删除的指标。默认情况下，此查询仅扫描过去5分钟内的系列，因此您可能需要调整开始和结束时间以获得匹配结果。</p>
<p>如果设置了<code>-deleteAuthKey</code>命令行参数，则可以使用<code>authKey</code>保护/api/v1/admin/tsdb/delete_series处理程序。</p>
<p>Delete API主要适用于以下情况：</p>
<p>一次性删除意外写入的无效（或不需要）时间序列。 由于GDPR而一次性删除用户数据。 以下情况不建议使用delete API，因为它会带来非零开销：</p>
<p>定期清理不需要的数据。只需防止将不需要的数据写入VictoriaMetrics即可。可以通过重新标记来实现。有关详细信息，请参阅本文。 通过删除不需要的时间序列来减少磁盘空间使用情况。这种方法无法达到预期效果，因为已删除的时间序列占用磁盘空间直到下一次合并操作，而当删除过旧数据时可能永远不会发生合并操作。强制合并可用于释放由旧数据占用的磁盘空间。请注意，VictoriaMetrics不会从倒排索引（也称为indexdb）中删除已删除时间序列的条目。倒排索引每配置保留期清理一次。</p>
<p>最好使用<code>-retentionPeriod</code>命令行参数以有效地修剪旧数据。</p>
<h3>强制合并<span class="hx-absolute -hx-mt-20" id="强制合并"></span>
    <a href="#%e5%bc%ba%e5%88%b6%e5%90%88%e5%b9%b6" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics在<a href="https://medium.com/@valyala/how-victoriametrics-makes-instant-snapshots-for-multi-terabyte-time-series-data-e1f3fb0e0282" target="_blank" rel="noopener">后台执行数据压缩</a>，以保持在接受新数据时的良好性能特征。这些压缩（合并）是独立地针对每个月份分区进行的。这意味着如果没有将新数据注入到这些分区中，则会停止对每个月份分区进行压缩。有时需要触发旧分区的压缩，例如为了释放被<a href="https://www.victoriametrics.com.cn/victoriametrics/dan-ji-ban-ben#ru-he-shan-chu-timeseries" target="_blank" rel="noopener">删除Timeseries</a>占用的磁盘空间。在这种情况下，可以通过向<code>/internal/force_merge</code>发送请求来启动指定的每月分区上的强制合并操作?<code>partition_prefix=YYYY_MM</code>，其中<code>YYYY_MM</code>是每月分区名称。例如，<code>http://victoriametrics:8428/internal/force_merge?partition_prefix=2020_08</code>将会启动2020年8月份分区的强制合并操作。调用<code>/internal/force_merge</code>会立即返回，而相应的强制合并操作将继续在后台运行。 强制合并可能需要额外的CPU、磁盘IO和存储空间资源。在正常情况下不必运行强制合并操作，因为当有新数据注入时，VictoriaMetrics会自动在后台执行<a href="https://medium.com/@valyala/how-victoriametrics-makes-instant-snapshots-for-multi-terabyte-time-series-data-e1f3fb0e0282" target="_blank" rel="noopener">最佳合并操作</a>。</p>
<h3>导出 timeseries<span class="hx-absolute -hx-mt-20" id="导出-timeseries"></span>
    <a href="#%e5%af%bc%e5%87%ba-timeseries" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics 提供了下面的 API 接口来导出数据</p>
<ul>
<li><code>/api/v1/export</code> 将数据一以 JSON 格式导出。参见 <a href="https://docs.victoriametrics.com/#how-to-export-data-in-json-line-format" target="_blank" rel="noopener">这篇文档</a> 获取更多信息。</li>
<li><code>/api/v1/export/csv</code> 将数据以 CSV 格式导出。参见 <a href="https://docs.victoriametrics.com/#how-to-export-csv-data" target="_blank" rel="noopener">这篇文档</a> 获取更多信息。</li>
<li><code>/api/v1/export/native</code> 将数据以原生二进制格式导出。这是性能最好的数据导出格式。参见 <a href="https://docs.victoriametrics.com/#how-to-export-data-in-native-format" target="_blank" rel="noopener">这些文档</a>获取更多信息。</li>
</ul>
<h4>如何导出 JSON 格式<span class="hx-absolute -hx-mt-20" id="如何导出-json-格式"></span>
    <a href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%87%ba-json-%e6%a0%bc%e5%bc%8f" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>发送一个请求到 <code>http://:8428/api/v1/export?match[]=&lt;timeseries_selector_for_export&gt;</code>，其中 <code>&lt;timeseries_selector_for_export&gt;</code> 可以是任何用于导出指标的<a href="https://prometheus.io/docs/prometheus/latest/querying/basics/#time-series-selectors" target="_blank" rel="noopener">时间序列选择器</a>。使用 <code>{__name__!=&quot;&quot;}</code> 选择器来获取所有时间序列。响应将以 <a href="http://ndjson.org/" target="_blank" rel="noopener">JSON 流格式</a>包含所选时间序列的所有数据。每个 JSON 行都包含单个时间序列的样本。示例输出如下：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>{&#34;metric&#34;:{&#34;__name__&#34;:&#34;up&#34;,&#34;job&#34;:&#34;node_exporter&#34;,&#34;instance&#34;:&#34;localhost:9100&#34;},&#34;values&#34;:[0,0,0],&#34;timestamps&#34;:[1549891472010,1549891487724,1549891503438]}
</span></span><span style="display:flex;"><span>{&#34;metric&#34;:{&#34;__name__&#34;:&#34;up&#34;,&#34;job&#34;:&#34;prometheus&#34;,&#34;instance&#34;:&#34;localhost:9090&#34;},&#34;values&#34;:[1,1,1],&#34;timestamps&#34;:[1549891461511,1549891476511,1549891491511]}</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>Optional <code>start</code> and <code>end</code> args may be added to the request in order to limit the time frame for the exported data. See <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#timestamp-formats" target="_blank" rel="noopener">allowed formats</a> for these args.</p>
<p>可选的<code>start</code>和<code>end</code>参数可以添加到请求中，以限制导出数据的时间范围。请参阅这些参数的<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#timestamp-formats" target="_blank" rel="noopener">允许格式</a>。</p>
<p>例如：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>curl http://&lt;victoriametrics-addr&gt;:8428/api/v1/export -d &#39;match[]=&lt;timeseries_selector_for_export&gt;&#39; -d &#39;start=1654543486&#39; -d &#39;end=1654543486&#39;
</span></span><span style="display:flex;"><span>curl http://&lt;victoriametrics-addr&gt;:8428/api/v1/export -d &#39;match[]=&lt;timeseries_selector_for_export&gt;&#39; -d &#39;start=2022-06-06T19:25:48&#39; -d &#39;end=2022-06-06T19:29:07&#39;</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>可选的<code>max_rows_per_line</code>参数可以添加到请求中，以限制每个JSON行导出的最大行数。当导出大量时间序列数据时，可以添加可选的<code>reduce_mem_usage=1</code>参数来减少内存使用。在这种情况下，输出可能包含多行同一时间序列的样本。</p>
<p>在向<code>/api/v1/export</code>发送请求时，请传递<code>Accept-Encoding: gzip</code> HTTP头部，以便在导出大量时间序列数据时减少网络带宽。这将为导出的数据启用gzip压缩。以下是导出gzipped数据的示例：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>curl -H &#39;Accept-Encoding: gzip&#39; http://localhost:8428/api/v1/export -d &#39;match[]={__name__!=&#34;&#34;}&#39; &gt; data.jsonl.gz</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>每个对<code>/api/v1/export</code>的请求的最长持续时间受<code>-search.maxExportDuration</code>命令行标志限制。</p>
<p>导出的数据可以通过将其POST到<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-import-data-in-json-line-format" target="_blank" rel="noopener">/api/v1/import</a>来导入。</p>
<p>默认情况下，对通过<code>/api/v1/export</code>导出的数据应用<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#deduplication" target="_blank" rel="noopener">去重</a>。如果在请求中传递了<code>reduce_mem_usage=1</code>查询参数，则不会应用去重。</p>
<h4>如何导出 CSV 数据<span class="hx-absolute -hx-mt-20" id="如何导出-csv-数据"></span>
    <a href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%87%ba-csv-%e6%95%b0%e6%8d%ae" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>发送请求到 <code>http://&lt;victoriametrics-addr&gt;:8428/api/v1/export/csv?format=&lt;format&gt;&amp;match=&lt;timeseries_selector_for_export&gt;，</code> 这里：</p>
<ul>
<li><code>&lt;format&gt;</code> 必须包含逗号分隔的标签名称，用于导出CSV文件。支持以下特殊标签名称：
<ul>
<li><code>__name__</code> - metric 名称</li>
<li><code>__value__</code> - 样本值</li>
<li><code>__timestamp__:&lt;ts_format&gt;</code> - 样本时间戳. <code>&lt;ts_format&gt;</code> 可以包含以下值:
<ul>
<li><code>unix_s</code> - unix 秒</li>
<li><code>unix_ms</code> - unix 毫秒</li>
<li><code>unix_ns</code> - unix 纳秒</li>
<li><code>rfc3339</code> - <a href="https://www.ietf.org/rfc/rfc3339.txt" target="_blank" rel="noopener">RFC3339</a> 格式时间</li>
<li><code>custom:&lt;layout&gt;</code> - 自定义时间格式，可由Go的<a href="https://golang.org/pkg/time/#Time.Format" target="_blank" rel="noopener">time.Format</a>函数支持。</li>
</ul>
</li>
</ul>
</li>
<li><code>&lt;timeseries_selector_for_export&gt;</code> 用于过滤导出数据的 <a href="https://prometheus.io/docs/prometheus/latest/querying/basics/#time-series-selectors" target="_blank" rel="noopener">time series selector</a> 。</li>
</ul>
<p><code>start</code> and <code>end</code> 参数是可选的，可以加到请求中以限制下导出的数据量，关于该参数可阅读系9啊 <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#timestamp-formats" target="_blank" rel="noopener">allowed formats</a> 。</p>
<p>举例：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>curl http://&lt;victoriametrics-addr&gt;:8428/api/v1/export/csv -d &#39;format=&lt;format&gt;&#39; -d &#39;match[]=&lt;timeseries_selector_for_export&gt;&#39; -d &#39;start=1654543486&#39; -d &#39;end=1654543486&#39;
</span></span><span style="display:flex;"><span>curl http://&lt;victoriametrics-addr&gt;:8428/api/v1/export/csv -d &#39;format=&lt;format&gt;&#39; -d &#39;match[]=&lt;timeseries_selector_for_export&gt;&#39; -d &#39;start=2022-06-06T19:25:48&#39; -d &#39;end=2022-06-06T19:29:07&#39;</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>通过 <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-import-csv-data" target="_blank" rel="noopener">/api/v1/import/csv</a>，可以将导出的 CSV 数据导入到 VictoriaMetrics。</p>
<p>默认情况下，对于以 CSV 导出的数据应用了<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#deduplication" target="_blank" rel="noopener">去重功能</a>。如果要导出原始数据而不进行去重操作，则可以在 <code>/api/v1/export/csv</code> 中传递 <code>reduce_mem_usage=1</code> 查询参数。</p>
<h4>如何导出原生数据<span class="hx-absolute -hx-mt-20" id="如何导出原生数据"></span>
    <a href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%87%ba%e5%8e%9f%e7%94%9f%e6%95%b0%e6%8d%ae" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>发送请求到 <code>http://&lt;victoriametrics-addr&gt;:8428/api/v1/export/native?match[]=&lt;timeseries_selector_for_export&gt;，</code> 这里的 <code>&lt;timeseries_selector_for_export&gt;</code> 可以设置任意的 <a href="https://prometheus.io/docs/prometheus/latest/querying/basics/#time-series-selectors" target="_blank" rel="noopener">time series selector</a> 来过滤要导出的 metrics。 使用 <code>{__name__=~&quot;.*&quot;}</code> 选择所有的 metric。</p>
<p>在大型数据库上，您可能会遇到导出时间序列数量限制的问题。在这种情况下，您需要调整<code>-search.maxExportSeries</code>命令行参数：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span># count unique time series in database
</span></span><span style="display:flex;"><span>wget -O- -q &#39;http://your_victoriametrics_instance:8428/api/v1/series/count&#39; | jq &#39;.data[0]&#39;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># relaunch victoriametrics with search.maxExportSeries more than value from previous command</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>可选的<code>start</code>和<code>end</code>参数可以添加到请求中，以限制导出数据的时间范围。请参阅这些参数的<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#timestamp-formats" target="_blank" rel="noopener">允许格式</a>。</p>
<p>举例:</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>curl http://&lt;victoriametrics-addr&gt;:8428/api/v1/export/native -d &#39;match[]=&lt;timeseries_selector_for_export&gt;&#39; -d &#39;start=1654543486&#39; -d &#39;end=1654543486&#39;
</span></span><span style="display:flex;"><span>curl http://&lt;victoriametrics-addr&gt;:8428/api/v1/export/native -d &#39;match[]=&lt;timeseries_selector_for_export&gt;&#39; -d &#39;start=2022-06-06T19:25:48&#39; -d &#39;end=2022-06-06T19:29:07&#39;</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>通过<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-import-data-in-native-format" target="_blank" rel="noopener">/api/v1/import/native</a>，可以将导出的数据导入到VictoriaMetrics中。原生导出格式在不同版本的VictoriaMetrics之间可能会以不兼容的方式发生变化，因此从X版本导出的数据可能无法成功导入到Y版本的VictoriaMetrics中。</p>
<p>原生格式导出的数据不会应用<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#deduplication" target="_blank" rel="noopener">去重操作</a>。预期在数据导入过程中进行去重处理。</p>
<h3>如何导入 timeseries 数据<span class="hx-absolute -hx-mt-20" id="如何导入-timeseries-数据"></span>
    <a href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%85%a5-timeseries-%e6%95%b0%e6%8d%ae" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics可以从与Prometheus兼容的目标（也称为“pull”协议）中发现和抓取指标-请参阅<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-scrape-prometheus-exporters-such-as-node-exporter" target="_blank" rel="noopener">这些文档</a>。此外，VictoriaMetrics还可以通过以下流行的数据摄入协议（也称为“push”协议）接收指标：</p>
<ul>
<li><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write" target="_blank" rel="noopener">Prometheus remote_write API</a>. See <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#prometheus-setup" target="_blank" rel="noopener">these docs</a> for details.</li>
<li>DataDog <code>submit metrics</code> API. See <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-send-data-from-datadog-agent" target="_blank" rel="noopener">these docs</a> for details.</li>
<li>InfluxDB line protocol. See <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-send-data-from-influxdb-compatible-agents-such-as-telegraf" target="_blank" rel="noopener">these docs</a> for details.</li>
<li>Graphite plaintext protocol. See <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-send-data-from-graphite-compatible-agents-such-as-statsd" target="_blank" rel="noopener">these docs</a> for details.</li>
<li>OpenTSDB telnet put protocol. See <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#sending-data-via-telnet-put-protocol" target="_blank" rel="noopener">these docs</a> for details.</li>
<li>OpenTSDB http <code>/api/put</code> protocol. See <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#sending-opentsdb-data-via-http-apiput-requests" target="_blank" rel="noopener">these docs</a> for details.</li>
<li><code>/api/v1/import</code> for importing data obtained from <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-export-data-in-json-line-format" target="_blank" rel="noopener">/api/v1/export</a>. See <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-import-data-in-json-line-format" target="_blank" rel="noopener">these docs</a> for details.</li>
<li><code>/api/v1/import/native</code> for importing data obtained from <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-export-data-in-native-format" target="_blank" rel="noopener">/api/v1/export/native</a>. See <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-import-data-in-native-format" target="_blank" rel="noopener">these docs</a> for details.</li>
<li><code>/api/v1/import/csv</code> for importing arbitrary CSV data. See <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-import-csv-data" target="_blank" rel="noopener">these docs</a> for details.</li>
<li><code>/api/v1/import/prometheus</code> for importing data in Prometheus exposition format and in <a href="https://github.com/prometheus/pushgateway#url" target="_blank" rel="noopener">Pushgateway format</a>. See <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-import-data-in-prometheus-exposition-format" target="_blank" rel="noopener">these docs</a> for details.</li>
</ul>
<p>请注意，大多数摄取 API（除了 <a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#remote_write" target="_blank" rel="noopener">Prometheus remote_write API</a>）都经过性能优化，并以流式处理方式处理数据。这意味着客户端可以通过开放的连接传输无限量的数据。因此，导入 API 可能不会将解析错误返回给客户端，因为预期数据流不会中断。相反，请在服务器端（VictoriaMetrics 单节点或 vminsert）查找解析错误，或者检查 <code>vm_rows_invalid_total</code> 指标是否发生变化（由服务器端导出）。</p>
<h4>如何导入 JSON 格式数据<span class="hx-absolute -hx-mt-20" id="如何导入-json-格式数据"></span>
    <a href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%85%a5-json-%e6%a0%bc%e5%bc%8f%e6%95%b0%e6%8d%ae" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>导入从 <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-export-data-in-json-line-format" target="_blank" rel="noopener">/api/v1/export</a>获取到的数据的示例：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span># Export the data from &lt;source-victoriametrics&gt;:
</span></span><span style="display:flex;"><span>curl http://source-victoriametrics:8428/api/v1/export -d &#39;match={__name__!=&#34;&#34;}&#39; &gt; exported_data.jsonl
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># Import the data to &lt;destination-victoriametrics&gt;:
</span></span><span style="display:flex;"><span>curl -X POST http://destination-victoriametrics:8428/api/v1/import -T exported_data.jsonl</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>将 <code>Content-Encoding: gzip</code> 的 HTTP 请求头传递给 <code>/api/v1/import</code>，用于导入经过压缩的数据：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span># Export gzipped data from &lt;source-victoriametrics&gt;:
</span></span><span style="display:flex;"><span>curl -H &#39;Accept-Encoding: gzip&#39; http://source-victoriametrics:8428/api/v1/export -d &#39;match={__name__!=&#34;&#34;}&#39; &gt; exported_data.jsonl.gz
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># Import gzipped data to &lt;destination-victoriametrics&gt;:
</span></span><span style="display:flex;"><span>curl -X POST -H &#39;Content-Encoding: gzip&#39; http://destination-victoriametrics:8428/api/v1/import -T exported_data.jsonl.gz</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>可以通过传递<code>extra_label=name=value</code>查询参数，为所有导入的时间序列添加额外标签。例如，<code>/api/v1/import?extra_label=foo=bar</code>会将<code>&quot;foo&quot;:&quot;bar&quot;</code>标签添加到所有导入的时间序列中。</p>
<p>请注意，在导入历史数据后可能需要清除响应缓存。详细信息请参阅<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#backfilling" target="_blank" rel="noopener">相关文档</a>。</p>
<p>VictoriaMetrics逐行解析输入的JSON数据。它将整个JSON行加载到内存中，然后解析并将解析后的样本保存到持久存储中。这意味着当导入过长的JSON行时，VictoriaMetrics可能占用大量RAM。解决方法是将过长的JSON行拆分成较小的行。如果单个时间序列的样本被拆分在多个JSON行中也是可以接受的。</p>
<h4>如何导入原生二进制数据<span class="hx-absolute -hx-mt-20" id="如何导入原生二进制数据"></span>
    <a href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%85%a5%e5%8e%9f%e7%94%9f%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%95%b0%e6%8d%ae" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>VictoriaMetrics的本地格式规范可能会发生变化，并且尚未正式文档化。因此，我们目前不建议外部客户尝试将自己的指标打包成本地格式文件。</p>
<p>但是，如果您通过<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-export-data-in-native-format" target="_blank" rel="noopener">/api/v1/export/native</a>获取了一个本地格式文件，则这是导入数据最高效的协议。</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span># Export the data from &lt;source-victoriametrics&gt;:
</span></span><span style="display:flex;"><span>curl http://source-victoriametrics:8428/api/v1/export/native -d &#39;match={__name__!=&#34;&#34;}&#39; &gt; exported_data.bin
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># Import the data to &lt;destination-victoriametrics&gt;:
</span></span><span style="display:flex;"><span>curl -X POST http://destination-victoriametrics:8428/api/v1/import/native -T exported_data.bin</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>通过传递额外的查询参数 <code>extra_label=name=value</code>，可以为所有导入的时间序列添加额外的标签。例如，<code>/api/v1/import/native?extra_label=foo=bar</code> 将在所有导入的时间序列中添加 <code>&quot;foo&quot;:&quot;bar&quot;</code> 标签。</p>
<p>请注意，在导入历史数据后可能需要清除响应缓存。详细信息请参阅<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#backfilling" target="_blank" rel="noopener">这些文档</a>。</p>
<h4>如何导入 CSV 数据<span class="hx-absolute -hx-mt-20" id="如何导入-csv-数据"></span>
    <a href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%85%a5-csv-%e6%95%b0%e6%8d%ae" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>任意的CSV数据可以通过<code>/api/v1/import/csv</code>导入。CSV数据根据提供的格式查询参数进行导入。格式查询参数必须包含逗号分隔的解析规则列表，用于指定CSV字段的解析方式。每个规则由三部分组成，以冒号分隔：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>&lt;column_pos&gt;:&lt;type&gt;:&lt;context&gt;</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<ul>
<li><code>&lt;column_pos&gt;</code> CSV列（字段）的位置是什么。列编号从1开始。解析规则的顺序可能是任意的。</li>
<li><code>&lt;type&gt;</code> 描述列类型。支持的类型有：
<ul>
<li><code>metric</code> - 对应的CSV列在<code>&lt;column_pos&gt;</code>位置包含度量值，该值必须是整数或浮点数。度量名称从<code>&lt;context&gt;</code>中读取。CSV行至少必须有一个度量字段。每个CSV行可以有多个度量字段。</li>
<li><code>label</code> -对应的CSV列在<code>&lt;column_pos&gt;</code>位置包含标签值。标签名称从<code>&lt;context&gt;</code>中读取。CSV行可能有任意数量的标签字段。所有这些标签都附加到所有配置的指标上。</li>
<li><code>time</code> - 对应的CSV列在&lt;column_pos&gt;位置包含度量时间。CSV行可能包含一个或零个带有时间的列。如果CSV行没有时间，则使用当前时间。该时间适用于所有配置的指标。通过<code>&lt;context&gt;</code>来配置时间格式。支持的时间格式有：
<ul>
<li><code>unix_s</code> - unix 秒</li>
<li><code>unix_ms</code> - unix 毫秒</li>
<li><code>unix_ns</code> - unix 纳秒</li>
<li><code>rfc3339</code> - <a href="https://www.ietf.org/rfc/rfc3339.txt" target="_blank" rel="noopener">RFC3339</a> 格式时间</li>
<li><code>custom:&lt;layout&gt;</code> - 自定义时间格式，可由Go的<a href="https://golang.org/pkg/time/#Time.Format" target="_blank" rel="noopener">time.Format</a>函数支持。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>每个对<code>/api/v1/import/csv</code>的请求可能包含任意数量的CSV行。</p>
<p>通过 /api/v1/import/csv 导入 CSV 数据的示例：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>curl -d &#34;GOOG,1.23,4.56,NYSE&#34; &#39;http://localhost:8428/api/v1/import/csv?format=2:metric:ask,3:metric:bid,1:label:ticker,4:label:market&#39;
</span></span><span style="display:flex;"><span>curl -d &#34;MSFT,3.21,1.67,NASDAQ&#34; &#39;http://localhost:8428/api/v1/import/csv?format=2:metric:ask,3:metric:bid,1:label:ticker,4:label:market&#39;</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>之后，数据可以通过<code>/api/v1/export</code>端点进行读取：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>curl -G &#39;http://localhost:8428/api/v1/export&#39; -d &#39;match[]={ticker!=&#34;&#34;}&#39;</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>应该得到如下响应：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>{&#34;metric&#34;:{&#34;__name__&#34;:&#34;bid&#34;,&#34;market&#34;:&#34;NASDAQ&#34;,&#34;ticker&#34;:&#34;MSFT&#34;},&#34;values&#34;:[1.67],&#34;timestamps&#34;:[1583865146520]}
</span></span><span style="display:flex;"><span>{&#34;metric&#34;:{&#34;__name__&#34;:&#34;bid&#34;,&#34;market&#34;:&#34;NYSE&#34;,&#34;ticker&#34;:&#34;GOOG&#34;},&#34;values&#34;:[4.56],&#34;timestamps&#34;:[1583865146495]}
</span></span><span style="display:flex;"><span>{&#34;metric&#34;:{&#34;__name__&#34;:&#34;ask&#34;,&#34;market&#34;:&#34;NASDAQ&#34;,&#34;ticker&#34;:&#34;MSFT&#34;},&#34;values&#34;:[3.21],&#34;timestamps&#34;:[1583865146520]}
</span></span><span style="display:flex;"><span>{&#34;metric&#34;:{&#34;__name__&#34;:&#34;ask&#34;,&#34;market&#34;:&#34;NYSE&#34;,&#34;ticker&#34;:&#34;GOOG&#34;},&#34;values&#34;:[1.23],&#34;timestamps&#34;:[1583865146495]}</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>通过传递 <code>extra_label=name=value</code> 查询参数，可以为所有导入的行添加额外标签。例如，<code>/api/v1/import/csv?extra_label=foo=bar</code> 将在所有导入的行中添加 <code>&quot;foo&quot;:&quot;bar&quot;</code> 标签。</p>
<p>请注意，在导入历史数据后可能需要清除响应缓存。详细信息请参阅<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#backfilling" target="_blank" rel="noopener">这些文档</a>。</p>
<h3>如何导入 Prometheus Exporter 格式数据<span class="hx-absolute -hx-mt-20" id="如何导入-prometheus-exporter-格式数据"></span>
    <a href="#%e5%a6%82%e4%bd%95%e5%af%bc%e5%85%a5-prometheus-exporter-%e6%a0%bc%e5%bc%8f%e6%95%b0%e6%8d%ae" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics接受以<a href="https://github.com/prometheus/docs/blob/master/content/docs/instrumenting/exposition_formats.md#text-based-format" target="_blank" rel="noopener">Prometheus暴露格式</a>、<a href="https://github.com/OpenObservability/OpenMetrics/blob/master/specification/OpenMetrics.md" target="_blank" rel="noopener">OpenMetrics格式</a>和<a href="https://github.com/prometheus/pushgateway#url" target="_blank" rel="noopener">Pushgateway</a>格式的数据，通过<code>/api/v1/import/prometheus</code>路径进行传输。</p>
<p>例如，以下命令将以Prometheus导出格式的单行数据导入到VictoriaMetrics中：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>curl -d &#39;foo{bar=&#34;baz&#34;} 123&#39; -X POST &#39;http://localhost:8428/api/v1/import/prometheus&#39;</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>以下命令可用于验证导入的数据：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>curl -G &#39;http://localhost:8428/api/v1/export&#39; -d &#39;match={__name__=~&#34;foo&#34;}&#39;</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>应该返回类似以下的内容：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>{&#34;metric&#34;:{&#34;__name__&#34;:&#34;foo&#34;,&#34;bar&#34;:&#34;baz&#34;},&#34;values&#34;:[123],&#34;timestamps&#34;:[1594370496905]}</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>以下命令使用<a href="https://github.com/prometheus/pushgateway#url" target="_blank" rel="noopener">Pushgateway</a>格式导入带有<code>{job=&quot;my_app&quot;,instance=&quot;host123&quot;}</code>标签的单个指标：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>curl -d &#39;metric{label=&#34;abc&#34;} 123&#39; -X POST &#39;http://localhost:8428/api/v1/import/prometheus/metrics/job/my_app/instance/host123&#39;</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>将 <code>Content-Encoding: gzip</code> 的 HTTP 请求头传递给 <code>/api/v1/import/prometheus</code> 以导入经过gzip压缩的数据：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span># Import gzipped data to &lt;destination-victoriametrics&gt;:
</span></span><span style="display:flex;"><span>curl -X POST -H &#39;Content-Encoding: gzip&#39; http://destination-victoriametrics:8428/api/v1/import/prometheus -T prometheus_data.gz</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>可以通过<a href="https://github.com/prometheus/pushgateway#url" target="_blank" rel="noopener">Pushgateway格式</a>或通过传递<code>extra_label=name=value</code>查询参数向所有导入的指标添加额外的标签。例如，<code>/api/v1/import/prometheus?extra_label=foo=bar</code>将在所有导入的指标中添加<code>{foo=&quot;bar&quot;}</code>标签。</p>
<p>如果在Prometheus暴露格式行中缺少<code>&lt;metric&gt; &lt;value&gt; &lt;timestamp&gt;</code>时间戳，则在数据摄取过程中使用当前时间戳。可以通过传递以毫秒为单位的Unix时间戳来覆盖它，例如，<code>/api/v1/import/prometheus?timestamp=1594370496905</code>。</p>
<p>VictoriaMetrics接受单个请求中任意数量的行到<code>/api/v1/import/prometheus</code>，即支持数据流式传输。</p>
<p>请注意，在导入历史数据后可能需要刷新响应缓存。有关详细信息，请参阅<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#backfilling" target="_blank" rel="noopener">这些文档</a>。</p>
<p>VictoriaMetrics还可以抓取Prometheus目标-请参阅<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-scrape-prometheus-exporters-such-as-node-exporter" target="_blank" rel="noopener">这些文档</a>。</p>
<h2>高级特性<span class="hx-absolute -hx-mt-20" id="高级特性"></span>
    <a href="#%e9%ab%98%e7%ba%a7%e7%89%b9%e6%80%a7" class="subheading-anchor" aria-label="Permalink for this section"></a></h2><h3>Relabeling<span class="hx-absolute -hx-mt-20" id="relabeling"></span>
    <a href="#relabeling" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics支持对所有接收到的指标进行与Prometheus兼容的重标签处理，只需使用<code>-relabelConfig</code>命令行参数指定一个包含<code>relabel_config</code>条目列表的文件即可。<code>-relabelConfig</code>也可以指向http或https URL。例如，<code>-relabelConfig=https://config-server/relabel_config.yml</code>。</p>
<p>以下文档可能对理解重标签处理有所帮助：</p>
<ul>
<li><a href="https://docs.victoriametrics.com/relabeling.html" target="_blank" rel="noopener">Cookbook for common relabeling tasks</a>.</li>
<li><a href="https://valyala.medium.com/how-to-use-relabeling-in-prometheus-and-victoriametrics-8b90fc22c4b2" target="_blank" rel="noopener">Relabeling tips and tricks</a>.</li>
</ul>
<p><code>-relabelConfig</code>文件中可以包含特殊的占位符，形式为<code>%{ENV_VAR}</code>，它们将被相应的环境变量值替换。</p>
<p><code>-relabelConfig</code>文件示例内容：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span># Add {cluster=&#34;dev&#34;} label.
</span></span><span style="display:flex;"><span>- target_label: cluster
</span></span><span style="display:flex;"><span>  replacement: dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># Drop the metric (or scrape target) with `{__meta_kubernetes_pod_container_init=&#34;true&#34;}` label.
</span></span><span style="display:flex;"><span>- action: drop
</span></span><span style="display:flex;"><span>  source_labels: [__meta_kubernetes_pod_container_init]
</span></span><span style="display:flex;"><span>  regex: true</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>VictoriaMetrics提供了额外的重标签功能，例如Graphite风格的重标签。有关更多详细信息，请参阅<a href="https://docs.victoriametrics.com/vmagent.html#relabeling" target="_blank" rel="noopener">这些文档</a>。</p>
<p>可以在http://victoriametrics:8428/metric-relabel-debug页面或我们的<a href="https://play.victoriametrics.com/select/accounting/1/6a716b0f-38bc-4856-90ce-448fd713e3fe/prometheus/graph/#/relabeling" target="_blank" rel="noopener">公共游乐场</a>上调试重标签。有关更多详细信息，请参阅<a href="https://docs.victoriametrics.com/vmagent.html#relabel-debug" target="_blank" rel="noopener">这些文档</a>。</p>
<h3>Cache removal<span class="hx-absolute -hx-mt-20" id="cache-removal"></span>
    <a href="#cache-removal" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics使用各种内部缓存。这些缓存在优雅关闭时（例如通过发送<code>SIGINT</code>信号停止VictoriaMetrics）被存储到<code>&lt;-storageDataPath&gt;/cache</code>目录中。下次启动VictoriaMetrics时会读取这些缓存。有时需要在下次启动时删除此类缓存。可以通过以下方式完成：</p>
<ul>
<li>通过在 VictoriaMetrics 停止时手动删除 <code>&lt;-storageDataPath&gt;/cache</code> 目录。</li>
<li>通过在重新启动VictoriaMetrics之前将<code>reset_cache_on_startup</code>文件放置在<code>&lt;-storageDataPath&gt;/cache</code>目录中。 在这种情况下，VictoriaMetrics将自动在下次启动时删除所有缓存。 有关详细信息，请参阅此<a href="https://github.com/VictoriaMetrics/VictoriaMetrics/issues/1447" target="_blank" rel="noopener">issue</a>。</li>
</ul>
<h3>Cache tuning<span class="hx-absolute -hx-mt-20" id="cache-tuning"></span>
    <a href="#cache-tuning" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics使用各种内存缓存来加快数据摄取和查询性能。每种类型的缓存都在/metrics路径下暴露以下指标。</p>
<ul>
<li><code>vm_cache_size_bytes</code> - 实际的 cache 大小</li>
<li><code>vm_cache_size_max_bytes</code> - cache 最大限制 limit</li>
<li><code>vm_cache_requests_total</code> - cache 的请求数</li>
<li><code>vm_cache_misses_total</code> - cache miss 的数量</li>
<li><code>vm_cache_entries</code> - cache 中的实体数</li>
</ul>
<p>单节点VictoriaMetrics和集群VictoriaMetrics的Grafana仪表板都包含了缓存部分，其中展示了缓存指标的可视化。面板显示了每种类型缓存的当前内存使用情况，以及缓存命中率。如果命中率接近100%，则表示缓存效率已经非常高，不需要进行任何调整。在故障排除部分的面板&quot;<code>Cache usage %</code>&ldquo;显示了按类型使用的缓存大小与允许大小之间的百分比。如果百分比低于100%，则无需进一步调整。</p>
<p>请注意，默认缓存大小已根据最实际的场景和工作负载进行了精心调整。只有在您理解其影响并且vmstorage具有足够空闲内存来容纳新的缓存大小时才更改默认值。</p>
<p>要覆盖默认值，请参阅带有<code>-storage.cacheSize</code>前缀的命令行标志。可以在<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#list-of-command-line-flags" target="_blank" rel="noopener">此处</a>查看所有标志的完整描述。</p>
<h3>补数据<span class="hx-absolute -hx-mt-20" id="补数据"></span>
    <a href="#%e8%a1%a5%e6%95%b0%e6%8d%ae" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics通过<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-import-time-series-data" target="_blank" rel="noopener">任何支持的摄取方法</a>以任意时间顺序接受历史数据。请参阅<a href="https://docs.victoriametrics.com/vmalert.html#rules-backfilling" target="_blank" rel="noopener">如何使用vmalert中的记录规则回填数据</a>。确保配置的<code>-retentionPeriod</code>覆盖了回填数据的时间戳。</p>
<p>建议在写入过去时间戳的历史数据时，使用<code>-search.disableCache</code>命令行标志禁用查询缓存，因为缓存假设数据是使用当前时间戳编写的。可以在回填完成后启用查询缓存。</p>
<p>另一种解决方案是在回填完成后查询<a href="https://docs.victoriametrics.com/url-examples.html#internalresetRollupResultCache" target="_blank" rel="noopener">/internal/resetRollupResultCache</a>处理程序。这将重置查询缓存，其中可能包含在回填期间缓存的不完整数据。</p>
<p>还有一种解决方案是增加<code>-search.cacheTimestampOffset</code>标志值，以禁用与当前时间接近的时间戳数据的缓存。单节点VictoriaMetrics会自动在其上摄取早于<code>now - search.cacheTimestampOffset</code> 的样本时重置响应缓存。</p>
<h3>数据更新<span class="hx-absolute -hx-mt-20" id="数据更新"></span>
    <a href="#%e6%95%b0%e6%8d%ae%e6%9b%b4%e6%96%b0" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics不支持将已存在的样本值更新为新值。它会将所有被摄取的数据点存储在具有相同时间戳的同一时间序列中。虽然可以通过<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-delete-time-series" target="_blank" rel="noopener">删除旧时间序列</a>并<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#backfilling" target="_blank" rel="noopener">写入新时间序列</a>来替换旧时间序列，但这种方法只适用于一次性更新。由于与数据删除相关的非零开销，不应频繁使用此方法进行更新。</p>
<h3>备份<span class="hx-absolute -hx-mt-20" id="备份"></span>
    <a href="#%e5%a4%87%e4%bb%bd" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics 支持使用 <a href="https://docs.victoriametrics.com/vmbackup.html" target="_blank" rel="noopener">vmbackup</a> and <a href="https://docs.victoriametrics.com/vmrestore.html" target="_blank" rel="noopener">vmrestore</a> 工具执行备份和恢复。</p>
<h3>去重特性<span class="hx-absolute -hx-mt-20" id="去重特性"></span>
    <a href="#%e5%8e%bb%e9%87%8d%e7%89%b9%e6%80%a7" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics每个时间序列在每个<code>-dedup.minScrapeInterval</code>离散间隔内只保留一个具有最大时间戳的原始样本，如果<code>-dedup.minScrapeInterval</code>设置为正持续时间。例如，<code>-dedup.minScrapeInterval=60s</code>将在每个离散的60秒间隔内保留一个具有最大时间戳的原始样本。这与<a href="https://prometheus.io/docs/prometheus/latest/querying/basics/#staleness" target="_blank" rel="noopener">Prometheus中的过期规则</a>相一致。</p>
<p>如果给定的<code>-dedup.minScrapeInterval</code>离散间隔上有多个具有相同时间戳的原始样本，则保留值最大的样本。</p>
<p>请注意，要进行去重操作，原始样本的标签必须完全相同。例如，这就是为什么<a href="https://docs.victoriametrics.com/vmagent.html#high-availability" target="_blank" rel="noopener">vmagents HA</a>对需要配置完全相同。</p>
<p>如果启用了降采样功能，则<code>-dedup.minScrapeInterval=D</code>等效于<code>-downsampling.period=0s:D</code>。因此可以同时使用去重和<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#downsampling" target="_blank" rel="noopener">降采样</a>而不会出现问题。</p>
<p>建议将 <code>-dedup.minScrapeInterval</code> 的推荐值设置为 Prometheus 配置文件中 <code>scrape_interval</code> 的值。建议所有抓取目标都使用统一的抓取间隔，请参阅详细信息<a href="https://www.robustperception.io/keep-it-simple-scrape_interval-id" target="_blank" rel="noopener">文章</a>。</p>
<p>通过去重操作可以减少磁盘空间占用量，特别是当多个配置完全相同的 vmagent 或 Prometheus 实例以 HA 对形式写入数据到同一个 VictoriaMetrics 实例时更加有效。这些 vmagent 或 Prometheus 实例必须在其配置文件中具有相同的<code>external_labels</code> 部分，以便将数据写入同一个时间序列。另请参阅<a href="https://docs.victoriametrics.com/vmagent.html#scraping-big-number-of-targets" target="_blank" rel="noopener">如何设置多个 vmagent 实例来抓取相同目标</a>。</p>
<p>建议为每个不同的 vmagent HA 对实例传递不同的 <code>-promscrape.cluster.name </code>值，这样去重操作就会一致地保留一个 vmagent 实例的样本，并从其他 <code>vmagent</code> 实例中删除重复样本。请参阅<a href="https://docs.victoriametrics.com/vmagent.html#high-availability" target="_blank" rel="noopener">详细文档</a>了解更多信息。</p>
<h3>Storage<span class="hx-absolute -hx-mt-20" id="storage"></span>
    <a href="#storage" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics将接收的数据缓存在内存中，最多一秒钟。然后将缓冲的数据写入内存部分，在查询期间可以进行搜索。这些in-memory <code>part</code>定期持久化到磁盘上，以便在发生不正常关闭（如内存崩溃、硬件断电或<code>SIGKILL</code>信号）时能够恢复。刷新内存数据到磁盘的时间间隔可以通过<code>-inmemoryDataFlushInterval</code>命令行标志进行配置（请注意，过短的刷新间隔可能会显著增加磁盘IO）。</p>
<p>将内存部分持久化到磁盘时，它们被保存在<code>&lt;-storageDataPath&gt;/data/small/YYYY_MM/</code>文件夹下的<code>part</code>目录中，其中<code>YYYY_MM</code>是所保存数据的月份分区。例如，<code>2022_11</code>是包含来<code>自2022年11月</code><a href="https://docs.victoriametrics.com/keyConcepts.html#raw-samples" target="_blank" rel="noopener">原始样本</a>的部分所属的分区。每个分区目录都包含一个<code>parts.json</code>文件，其中列出了该分区中实际存在的部分。</p>
<p>每个 <code>part</code> 目录还包含一个<code>metadata.json</code>文件，其中包含以下字段：</p>
<ul>
<li><code>RowsCount</code> - 存储在零件中的原始样本数量。</li>
<li><code>BlocksCount</code> - 存储在该部分中的块数量（有关块的详细信息请参见下文）。</li>
<li><code>MinTimestamp</code>和<code>MaxTimestamp</code> - 存储在该部分中原始样本的最小和最大时间戳。</li>
<li><code>MinTimestamp</code> and <code>MaxTimestamp</code> - minimum and maximum timestamps across raw samples stored in the part</li>
<li><code>MinDedupInterval</code> - 给定部分应用的<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#deduplication" target="_blank" rel="noopener">去重间隔</a>。</li>
</ul>
<p>每个 part 由按内部时间序列ID（也称为<code>TSID</code>）排序的 <code>block</code> 组成。每个 <code>block</code> 包含最多<code>8K</code>个原始样本，这些样本属于单个时间序列。每个 <code>block</code> 中的原始样本按照时间戳进行排序。同一时间序列的块按第一个样本的时间戳进行排序。所有块的时间戳和值以<a href="https://faun.pub/victoriametrics-achieving-better-compression-for-time-series-data-than-gorilla-317bc1f95932" target="_blank" rel="noopener">压缩形式</a>存储在 <code>part</code> 目录下的单独文件中 - <code>timestamps.bin</code>和<code>values.bin</code>。</p>
<p><code>part</code> 目录还包含<code>index.bin</code>和<code>metaindex.bin</code>文件 - 这些文件包含了快速块查找的索引，这些块属于给定的<code>TSID</code>并覆盖给定的时间范围。</p>
<p>部分会周期性地在后台合并成更大的part。后台合并提供以下好处：</p>
<ul>
<li>保持数据文件数量在控制范围内，以免超过打开文件的限制。</li>
<li>改进的数据压缩，因为通常较大的部分比较小的部分更容易被压缩。</li>
<li>查询速度提升了，因为对较少部分的查询执行更快。</li>
<li>各种后台维护任务都是在合并过程中发生的，比如<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#deduplication" target="_blank" rel="noopener">de-duplication</a>, <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#downsampling" target="_blank" rel="noopener">downsampling</a> and <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-delete-time-series" target="_blank" rel="noopener">freeing up disk space for the deleted time series</a></li>
</ul>
<p>新添加的 part 要么成功出现在存储中，要么无法出现。新添加的 part 在完全写入并通过<a href="https://man7.org/linux/man-pages/man2/fsync.2.html" target="_blank" rel="noopener">fsync</a>同步到存储后，会自动注册到相应分区下的<code>parts.json</code>文件中。由于这个算法，即使在将part写入磁盘过程中发生硬件断电，在下一次VictoriaMetrics启动时也会自动删除这些未完全写入的部分，因此存储永远不会包含部分创建的part。</p>
<p>合并过程也是如此——parts 要么完全合并为一个新的部分，要么无法合并，使得源部分保持不变。然而，由于硬件问题，在VictoriaMetrics处理过程中可能会导致磁盘上的数据损坏。VictoriaMetrics可以在解压缩、解码或对数据块进行健康检查时检测到损坏。但它无法修复已损坏的数据。启动时加载失败的数据部分需要被删除或从备份中恢复。因此建议<a href="https://docs.victoriametrics.com/Cluster-VictoriaMetrics.html#backups" target="_blank" rel="noopener">定期进行备份</a>操作。</p>
<p>VictoriaMetrics在存储数据块时不使用校验和。请<a href="https://github.com/VictoriaMetrics/VictoriaMetrics/issues/3011" target="_blank" rel="noopener">点击此处</a>了解原因。</p>
<p>VictoriaMetrics在合并部分时，如果它们的摘要大小超过了可用磁盘空间，则不会进行合并。这样可以防止在合并过程中出现磁盘空间不足的错误。在磁盘空间紧缺的情况下，部分数量可能会显著增加。这会增加数据查询时的开销，因为VictoriaMetrics需要从更多的部分中读取数据来处理每个请求。因此建议使用<code>-storageDataPath</code>命令行标志指定的目录下至少保留20% 的可用磁盘空间。</p>
<p>关于合并的处理过程可以参见 <a href="https://grafana.com/grafana/dashboards/10229-victoriametrics/" target="_blank" rel="noopener">the dashboard for single-node VictoriaMetrics</a> 和 <a href="https://grafana.com/grafana/dashboards/11176-victoriametrics-cluster/" target="_blank" rel="noopener">the dashboard for VictoriaMetrics cluster</a>. 更多详情参见<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#monitoring" target="_blank" rel="noopener">监控文档</a>.</p>
<p>更多详情可阅读 <a href="https://valyala.medium.com/how-victoriametrics-makes-instant-snapshots-for-multi-terabyte-time-series-data-e1f3fb0e0282" target="_blank" rel="noopener">这篇文章</a>，也可以阅读 <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#how-to-work-with-snapshots" target="_blank" rel="noopener">how to work with snapshots</a>.</p>
<h3>多租户<span class="hx-absolute -hx-mt-20" id="多租户"></span>
    <a href="#%e5%a4%9a%e7%a7%9f%e6%88%b7" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>单节点的VictoriaMetrics不支持多租户。请使用<a href="https://docs.victoriametrics.com/Cluster-VictoriaMetrics.html#multitenancy" target="_blank" rel="noopener">集群版本</a>。</p>
<h3>多副本<span class="hx-absolute -hx-mt-20" id="多副本"></span>
    <a href="#%e5%a4%9a%e5%89%af%e6%9c%ac" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>单节点的VictoriaMetrics不支持应用级别的复制。请使用集群版本代替。详细信息请参阅<a href="https://docs.victoriametrics.com/Cluster-VictoriaMetrics.html#replication-and-data-safety" target="_blank" rel="noopener">这些文档</a>。</p>
<p>存储级别的复制可以转移到持久性存储，如<a href="https://cloud.google.com/compute/docs/disks#pdspecs" target="_blank" rel="noopener">Google Cloud磁盘</a>。</p>
<p>还可以查看<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#high-availability" target="_blank" rel="noopener">高可用性文档</a>和<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#backups" target="_blank" rel="noopener">备份文档</a>。</p>
<h3>可扩展和集群版本<span class="hx-absolute -hx-mt-20" id="可扩展和集群版本"></span>
    <a href="#%e5%8f%af%e6%89%a9%e5%b1%95%e5%92%8c%e9%9b%86%e7%be%a4%e7%89%88%e6%9c%ac" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>尽管单节点的VictoriaMetrics无法扩展到多个节点，但它在资源使用方面进行了优化 - 存储大小/带宽/IOPS、RAM和CPU。这意味着一个单节点的VictoriaMetrics可以在垂直方向上扩展，并替代使用竞争解决方案（如Thanos、Uber M3、InfluxDB或TimescaleDB）构建的中等规模集群。请参阅垂直可伸缩性<a href="https://medium.com/@valyala/measuring-vertical-scalability-for-time-series-databases-in-google-cloud-92550d78d8ae" target="_blank" rel="noopener">基准测试结果</a>。</p>
<p>首先尝试使用单节点的VictoriaMetrics，如果您仍然需要针对大型Prometheus部署进行横向扩展的长期远程存储，则可以切换到<a href="https://github.com/VictoriaMetrics/VictoriaMetrics/tree/cluster" target="_blank" rel="noopener">集群版本</a>。</p>
<h3>基数限制<span class="hx-absolute -hx-mt-20" id="基数限制"></span>
    <a href="#%e5%9f%ba%e6%95%b0%e9%99%90%e5%88%b6" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>默认情况下，VictoriaMetrics不限制存储的时间序列数量。可以通过设置以下命令行标志来强制执行限制：</p>
<ul>
<li><code>-storage.maxHourlySeries</code> - 限制了在最后一个小时内可以添加的时间序列数量。对于限制<a href="https://docs.victoriametrics.com/FAQ.html#what-is-an-active-time-series" target="_blank" rel="noopener">活动时间序列</a>的数量非常有用。</li>
<li><code>-storage.maxDailySeries</code> - 限制了最后一天可以添加的时间序列数量。对于限制每日<a href="https://docs.victoriametrics.com/FAQ.html#what-is-high-churn-rate" target="_blank" rel="noopener">流失率</a>非常有用。</li>
</ul>
<p>同时可以设置这两个限制。如果达到任何一个限制，那么新时间序列的输入样本将被丢弃。被丢弃的系列样本会以警告级别记录在日志中。</p>
<p>超出限制的情况可以通过以下指标进行监控：</p>
<ul>
<li><code>vm_hourly_series_limit_rows_dropped_total</code> - 由于超过每小时限制的唯一时间序列数量，指标数量减少了。</li>
<li><code>vm_hourly_series_limit_max_series</code> - 每小时系列限制通过<code>-storage.maxHourlySeries</code>命令行参数设置。</li>
</ul>
<p><code>vm_hourly_series_limit_current_series</code> - 过去一小时内独特系列的当前数量。当过去一小时内独特系列的数量超过 <code>-storage.maxHourlySeries</code> 的90%时，以下查询可能会有用于警报：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>vm_hourly_series_limit_current_series / vm_hourly_series_limit_max_series &gt; 0.9</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<ul>
<li><code>vm_daily_series_limit_rows_dropped_total</code> - 由于超过每日唯一时间序列数量限制，指标数量下降。</li>
<li><code>vm_daily_series_limit_max_series</code> - 每日系列限制是通过<code>-storage.maxDailySeries</code>命令行标志设置的。</li>
</ul>
<p><code>vm_daily_series_limit_current_series</code> - 在过去的一天中，唯一系列的当前数量。当唯一系列在过去的一天内超过 <code>-storage.maxDailySeries</code> 的90%时，以下查询可能会有用于警报：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>vm_daily_series_limit_current_series / vm_daily_series_limit_max_series &gt; 0.9</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>这些限制是近似值，所以VictoriaMetrics可以在限制范围内溢出/下溢一个小百分比（通常小于1%）。</p>
<p>更多进阶内容参见 <a href="https://docs.victoriametrics.com/vmagent.html#cardinality-limiter" target="_blank" rel="noopener">cardinality limiter in vmagent</a> and <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#cardinality-explorer" target="_blank" rel="noopener">cardinality explorer docs</a>.</p>
<h3>TSDB状态<span class="hx-absolute -hx-mt-20" id="tsdb状态"></span>
    <a href="#tsdb%e7%8a%b6%e6%80%81" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics在<code>/api/v1/status/tsdb</code>页面以类似Prometheus的方式返回TSDB统计信息-请参阅这些<a href="https://prometheus.io/docs/prometheus/latest/querying/api/#tsdb-stats" target="_blank" rel="noopener">Prometheus文档</a>。VictoriaMetrics在<code>/api/v1/status/tsdb</code>页面接受以下可选查询参数：</p>
<ul>
<li><code>topN=N</code>表示在响应中返回的前<code>N</code>个顶级条目数量。默认情况下，返回前10个条目。</li>
<li><code>date=YYYY-MM-DD</code> 是收集统计数据的日期，其中 <code>YYYY-MM-DD</code> 代表具体的日期。默认情况下，统计数据是针对当天进行收集的。如果要跨所有日期收集全局统计数据，请传递 <code>date=1970-01-01</code>。</li>
<li><code>focusLabel=LABEL_NAME</code>在<code>seriesCountByFocusLabelValue</code>列表中返回具有最高时间序列数量的给定<code>LABEL_NAME</code>的标签值。</li>
<li><code>match[]=SELECTOR</code> where <code>SELECTOR</code> is an arbitrary <a href="https://prometheus.io/docs/prometheus/latest/querying/basics/#time-series-selectors" target="_blank" rel="noopener">time series selector</a> for series to take into account during stats calculation. By default all the series are taken into account.</li>
<li><code>match[]=SELECTOR</code> 是一个任意的<a href="https://prometheus.io/docs/prometheus/latest/querying/basics/#time-series-selectors" target="_blank" rel="noopener">时间序列选择器</a>，用于在统计计算中考虑的系列。默认情况下，所有系列都会被纳入考虑范围内。</li>
<li><code>extra_label=LABEL=VALUE</code>. 更多信息参见 <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#prometheus-querying-api-enhancements" target="_blank" rel="noopener">这些文档</a>。</li>
</ul>
<p>在<a href="https://docs.victoriametrics.com/Cluster-VictoriaMetrics.html" target="_blank" rel="noopener">VictoriaMetrics的集群版本</a>中，每个vmstorage都会单独跟踪存储的时间序列。vmselect通过从每个vmstorage节点请求<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#tsdb-stats" target="_blank" rel="noopener">/api/v1/status/tsdb</a> API来获取统计信息，并通过对每个系列的统计数据进行求和来合并结果。当相同时间序列的样本分布在多个vmstorage节点上时，可能会导致值被夸大，这是由于<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#replication" target="_blank" rel="noopener">复制</a>或<a href="https://docs.victoriametrics.com/Cluster-VictoriaMetrics.html?highlight=re-routes#cluster-availability" target="_blank" rel="noopener">重定向</a>造成的。</p>
<p>VictoriaMetrics <code>/api/v1/status/tsdb</code> 之上提供了-UI支持，具体参见 <a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#cardinality-explorer" target="_blank" rel="noopener">cardinality explorer docs</a>.</p>
<h3>Query 追踪<span class="hx-absolute -hx-mt-20" id="query-追踪"></span>
    <a href="#query-%e8%bf%bd%e8%b8%aa" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics支持查询追踪，可用于确定查询处理过程中的瓶颈。这类似于Postgresql的<code>EXPLAIN ANALYZE</code>。</p>
<p>可以通过传递trace=1查询参数来启用特定查询的查询追踪。在这种情况下，VictoriaMetrics将查询跟踪放入输出JSON的trace字段中。</p>
<p>例如，以下命令：</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>curl http://localhost:8428/api/v1/query_range -d &#39;query=2*rand()&#39; -d &#39;start=-1h&#39; -d &#39;step=1m&#39; -d &#39;trace=1&#39; | jq &#39;.trace&#39;</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>会返回下面的 trace 信息:</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  &#34;duration_msec&#34;: 0.099,
</span></span><span style="display:flex;"><span>  &#34;message&#34;: &#34;/api/v1/query_range: start=1654034340000, end=1654037880000, step=60000, query=\&#34;2*rand()\&#34;: series=1&#34;,
</span></span><span style="display:flex;"><span>  &#34;children&#34;: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      &#34;duration_msec&#34;: 0.034,
</span></span><span style="display:flex;"><span>      &#34;message&#34;: &#34;eval: query=2 * rand(), timeRange=[1654034340000..1654037880000], step=60000, mayCache=true: series=1, points=60, pointsPerSeries=60&#34;,
</span></span><span style="display:flex;"><span>      &#34;children&#34;: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          &#34;duration_msec&#34;: 0.032,
</span></span><span style="display:flex;"><span>          &#34;message&#34;: &#34;binary op \&#34;*\&#34;: series=1&#34;,
</span></span><span style="display:flex;"><span>          &#34;children&#34;: [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>              &#34;duration_msec&#34;: 0.009,
</span></span><span style="display:flex;"><span>              &#34;message&#34;: &#34;eval: query=2, timeRange=[1654034340000..1654037880000], step=60000, mayCache=true: series=1, points=60, pointsPerSeries=60&#34;
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>              &#34;duration_msec&#34;: 0.017,
</span></span><span style="display:flex;"><span>              &#34;message&#34;: &#34;eval: query=rand(), timeRange=[1654034340000..1654037880000], step=60000, mayCache=true: series=1, points=60, pointsPerSeries=60&#34;,
</span></span><span style="display:flex;"><span>              &#34;children&#34;: [
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                  &#34;duration_msec&#34;: 0.015,
</span></span><span style="display:flex;"><span>                  &#34;message&#34;: &#34;transform rand(): series=1&#34;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>              ]
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          ]
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      &#34;duration_msec&#34;: 0.004,
</span></span><span style="display:flex;"><span>      &#34;message&#34;: &#34;sort series by metric name and labels&#34;
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      &#34;duration_msec&#34;: 0.044,
</span></span><span style="display:flex;"><span>      &#34;message&#34;: &#34;generate /api/v1/query_range response for series=1, points=60&#34;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>所有跟踪中的持续时间和时间戳都以毫秒为单位。</p>
<p>查询跟踪默认是允许的。可以通过在VictoriaMetrics上传递<code>-denyQueryTracing</code>命令行标志来禁止它。</p>
<p><a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#vmui" target="_blank" rel="noopener">VMUI</a> 提供了一个 UI 界面:</p>
<ul>
<li>对于 query 追踪 - 只需要选中 <code>Trace query</code> 复选框，然后重新跑一下查询语句就可以得到执行 Trace。</li>
<li>对于探索自定义追踪 - 进入 <code>Trace analyzer</code> 页面，然后上传或粘贴 trace 的 JSON 数据信息。</li>
</ul>
<h3>安全<span class="hx-absolute -hx-mt-20" id="安全"></span>
    <a href="#%e5%ae%89%e5%85%a8" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>一般安全建议：</p>
<ul>
<li>所有的VictoriaMetrics组件必须在受保护的私有网络中运行，不能直接从不可信任的网络（如互联网）访问。例外情况是<a href="https://docs.victoriametrics.com/vmauth.html" target="_blank" rel="noopener">vmauth</a>和<a href="https://docs.victoriametrics.com/vmgateway.html" target="_blank" rel="noopener">vmgateway</a>。</li>
<li>来自不可信任网络到达VictoriaMetrics组件的所有请求都必须通过认证代理（例如vmauth或vmgateway）进行。代理必须设置适当的身份验证和授权。</li>
<li>在配置位于VictoriaMetrics组件前面的认证代理时，最好使用允许API端点列表，并禁止对其他端点进行访问。</li>
</ul>
<p>VictoriaMetrics 提供了下面这些安全相关的命令行参数：</p>
<ul>
<li><code>-tls</code>, <code>-tlsCertFile</code> and <code>-tlsKeyFile</code> 用来开启 HTTPS.</li>
<li><code>-httpAuth.username</code> and <code>-httpAuth.password</code> 使用 <a href="https://en.wikipedia.org/wiki/Basic_access_authentication" target="_blank" rel="noopener">HTTP Basic Authentication</a> 来保护所有的 HTTP 接口。</li>
<li><code>-deleteAuthKey</code> 用来保护 <code>/api/v1/admin/tsdb/delete_series</code> 接口。参见 <a href="https://docs.victoriametrics.com/#how-to-delete-time-series" target="_blank" rel="noopener">how to delete time series</a>.</li>
<li><code>-snapshotAuthKey</code> 用来保护 <code>/snapshot*</code> 一系列接口。参见 <a href="https://docs.victoriametrics.com/#how-to-work-with-snapshots" target="_blank" rel="noopener">how to work with snapshots</a>.</li>
<li><code>-forceMergeAuthKey</code> 用来保护 <code>/internal/force_merge</code> 接口。参见 <a href="https://docs.victoriametrics.com/#forced-merge" target="_blank" rel="noopener">force merge docs</a>.</li>
<li><code>-search.resetCacheAuthKey</code> 用来保护 <code>/internal/resetRollupResultCache</code> 接口。 更多详情参见 <a href="https://docs.victoriametrics.com/#backfilling" target="_blank" rel="noopener">backfilling</a>。</li>
<li><code>-configAuthKey</code> 用来保护 <code>/config</code> 接口，因为它可能包含一些敏感的信息，比如密码。</li>
<li><code>-flagsAuthKey</code> 用来保护 <code>/flags</code> 接口。</li>
<li><code>-pprofAuthKey</code> 用来保护 <code>/debug/pprof/*</code> 接口，这是用来做性能分析的 <a href="https://docs.victoriametrics.com/#profiling" target="_blank" rel="noopener">profiling</a>。</li>
<li><code>-denyQueryTracing</code> 用来禁用 <a href="https://docs.victoriametrics.com/#query-tracing" target="_blank" rel="noopener">query tracing</a>.</li>
</ul>
<p>Explicitly set internal network interface for TCP and UDP ports for data ingestion with Graphite and OpenTSDB formats. For example, substitute <code>-graphiteListenAddr=:2003</code> with <code>-graphiteListenAddr=&lt;internal_iface_ip&gt;:2003</code>. This protects from unexpected requests from untrusted network interfaces.</p>
<p>明确设置用于使用Graphite和OpenTSDB格式进行数据摄取的TCP和UDP端口的内部网络接口。例如，将<code>-graphiteListenAddr=:2003</code>替换为<code>-graphiteListenAddr=&lt;internal_iface_ip&gt;:2003</code>。这样可以防止来自不受信任的网络接口的意外请求。</p>
<p>参见 <a href="https://docs.victoriametrics.com/Cluster-VictoriaMetrics.html#security" target="_blank" rel="noopener">security recommendation for VictoriaMetrics cluster</a> and <a href="https://victoriametrics.com/security/" target="_blank" rel="noopener">the general security page at VictoriaMetrics website</a>.</p>
<h2>其他<span class="hx-absolute -hx-mt-20" id="其他"></span>
    <a href="#%e5%85%b6%e4%bb%96" class="subheading-anchor" aria-label="Permalink for this section"></a></h2><h3>压测<span class="hx-absolute -hx-mt-20" id="压测"></span>
    <a href="#%e5%8e%8b%e6%b5%8b" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>请注意，供应商（包括VictoriaMetrics在内）在进行此类测试时往往存在偏见。例如，他们会试图突出自己产品的优点，同时强调竞争产品的缺点。因此，我们鼓励用户和所有独立第三方对他们正在评估的各种产品进行生产环境下的基准测试，并公布结果。</p>
<p>作为参考，请查看VictoriaMetrics团队进行的<a href="https://docs.victoriametrics.com/Articles.html#benchmarks" target="_blank" rel="noopener">基准测试</a>。还请查看使用node_exporter指标运行摄取基准测试的<a href="https://github.com/VictoriaMetrics/benchmark" target="_blank" rel="noopener">helm chart</a>。</p>
<h3>Profiling<span class="hx-absolute -hx-mt-20" id="profiling"></span>
    <a href="#profiling" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>VictoriaMetrics提供了用于收集以下 <a href="https://blog.golang.org/profiling-go-programs" target="_blank" rel="noopener">Go profiles</a> 内容的处理程序 :</p>
<ul>
<li>内存配置文件。可以使用以下命令收集（如有需要，请将0.0.0.0替换为主机名）：</li>
</ul>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>curl http://0.0.0.0:8428/debug/pprof/heap &gt; mem.pprof</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<ul>
<li>CPU配置文件。可以使用以下命令收集（如有需要，请将0.0.0.0替换为主机名）：</li>
</ul>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>curl http://0.0.0.0:8428/debug/pprof/profile &gt; cpu.pprof</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>
<p>收集 CPU 个人资料的命令会在等待 30 秒后返回。 可以使用 <a href="https://github.com/google/pprof" target="_blank" rel="noopener">go tool pprof</a> 分析收集到的个人资料。从安全角度来看，共享这些收集到的个人资料是安全的，因为它们不包含敏感信息。</p>
<h3>常见问题建议<span class="hx-absolute -hx-mt-20" id="常见问题建议"></span>
    <a href="#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e5%bb%ba%e8%ae%ae" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><ul>
<li>建议在不需要调整标志值的情况下使用默认命令行标志值（即不要显式设置它们）。</li>
<li>建议在故障排除过程中检查日志，因为它们可能包含有用的信息。</li>
<li>建议从此页面升级到最新可用版本，因为遇到的问题可能已经在那里修复了。</li>
<li>建议至少保留50%的CPU、磁盘IO和RAM资源作为备用，这样VictoriaMetrics就可以处理工作负载中的短暂峰值而无性能问题。</li>
<li>VictoriaMetrics需要空闲磁盘空间将数据文件合并成更大的文件。当没有足够的剩余空间时，它可能会变慢。因此，请确保<code>-storageDataPath</code>目录至少有20%的可用空间。剩余可用空间量可以通过<code>vm_free_disk_space_bytes</code>指标进行监控。存储在磁盘上的数据总大小可以通过vm_data_size_bytes指标之和进行监控。还可以查看<code>vm_merge_need_free_disk_space</code>指标，如果由于缺乏免费磁盘空间而无法启动后台合并，则其值将设置为大于0.该值显示每月分区数，在拥有更多免费磁盘空间时将启动后台合并。</li>
<li>VictoriaMetrics会将传入数据缓冲到内存中，并在几秒钟后将其刷新到持久存储中。这可能会导致以下“问题”：
<ul>
<li>插入后的几秒钟数据才能进行查询。可以通过请求<code>/internal/force_flush </code>http处理程序将内存缓冲区刷新到可搜索部分。此处理程序主要用于测试和调试目的。</li>
<li>在非正常关闭（即OOM、kill -9或硬件重置）时，最后几秒钟插入的数据可能会丢失。<code>-inmemoryDataFlushInterval</code>命令行标志允许控制将内存中的数据刷新到持久存储的频率。有关更多详细信息，请参阅存储文档和本文。</li>
</ul>
</li>
<li>如果VictoriaMetrics工作缓慢，并且每秒摄取100K个数据点占用超过一个CPU核心，则很可能是当前RAM量对于太多活动时间序列来说不足够了。VictoriaMetrics公开了<code>vm_slow_*</code>指标，例如<code>vm_slow_row_inserts_total</code>和<code>vm_slow_metric_name_loads_total</code>，它们可以用作RAM数量不足的指示器。建议增加节点上VictoriaMetrics所使用的RAM量以改善摄取和查询性能。</li>
<li>如果同一度量标签顺序随时间变化（例如<code>metric{k1=&quot;v1&quot;,k2=&quot;v2&quot;}</code>可能变为<code>metric{k2=&quot;v2&quot;,k1=&quot;v1&quot;}</code>），则建议使用-sortLabels命令行标志运行VictoriaMetrics，以减少内存使用和CPU使用率。</li>
<li>VictoriaMetrics优先考虑数据摄取而不是数据查询。因此，如果没有足够的资源进行数据摄取，则数据查询可能会显著减慢。</li>
<li>如果VictoriaMetrics由于磁盘错误导致某些部分损坏而无法工作，则只需删除带有损坏部分的目录即可。在VictoriaMetrics未运行时，安全地删除<code>&lt;-storageDataPath&gt;/data/{big,small}/YYYY_MM</code>目录下的子目录可以恢复VictoriaMetrics，但会丢失已存储在被删除损坏部分中的数据。将来将创建vmrecover工具以自动从此类错误中恢复。</li>
<li>如果您在图表上看到间隙，请尝试通过向<code>/internal/resetRollupResultCache</code>发送请求来重置缓存。如果这样可以消除图表上的间隙，则很可能是将早于<code>-search.cacheTimestampOffset</code>时间戳的数据。</li>
<li>如果您从InfluxDB或TimescaleDB切换过来，可能需要设置<code>-search.setLookbackToStep</code>命令行标志。这将抑制VictoriaMetrics使用的默认间隙填充算法-默认情况下，它假设每个时间序列是连续的而不是离散的，因此会用固定间隔填补真实样本之间的空白。</li>
<li>通过<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#cardinality-explorer" target="_blank" rel="noopener">cardinality explorer</a>和<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#tsdb-stats" target="_blank" rel="noopener">/api/v1/status/tsdb</a>端点可以确定导致高基数或高变动率的指标和标签。</li>
<li>如果要在VictoriaMetrics中记录新时间序列，请传递<code>-logNewSeries</code>命令行标志。</li>
<li>VictoriaMetrics通过<code>-maxLabelsPerTimeseries</code>命令行标志限制每个度量指标的标签数量。这可以防止摄入具有太多标签的指标。建议监视<code>vm_metrics_with_dropped_labels_total</code>度量以确定是否需要根据工作负载调整<code>-maxLabelsPerTimeseries</code>。</li>
<li>如果您在VictoriaMetrics中存储Graphite指标（如<code>foo.bar.baz</code>），则可以使用<code>{__graphite__=&quot;foo.*.baz&quot;}</code>过滤器选择此类指标。详细信息请参阅<a href="https://docs.victoriametrics.com/Single-server-VictoriaMetrics.html#selecting-graphite-metrics" target="_blank" rel="noopener">相关文档</a>。</li>
<li>在数据摄取期间，VictoriaMetrics会忽略<code>NaN</code>值。</li>
</ul>
<p>更多参见<a href="https://docs.victoriametrics.com/Troubleshooting.html" target="_blank" rel="noopener">故障排查文档</a>。</p>
<h2>运行参数<span class="hx-absolute -hx-mt-20" id="运行参数"></span>
    <a href="#%e8%bf%90%e8%a1%8c%e5%8f%82%e6%95%b0" class="subheading-anchor" aria-label="Permalink for this section"></a></h2><p>使用<code>-help</code>参数来查看支持的所有运行参数列表和参数功能描述。</p>
<div class="hextra-code-block hx-relative hx-mt-6 first:hx-mt-0 hx-group/code">
  

<div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>-bigMergeConcurrency int
</span></span><span style="display:flex;"><span>   Deprecated: this flag does nothing
</span></span><span style="display:flex;"><span>-blockcache.missesBeforeCaching int
</span></span><span style="display:flex;"><span>   The number of cache misses before putting the block into cache. Higher values may reduce indexdb/dataBlocks cache size at the cost of higher CPU and disk read usage <span style="color:#f92672">(</span>default 2<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-cacheExpireDuration duration
</span></span><span style="display:flex;"><span>   Items are removed from in-memory caches after they aren<span style="color:#e6db74">&#39;t accessed for this duration. Lower values may reduce memory usage at the cost of higher CPU usage. See also -prevCacheRemovalPercent (default 30m0s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-configAuthKey value
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Authorization key for accessing /config page. It must be passed via authKey query arg. It overrides -httpAuth.*
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Flag value can be read from the given file when using -configAuthKey=file:///abs/path/to/file or -configAuthKey=file://./relative/path/to/file . Flag value can be read from the given http/https url when using -configAuthKey=http://host/path or -configAuthKey=https://host/path
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-csvTrimTimestamp duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Trim timestamps when importing csv data to this duration. Minimum practical duration is 1ms. Higher duration (i.e. 1s) may be used for reducing disk space usage for timestamp data (default 1ms)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-datadog.maxInsertRequestSize size
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum size in bytes of a single DataDog POST request to /datadog/api/v2/series
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports the following optional suffixes for size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB (default 67108864)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-datadog.sanitizeMetricName
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Sanitize metric names for the ingested DataDog data to comply with DataDog behaviour described at https://docs.datadoghq.com/metrics/custom_metrics/#naming-custom-metrics (default true)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-dedup.minScrapeInterval duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Leave only the last sample in every time series per each discrete interval equal to -dedup.minScrapeInterval &gt; 0. See also -streamAggr.dedupInterval and https://docs.victoriametrics.com/#deduplication
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-deleteAuthKey value
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   authKey for metrics&#39;</span> deletion via /api/v1/admin/tsdb/delete_series and /tags/delSeries
</span></span><span style="display:flex;"><span>   Flag value can be read from the given file when using -deleteAuthKey<span style="color:#f92672">=</span>file:///abs/path/to/file or -deleteAuthKey<span style="color:#f92672">=</span>file://./relative/path/to/file . Flag value can be read from the given http/https url when using -deleteAuthKey<span style="color:#f92672">=</span>http://host/path or -deleteAuthKey<span style="color:#f92672">=</span>https://host/path
</span></span><span style="display:flex;"><span>-denyQueriesOutsideRetention
</span></span><span style="display:flex;"><span>   Whether to deny queries outside the configured -retentionPeriod. When set, <span style="color:#66d9ef">then</span> /api/v1/query_range would <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;503 Service Unavailable&#39;</span> error <span style="color:#66d9ef">for</span> queries with <span style="color:#e6db74">&#39;from&#39;</span> value outside -retentionPeriod. This may be useful when multiple data sources with distinct retentions are hidden behind query-tee
</span></span><span style="display:flex;"><span>-denyQueryTracing
</span></span><span style="display:flex;"><span>   Whether to disable the ability to trace queries. See https://docs.victoriametrics.com/#query-tracing
</span></span><span style="display:flex;"><span>-downsampling.period array
</span></span><span style="display:flex;"><span>   Comma-separated downsampling periods in the format <span style="color:#e6db74">&#39;offset:period&#39;</span>. For example, <span style="color:#e6db74">&#39;30d:10m&#39;</span> instructs to leave a single sample per <span style="color:#ae81ff">10</span> minutes <span style="color:#66d9ef">for</span> samples older than <span style="color:#ae81ff">30</span> days. When setting multiple downsampling periods, it is necessary <span style="color:#66d9ef">for</span> the periods to be multiples of each other. See https://docs.victoriametrics.com/#downsampling <span style="color:#66d9ef">for</span> details. This flag is available only in VictoriaMetrics enterprise. See https://docs.victoriametrics.com/enterprise/
</span></span><span style="display:flex;"><span>   Supports an array of values separated by comma or specified via multiple flags.
</span></span><span style="display:flex;"><span>   Value can contain comma inside single-quoted or double-quoted string, <span style="color:#f92672">{}</span>, <span style="color:#f92672">[]</span> and <span style="color:#f92672">()</span> braces.
</span></span><span style="display:flex;"><span>-dryRun
</span></span><span style="display:flex;"><span>   Whether to check config files without running VictoriaMetrics. The following config files are checked: -promscrape.config, -relabelConfig and -streamAggr.config. Unknown config entries aren<span style="color:#e6db74">&#39;t allowed in -promscrape.config by default. This can be changed with -promscrape.config.strictParse=false command-line flag
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-enableTCP6
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to enable IPv6 for listening and dialing. By default, only IPv4 TCP and UDP are used
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-envflag.enable
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to enable reading flags from environment variables in addition to the command line. Command line flag values have priority over values from environment vars. Flags are read only from the command line if this flag isn&#39;</span>t set. See https://docs.victoriametrics.com/#environment-variables <span style="color:#66d9ef">for</span> more details
</span></span><span style="display:flex;"><span>-envflag.prefix string
</span></span><span style="display:flex;"><span>   Prefix <span style="color:#66d9ef">for</span> environment variables <span style="color:#66d9ef">if</span> -envflag.enable is set
</span></span><span style="display:flex;"><span>-eula
</span></span><span style="display:flex;"><span>   Deprecated, please use -license or -licenseFile flags instead. By specifying this flag, you confirm that you have an enterprise license and accept the ESA https://victoriametrics.com/legal/esa/ . This flag is available only in Enterprise binaries. See https://docs.victoriametrics.com/enterprise/
</span></span><span style="display:flex;"><span>-filestream.disableFadvise
</span></span><span style="display:flex;"><span>   Whether to disable fadvise<span style="color:#f92672">()</span> syscall when reading large data files. The fadvise<span style="color:#f92672">()</span> syscall prevents from eviction of recently accessed data from OS page cache during background merges and backups. In some rare cases it is better to disable the syscall <span style="color:#66d9ef">if</span> it uses too much CPU
</span></span><span style="display:flex;"><span>-finalMergeDelay duration
</span></span><span style="display:flex;"><span>   Deprecated: this flag does nothing
</span></span><span style="display:flex;"><span>-flagsAuthKey value
</span></span><span style="display:flex;"><span>   Auth key <span style="color:#66d9ef">for</span> /flags endpoint. It must be passed via authKey query arg. It overrides -httpAuth.*
</span></span><span style="display:flex;"><span>   Flag value can be read from the given file when using -flagsAuthKey<span style="color:#f92672">=</span>file:///abs/path/to/file or -flagsAuthKey<span style="color:#f92672">=</span>file://./relative/path/to/file . Flag value can be read from the given http/https url when using -flagsAuthKey<span style="color:#f92672">=</span>http://host/path or -flagsAuthKey<span style="color:#f92672">=</span>https://host/path
</span></span><span style="display:flex;"><span>-forceFlushAuthKey value
</span></span><span style="display:flex;"><span>   authKey, which must be passed in query string to /internal/force_flush pages
</span></span><span style="display:flex;"><span>   Flag value can be read from the given file when using -forceFlushAuthKey<span style="color:#f92672">=</span>file:///abs/path/to/file or -forceFlushAuthKey<span style="color:#f92672">=</span>file://./relative/path/to/file . Flag value can be read from the given http/https url when using -forceFlushAuthKey<span style="color:#f92672">=</span>http://host/path or -forceFlushAuthKey<span style="color:#f92672">=</span>https://host/path
</span></span><span style="display:flex;"><span>-forceMergeAuthKey value
</span></span><span style="display:flex;"><span>   authKey, which must be passed in query string to /internal/force_merge pages
</span></span><span style="display:flex;"><span>   Flag value can be read from the given file when using -forceMergeAuthKey<span style="color:#f92672">=</span>file:///abs/path/to/file or -forceMergeAuthKey<span style="color:#f92672">=</span>file://./relative/path/to/file . Flag value can be read from the given http/https url when using -forceMergeAuthKey<span style="color:#f92672">=</span>http://host/path or -forceMergeAuthKey<span style="color:#f92672">=</span>https://host/path
</span></span><span style="display:flex;"><span>-fs.disableMmap
</span></span><span style="display:flex;"><span>   Whether to use pread<span style="color:#f92672">()</span> instead of mmap<span style="color:#f92672">()</span> <span style="color:#66d9ef">for</span> reading data files. By default, mmap<span style="color:#f92672">()</span> is used <span style="color:#66d9ef">for</span> 64-bit arches and pread<span style="color:#f92672">()</span> is used <span style="color:#66d9ef">for</span> 32-bit arches, since they cannot read data files bigger than 2^32 bytes in memory. mmap<span style="color:#f92672">()</span> is usually faster <span style="color:#66d9ef">for</span> reading small data chunks than pread<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>-graphite.sanitizeMetricName
</span></span><span style="display:flex;"><span>   Sanitize metric names <span style="color:#66d9ef">for</span> the ingested Graphite data. See https://docs.victoriametrics.com/#how-to-send-data-from-graphite-compatible-agents-such-as-statsd
</span></span><span style="display:flex;"><span>-graphiteListenAddr string
</span></span><span style="display:flex;"><span>   TCP and UDP address to listen <span style="color:#66d9ef">for</span> Graphite plaintext data. Usually :2003 must be set. Doesn<span style="color:#e6db74">&#39;t work if empty. See also -graphiteListenAddr.useProxyProtocol
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-graphiteListenAddr.useProxyProtocol
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to use proxy protocol for connections accepted at -graphiteListenAddr . See https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-graphiteTrimTimestamp duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Trim timestamps for Graphite data to this duration. Minimum practical duration is 1s. Higher duration (i.e. 1m) may be used for reducing disk space usage for timestamp data (default 1s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-http.connTimeout duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Incoming connections to -httpListenAddr are closed after the configured timeout. This may help evenly spreading load among a cluster of services behind TCP-level load balancer. Zero value disables closing of incoming connections (default 2m0s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-http.disableResponseCompression
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Disable compression of HTTP responses to save CPU resources. By default, compression is enabled to save network bandwidth
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-http.header.csp string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Value for &#39;</span>Content-Security-Policy<span style="color:#e6db74">&#39; header, recommended: &#34;default-src &#39;</span>self<span style="color:#e6db74">&#39;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-http.header.frameOptions string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Value for &#39;</span>X-Frame-Options<span style="color:#e6db74">&#39; header
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-http.header.hsts string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Value for &#39;</span>Strict-Transport-Security<span style="color:#e6db74">&#39; header, recommended: &#39;</span>max-age<span style="color:#f92672">=</span>31536000; includeSubDomains<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-http.idleConnTimeout duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Timeout for incoming idle http connections (default 1m0s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-http.maxGracefulShutdownDuration duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum duration for a graceful shutdown of the HTTP server. A highly loaded server may require increased value for a graceful shutdown (default 7s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-http.pathPrefix string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   An optional prefix to add to all the paths handled by http server. For example, if &#39;</span>-http.pathPrefix<span style="color:#f92672">=</span>/foo/bar<span style="color:#e6db74">&#39; is set, then all the http requests will be handled on &#39;</span>/foo/bar/*<span style="color:#e6db74">&#39; paths. This may be useful for proxied requests. See https://www.robustperception.io/using-external-urls-and-proxies-with-prometheus
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-http.shutdownDelay duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Optional delay before http server shutdown. During this delay, the server returns non-OK responses from /health page, so load balancers can route new requests to other servers
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-httpAuth.password value
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Password for HTTP server&#39;</span>s Basic Auth. The authentication is disabled <span style="color:#66d9ef">if</span> -httpAuth.username is empty
</span></span><span style="display:flex;"><span>   Flag value can be read from the given file when using -httpAuth.password<span style="color:#f92672">=</span>file:///abs/path/to/file or -httpAuth.password<span style="color:#f92672">=</span>file://./relative/path/to/file . Flag value can be read from the given http/https url when using -httpAuth.password<span style="color:#f92672">=</span>http://host/path or -httpAuth.password<span style="color:#f92672">=</span>https://host/path
</span></span><span style="display:flex;"><span>-httpAuth.username string
</span></span><span style="display:flex;"><span>   Username <span style="color:#66d9ef">for</span> HTTP server<span style="color:#e6db74">&#39;s Basic Auth. The authentication is disabled if empty. See also -httpAuth.password
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-httpListenAddr array
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   TCP addresses to listen for incoming http requests. See also -tls and -httpListenAddr.useProxyProtocol
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports an array of values separated by comma or specified via multiple flags.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Value can contain comma inside single-quoted or double-quoted string, {}, [] and () braces.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-httpListenAddr.useProxyProtocol array
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to use proxy protocol for connections accepted at the corresponding -httpListenAddr . See https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt . With enabled proxy protocol http server cannot serve regular /metrics endpoint. Use -pushmetrics.url for metrics pushing
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports array of values separated by comma or specified via multiple flags.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Empty values are set to false.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-import.maxLineLen size
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum length in bytes of a single line accepted by /api/v1/import; the line length can be limited with &#39;</span>max_rows_per_line<span style="color:#e6db74">&#39; query arg passed to /api/v1/export
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports the following optional suffixes for size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB (default 10485760)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-influx.databaseNames array
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Comma-separated list of database names to return from /query and /influx/query API. This can be needed for accepting data from Telegraf plugins such as https://github.com/fangli/fluent-plugin-influxdb
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports an array of values separated by comma or specified via multiple flags.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Value can contain comma inside single-quoted or double-quoted string, {}, [] and () braces.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-influx.maxLineSize size
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum size in bytes for a single InfluxDB line during parsing
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports the following optional suffixes for size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB (default 262144)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-influxDBLabel string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Default label for the DB name sent over &#39;</span>?db<span style="color:#f92672">={</span>db_name<span style="color:#f92672">}</span><span style="color:#e6db74">&#39; query parameter (default &#34;db&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-influxListenAddr string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   TCP and UDP address to listen for InfluxDB line protocol data. Usually :8089 must be set. Doesn&#39;</span>t work <span style="color:#66d9ef">if</span> empty. This flag isn<span style="color:#e6db74">&#39;t needed when ingesting data over HTTP - just send it to http://&lt;victoriametrics&gt;:8428/write . See also -influxListenAddr.useProxyProtocol
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-influxListenAddr.useProxyProtocol
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to use proxy protocol for connections accepted at -influxListenAddr . See https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-influxMeasurementFieldSeparator string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Separator for &#39;</span><span style="color:#f92672">{</span>measurement<span style="color:#f92672">}{</span>separator<span style="color:#f92672">}{</span>field_name<span style="color:#f92672">}</span><span style="color:#e6db74">&#39; metric name when inserted via InfluxDB line protocol (default &#34;_&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-influxSkipMeasurement
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Uses &#39;</span><span style="color:#f92672">{</span>field_name<span style="color:#f92672">}</span><span style="color:#e6db74">&#39; as a metric name while ignoring &#39;</span><span style="color:#f92672">{</span>measurement<span style="color:#f92672">}</span><span style="color:#e6db74">&#39; and &#39;</span>-influxMeasurementFieldSeparator<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-influxSkipSingleField
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Uses &#39;</span><span style="color:#f92672">{</span>measurement<span style="color:#f92672">}</span><span style="color:#e6db74">&#39; instead of &#39;</span><span style="color:#f92672">{</span>measurement<span style="color:#f92672">}{</span>separator<span style="color:#f92672">}{</span>field_name<span style="color:#f92672">}</span><span style="color:#e6db74">&#39; for metric name if InfluxDB line contains only a single field
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-influxTrimTimestamp duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Trim timestamps for InfluxDB line protocol data to this duration. Minimum practical duration is 1ms. Higher duration (i.e. 1s) may be used for reducing disk space usage for timestamp data (default 1ms)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-inmemoryDataFlushInterval duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The interval for guaranteed saving of in-memory data to disk. The saved data survives unclean shutdowns such as OOM crash, hardware reset, SIGKILL, etc. Bigger intervals may help increase the lifetime of flash storage with limited write cycles (e.g. Raspberry PI). Smaller intervals increase disk IO load. Minimum supported value is 1s (default 5s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-insert.maxQueueDuration duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum duration to wait in the queue when -maxConcurrentInserts concurrent insert requests are executed (default 1m0s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-internStringCacheExpireDuration duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The expiry duration for caches for interned strings. See https://en.wikipedia.org/wiki/String_interning . See also -internStringMaxLen and -internStringDisableCache (default 6m0s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-internStringDisableCache
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to disable caches for interned strings. This may reduce memory usage at the cost of higher CPU usage. See https://en.wikipedia.org/wiki/String_interning . See also -internStringCacheExpireDuration and -internStringMaxLen
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-internStringMaxLen int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum length for strings to intern. A lower limit may save memory at the cost of higher CPU usage. See https://en.wikipedia.org/wiki/String_interning . See also -internStringDisableCache and -internStringCacheExpireDuration (default 500)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-license string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   License key for VictoriaMetrics Enterprise. See https://victoriametrics.com/products/enterprise/ . Trial Enterprise license can be obtained from https://victoriametrics.com/products/enterprise/trial/ . This flag is available only in Enterprise binaries. The license key can be also passed via file specified by -licenseFile command-line flag
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-license.forceOffline
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to enable offline verification for VictoriaMetrics Enterprise license key, which has been passed either via -license or via -licenseFile command-line flag. The issued license key must support offline verification feature. Contact info@victoriametrics.com if you need offline license verification. This flag is available only in Enterprise binaries
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-licenseFile string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Path to file with license key for VictoriaMetrics Enterprise. See https://victoriametrics.com/products/enterprise/ . Trial Enterprise license can be obtained from https://victoriametrics.com/products/enterprise/trial/ . This flag is available only in Enterprise binaries. The license key can be also passed inline via -license command-line flag
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-logNewSeries
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to log new series. This option is for debug purposes only. It can lead to performance issues when big number of new series are ingested into VictoriaMetrics
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-loggerDisableTimestamps
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to disable writing timestamps in logs
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-loggerErrorsPerSecondLimit int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Per-second limit on the number of ERROR messages. If more than the given number of errors are emitted per second, the remaining errors are suppressed. Zero values disable the rate limit
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-loggerFormat string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Format for logs. Possible values: default, json (default &#34;default&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-loggerJSONFields string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Allows renaming fields in JSON formatted logs. Example: &#34;ts:timestamp,msg:message&#34; renames &#34;ts&#34; to &#34;timestamp&#34; and &#34;msg&#34; to &#34;message&#34;. Supported fields: ts, level, caller, msg
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-loggerLevel string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Minimum level of errors to log. Possible values: INFO, WARN, ERROR, FATAL, PANIC (default &#34;INFO&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-loggerMaxArgLen int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum length of a single logged argument. Longer arguments are replaced with &#39;</span>arg_start..arg_end<span style="color:#e6db74">&#39;, where &#39;</span>arg_start<span style="color:#e6db74">&#39; and &#39;</span>arg_end<span style="color:#e6db74">&#39; is prefix and suffix of the arg with the length not exceeding -loggerMaxArgLen / 2 (default 1000)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-loggerOutput string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Output for the logs. Supported values: stderr, stdout (default &#34;stderr&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-loggerTimezone string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Timezone to use for timestamps in logs. Timezone must be a valid IANA Time Zone. For example: America/New_York, Europe/Berlin, Etc/GMT+3 or Local (default &#34;UTC&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-loggerWarnsPerSecondLimit int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Per-second limit on the number of WARN messages. If more than the given number of warns are emitted per second, then the remaining warns are suppressed. Zero values disable the rate limit
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-maxConcurrentInserts int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum number of concurrent insert requests. Set higher value when clients send data over slow networks. Default value depends on the number of available CPU cores. It should work fine in most cases since it minimizes resource usage. See also -insert.maxQueueDuration (default 32)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-maxInsertRequestSize size
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum size in bytes of a single Prometheus remote_write API request
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports the following optional suffixes for size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB (default 33554432)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-maxLabelValueLen int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum length of label values in the accepted time series. Longer label values are truncated. In this case the vm_too_long_label_values_total metric at /metrics page is incremented (default 4096)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-maxLabelsPerTimeseries int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum number of labels accepted per time series. Superfluous labels are dropped. In this case the vm_metrics_with_dropped_labels_total metric at /metrics page is incremented (default 30)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-memory.allowedBytes size
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Allowed size of system memory VictoriaMetrics caches may occupy. This option overrides -memory.allowedPercent if set to a non-zero value. Too low a value may increase the cache miss rate usually resulting in higher CPU and disk IO usage. Too high a value may evict too much data from the OS page cache resulting in higher disk IO usage
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports the following optional suffixes for size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB (default 0)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-memory.allowedPercent float
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Allowed percent of system memory VictoriaMetrics caches may occupy. See also -memory.allowedBytes. Too low a value may increase cache miss rate usually resulting in higher CPU and disk IO usage. Too high a value may evict too much data from the OS page cache which will result in higher disk IO usage (default 60)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-metrics.exposeMetadata
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to expose TYPE and HELP metadata at the /metrics page, which is exposed at -httpListenAddr . The metadata may be needed when the /metrics page is consumed by systems, which require this information. For example, Managed Prometheus in Google Cloud - https://cloud.google.com/stackdriver/docs/managed-prometheus/troubleshooting#missing-metric-type
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-metricsAuthKey value
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Auth key for /metrics endpoint. It must be passed via authKey query arg. It overrides -httpAuth.*
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Flag value can be read from the given file when using -metricsAuthKey=file:///abs/path/to/file or -metricsAuthKey=file://./relative/path/to/file . Flag value can be read from the given http/https url when using -metricsAuthKey=http://host/path or -metricsAuthKey=https://host/path
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-mtls array
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to require valid client certificate for https requests to the corresponding -httpListenAddr . This flag works only if -tls flag is set. See also -mtlsCAFile . This flag is available only in Enterprise binaries. See https://docs.victoriametrics.com/enterprise/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports array of values separated by comma or specified via multiple flags.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Empty values are set to false.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-mtlsCAFile array
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Optional path to TLS Root CA for verifying client certificates at the corresponding -httpListenAddr when -mtls is enabled. By default the host system TLS Root CA is used for client certificate verification. This flag is available only in Enterprise binaries. See https://docs.victoriametrics.com/enterprise/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports an array of values separated by comma or specified via multiple flags.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Value can contain comma inside single-quoted or double-quoted string, {}, [] and () braces.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-newrelic.maxInsertRequestSize size
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum size in bytes of a single NewRelic request to /newrelic/infra/v2/metrics/events/bulk
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports the following optional suffixes for size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB (default 67108864)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-opentelemetry.usePrometheusNaming
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to convert metric names and labels into Prometheus-compatible format for the metrics ingested via OpenTelemetry protocol; see https://docs.victoriametrics.com/#sending-data-via-opentelemetry
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-opentsdbHTTPListenAddr string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   TCP address to listen for OpenTSDB HTTP put requests. Usually :4242 must be set. Doesn&#39;</span>t work <span style="color:#66d9ef">if</span> empty. See also -opentsdbHTTPListenAddr.useProxyProtocol
</span></span><span style="display:flex;"><span>-opentsdbHTTPListenAddr.useProxyProtocol
</span></span><span style="display:flex;"><span>   Whether to use proxy protocol <span style="color:#66d9ef">for</span> connections accepted at -opentsdbHTTPListenAddr . See https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt
</span></span><span style="display:flex;"><span>-opentsdbListenAddr string
</span></span><span style="display:flex;"><span>   TCP and UDP address to listen <span style="color:#66d9ef">for</span> OpenTSDB metrics. Telnet put messages and HTTP /api/put messages are simultaneously served on TCP port. Usually :4242 must be set. Doesn<span style="color:#e6db74">&#39;t work if empty. See also -opentsdbListenAddr.useProxyProtocol
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-opentsdbListenAddr.useProxyProtocol
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to use proxy protocol for connections accepted at -opentsdbListenAddr . See https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-opentsdbTrimTimestamp duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Trim timestamps for OpenTSDB &#39;</span>telnet put<span style="color:#e6db74">&#39; data to this duration. Minimum practical duration is 1s. Higher duration (i.e. 1m) may be used for reducing disk space usage for timestamp data (default 1s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-opentsdbhttp.maxInsertRequestSize size
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum size of OpenTSDB HTTP put request
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports the following optional suffixes for size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB (default 33554432)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-opentsdbhttpTrimTimestamp duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Trim timestamps for OpenTSDB HTTP data to this duration. Minimum practical duration is 1ms. Higher duration (i.e. 1s) may be used for reducing disk space usage for timestamp data (default 1ms)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-pprofAuthKey value
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Auth key for /debug/pprof/* endpoints. It must be passed via authKey query arg. It overrides -httpAuth.*
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Flag value can be read from the given file when using -pprofAuthKey=file:///abs/path/to/file or -pprofAuthKey=file://./relative/path/to/file . Flag value can be read from the given http/https url when using -pprofAuthKey=http://host/path or -pprofAuthKey=https://host/path
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-precisionBits int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The number of precision bits to store per each value. Lower precision bits improves data compression at the cost of precision loss (default 64)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-prevCacheRemovalPercent float
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Items in the previous caches are removed when the percent of requests it serves becomes lower than this value. Higher values reduce memory usage at the cost of higher CPU usage. See also -cacheExpireDuration (default 0.1)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.azureSDCheckInterval duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Interval for checking for changes in Azure. This works only if azure_sd_configs is configured in &#39;</span>-promscrape.config<span style="color:#e6db74">&#39; file. See https://docs.victoriametrics.com/sd_configs/#azure_sd_configs for details (default 1m0s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.cluster.memberLabel string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   If non-empty, then the label with this name and the -promscrape.cluster.memberNum value is added to all the scraped metrics. See https://docs.victoriametrics.com/vmagent/#scraping-big-number-of-targets for more info
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.cluster.memberNum string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The number of vmagent instance in the cluster of scrapers. It must be a unique value in the range 0 ... promscrape.cluster.membersCount-1 across scrapers in the cluster. Can be specified as pod name of Kubernetes StatefulSet - pod-name-Num, where Num is a numeric part of pod name. See also -promscrape.cluster.memberLabel . See https://docs.victoriametrics.com/vmagent/#scraping-big-number-of-targets for more info (default &#34;0&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.cluster.memberURLTemplate string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   An optional template for URL to access vmagent instance with the given -promscrape.cluster.memberNum value. Every %d occurrence in the template is substituted with -promscrape.cluster.memberNum at urls to vmagent instances responsible for scraping the given target at /service-discovery page. For example -promscrape.cluster.memberURLTemplate=&#39;</span>http://vmagent-%d:8429/targets<span style="color:#e6db74">&#39;. See https://docs.victoriametrics.com/vmagent/#scraping-big-number-of-targets for more details
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.cluster.membersCount int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The number of members in a cluster of scrapers. Each member must have a unique -promscrape.cluster.memberNum in the range 0 ... promscrape.cluster.membersCount-1 . Each member then scrapes roughly 1/N of all the targets. By default, cluster scraping is disabled, i.e. a single scraper scrapes all the targets. See https://docs.victoriametrics.com/vmagent/#scraping-big-number-of-targets for more info (default 1)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.cluster.name string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Optional name of the cluster. If multiple vmagent clusters scrape the same targets, then each cluster must have unique name in order to properly de-duplicate samples received from these clusters. See https://docs.victoriametrics.com/vmagent/#scraping-big-number-of-targets for more info
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.cluster.replicationFactor int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The number of members in the cluster, which scrape the same targets. If the replication factor is greater than 1, then the deduplication must be enabled at remote storage side. See https://docs.victoriametrics.com/vmagent/#scraping-big-number-of-targets for more info (default 1)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.config string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Optional path to Prometheus config file with &#39;</span>scrape_configs<span style="color:#e6db74">&#39; section containing targets to scrape. The path can point to local file and to http url. See https://docs.victoriametrics.com/#how-to-scrape-prometheus-exporters-such-as-node-exporter for details
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.config.dryRun
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Checks -promscrape.config file for errors and unsupported fields and then exits. Returns non-zero exit code on parsing errors and emits these errors to stderr. See also -promscrape.config.strictParse command-line flag. Pass -loggerLevel=ERROR if you don&#39;</span>t need to see info messages in the output.
</span></span><span style="display:flex;"><span>-promscrape.config.strictParse
</span></span><span style="display:flex;"><span>   Whether to deny unsupported fields in -promscrape.config . Set to false in order to silently skip unsupported fields <span style="color:#f92672">(</span>default true<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.configCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in -promscrape.config file. By default, the checking is disabled. See how to reload -promscrape.config file at https://docs.victoriametrics.com/vmagent/#configuration-update
</span></span><span style="display:flex;"><span>-promscrape.consul.waitTime duration
</span></span><span style="display:flex;"><span>   Wait time used by Consul service discovery. Default value is used <span style="color:#66d9ef">if</span> not set
</span></span><span style="display:flex;"><span>-promscrape.consulSDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in Consul. This works only <span style="color:#66d9ef">if</span> consul_sd_configs is configured in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> file. See https://docs.victoriametrics.com/sd_configs/#consul_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 30s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.consulagentSDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in Consul Agent. This works only <span style="color:#66d9ef">if</span> consulagent_sd_configs is configured in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> file. See https://docs.victoriametrics.com/sd_configs/#consulagent_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 30s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.digitaloceanSDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in digital ocean. This works only <span style="color:#66d9ef">if</span> digitalocean_sd_configs is configured in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> file. See https://docs.victoriametrics.com/sd_configs/#digitalocean_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 1m0s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.disableCompression
</span></span><span style="display:flex;"><span>   Whether to disable sending <span style="color:#e6db74">&#39;Accept-Encoding: gzip&#39;</span> request headers to all the scrape targets. This may reduce CPU usage on scrape targets at the cost of higher network bandwidth utilization. It is possible to set <span style="color:#e6db74">&#39;disable_compression: true&#39;</span> individually per each <span style="color:#e6db74">&#39;scrape_config&#39;</span> section in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> <span style="color:#66d9ef">for</span> fine-grained control
</span></span><span style="display:flex;"><span>-promscrape.disableKeepAlive
</span></span><span style="display:flex;"><span>   Whether to disable HTTP keep-alive connections when scraping all the targets. This may be useful when targets has no support <span style="color:#66d9ef">for</span> HTTP keep-alive connection. It is possible to set <span style="color:#e6db74">&#39;disable_keepalive: true&#39;</span> individually per each <span style="color:#e6db74">&#39;scrape_config&#39;</span> section in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> <span style="color:#66d9ef">for</span> fine-grained control. Note that disabling HTTP keep-alive may increase load on both vmagent and scrape targets
</span></span><span style="display:flex;"><span>-promscrape.discovery.concurrency int
</span></span><span style="display:flex;"><span>   The maximum number of concurrent requests to Prometheus autodiscovery API <span style="color:#f92672">(</span>Consul, Kubernetes, etc.<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>default 100<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.discovery.concurrentWaitTime duration
</span></span><span style="display:flex;"><span>   The maximum duration <span style="color:#66d9ef">for</span> waiting to perform API requests <span style="color:#66d9ef">if</span> more than -promscrape.discovery.concurrency requests are simultaneously performed <span style="color:#f92672">(</span>default 1m0s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.dnsSDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in dns. This works only <span style="color:#66d9ef">if</span> dns_sd_configs is configured in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> file. See https://docs.victoriametrics.com/sd_configs/#dns_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 30s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.dockerSDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in docker. This works only <span style="color:#66d9ef">if</span> docker_sd_configs is configured in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> file. See https://docs.victoriametrics.com/sd_configs/#docker_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 30s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.dockerswarmSDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in dockerswarm. This works only <span style="color:#66d9ef">if</span> dockerswarm_sd_configs is configured in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> file. See https://docs.victoriametrics.com/sd_configs/#dockerswarm_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 30s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.dropOriginalLabels
</span></span><span style="display:flex;"><span>   Whether to drop original labels <span style="color:#66d9ef">for</span> scrape targets at /targets and /api/v1/targets pages. This may be needed <span style="color:#66d9ef">for</span> reducing memory usage when original labels <span style="color:#66d9ef">for</span> big number of scrape targets occupy big amounts of memory. Note that this reduces debuggability <span style="color:#66d9ef">for</span> improper per-target relabeling configs
</span></span><span style="display:flex;"><span>-promscrape.ec2SDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in ec2. This works only <span style="color:#66d9ef">if</span> ec2_sd_configs is configured in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> file. See https://docs.victoriametrics.com/sd_configs/#ec2_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 1m0s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.eurekaSDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in eureka. This works only <span style="color:#66d9ef">if</span> eureka_sd_configs is configured in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> file. See https://docs.victoriametrics.com/sd_configs/#eureka_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 30s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.fileSDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in <span style="color:#e6db74">&#39;file_sd_config&#39;</span>. See https://docs.victoriametrics.com/sd_configs/#file_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 1m0s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.gceSDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in gce. This works only <span style="color:#66d9ef">if</span> gce_sd_configs is configured in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> file. See https://docs.victoriametrics.com/sd_configs/#gce_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 1m0s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.hetznerSDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in Hetzner API. This works only <span style="color:#66d9ef">if</span> hetzner_sd_configs is configured in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> file. See https://docs.victoriametrics.com/sd_configs/#hetzner_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 1m0s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.httpSDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in http endpoint service discovery. This works only <span style="color:#66d9ef">if</span> http_sd_configs is configured in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> file. See https://docs.victoriametrics.com/sd_configs/#http_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 1m0s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.kubernetes.apiServerTimeout duration
</span></span><span style="display:flex;"><span>   How frequently to reload the full state from Kubernetes API server <span style="color:#f92672">(</span>default 30m0s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.kubernetes.attachNodeMetadataAll
</span></span><span style="display:flex;"><span>   Whether to set attach_metadata.node<span style="color:#f92672">=</span>true <span style="color:#66d9ef">for</span> all the kubernetes_sd_configs at -promscrape.config . It is possible to set attach_metadata.node<span style="color:#f92672">=</span>false individually per each kubernetes_sd_configs . See https://docs.victoriametrics.com/sd_configs/#kubernetes_sd_configs
</span></span><span style="display:flex;"><span>-promscrape.kubernetesSDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in Kubernetes API server. This works only <span style="color:#66d9ef">if</span> kubernetes_sd_configs is configured in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> file. See https://docs.victoriametrics.com/sd_configs/#kubernetes_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 30s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.kumaSDCheckInterval duration
</span></span><span style="display:flex;"><span>   Interval <span style="color:#66d9ef">for</span> checking <span style="color:#66d9ef">for</span> changes in kuma service discovery. This works only <span style="color:#66d9ef">if</span> kuma_sd_configs is configured in <span style="color:#e6db74">&#39;-promscrape.config&#39;</span> file. See https://docs.victoriametrics.com/sd_configs/#kuma_sd_configs <span style="color:#66d9ef">for</span> details <span style="color:#f92672">(</span>default 30s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.maxDroppedTargets int
</span></span><span style="display:flex;"><span>   The maximum number of droppedTargets to show at /api/v1/targets page. Increase this value <span style="color:#66d9ef">if</span> your setup drops more scrape targets during relabeling and you need investigating labels <span style="color:#66d9ef">for</span> all the dropped targets. Note that the increased number of tracked dropped targets may result in increased memory usage <span style="color:#f92672">(</span>default 10000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.maxResponseHeadersSize size
</span></span><span style="display:flex;"><span>   The maximum size of http response headers from Prometheus scrape targets
</span></span><span style="display:flex;"><span>   Supports the following optional suffixes <span style="color:#66d9ef">for</span> size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB <span style="color:#f92672">(</span>default 4096<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.maxScrapeSize size
</span></span><span style="display:flex;"><span>   The maximum size of scrape response in bytes to process from Prometheus targets. Bigger responses are rejected
</span></span><span style="display:flex;"><span>   Supports the following optional suffixes <span style="color:#66d9ef">for</span> size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB <span style="color:#f92672">(</span>default 16777216<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.minResponseSizeForStreamParse size
</span></span><span style="display:flex;"><span>   The minimum target response size <span style="color:#66d9ef">for</span> automatic switching to stream parsing mode, which can reduce memory usage. See https://docs.victoriametrics.com/vmagent/#stream-parsing-mode
</span></span><span style="display:flex;"><span>   Supports the following optional suffixes <span style="color:#66d9ef">for</span> size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB <span style="color:#f92672">(</span>default 1000000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-promscrape.noStaleMarkers
</span></span><span style="display:flex;"><span>   Whether to disable sending Prometheus stale markers <span style="color:#66d9ef">for</span> metrics when scrape target disappears. This option may reduce memory usage <span style="color:#66d9ef">if</span> stale markers aren<span style="color:#e6db74">&#39;t needed for your setup. This option also disables populating the scrape_series_added metric. See https://prometheus.io/docs/concepts/jobs_instances/#automatically-generated-labels-and-time-series
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.nomad.waitTime duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Wait time used by Nomad service discovery. Default value is used if not set
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.nomadSDCheckInterval duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Interval for checking for changes in Nomad. This works only if nomad_sd_configs is configured in &#39;</span>-promscrape.config<span style="color:#e6db74">&#39; file. See https://docs.victoriametrics.com/sd_configs/#nomad_sd_configs for details (default 30s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.openstackSDCheckInterval duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Interval for checking for changes in openstack API server. This works only if openstack_sd_configs is configured in &#39;</span>-promscrape.config<span style="color:#e6db74">&#39; file. See https://docs.victoriametrics.com/sd_configs/#openstack_sd_configs for details (default 30s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.seriesLimitPerTarget int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Optional limit on the number of unique time series a single scrape target can expose. See https://docs.victoriametrics.com/vmagent/#cardinality-limiter for more info
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.streamParse
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to enable stream parsing for metrics obtained from scrape targets. This may be useful for reducing memory usage when millions of metrics are exposed per each scrape target. It is possible to set &#39;</span>stream_parse: true<span style="color:#e6db74">&#39; individually per each &#39;</span>scrape_config<span style="color:#e6db74">&#39; section in &#39;</span>-promscrape.config<span style="color:#e6db74">&#39; for fine-grained control
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.suppressDuplicateScrapeTargetErrors
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to suppress &#39;</span>duplicate scrape target<span style="color:#e6db74">&#39; errors; see https://docs.victoriametrics.com/vmagent/#troubleshooting for details
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.suppressScrapeErrors
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to suppress scrape errors logging. The last error for each target is always available at &#39;</span>/targets<span style="color:#e6db74">&#39; page even if scrape errors logging is suppressed. See also -promscrape.suppressScrapeErrorsDelay
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.suppressScrapeErrorsDelay duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The delay for suppressing repeated scrape errors logging per each scrape targets. This may be used for reducing the number of log lines related to scrape errors. See also -promscrape.suppressScrapeErrors
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-promscrape.yandexcloudSDCheckInterval duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Interval for checking for changes in Yandex Cloud API. This works only if yandexcloud_sd_configs is configured in &#39;</span>-promscrape.config<span style="color:#e6db74">&#39; file. See https://docs.victoriametrics.com/sd_configs/#yandexcloud_sd_configs for details (default 30s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-pushmetrics.disableCompression
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to disable request body compression when pushing metrics to every -pushmetrics.url
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-pushmetrics.extraLabel array
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Optional labels to add to metrics pushed to every -pushmetrics.url . For example, -pushmetrics.extraLabel=&#39;</span>instance<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;foo&#34;</span><span style="color:#e6db74">&#39; adds instance=&#34;foo&#34; label to all the metrics pushed to every -pushmetrics.url
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports an array of values separated by comma or specified via multiple flags.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Value can contain comma inside single-quoted or double-quoted string, {}, [] and () braces.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-pushmetrics.header array
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Optional HTTP request header to send to every -pushmetrics.url . For example, -pushmetrics.header=&#39;</span>Authorization: Basic foobar<span style="color:#e6db74">&#39; adds &#39;</span>Authorization: Basic foobar<span style="color:#e6db74">&#39; header to every request to every -pushmetrics.url
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports an array of values separated by comma or specified via multiple flags.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Value can contain comma inside single-quoted or double-quoted string, {}, [] and () braces.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-pushmetrics.interval duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Interval for pushing metrics to every -pushmetrics.url (default 10s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-pushmetrics.url array
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Optional URL to push metrics exposed at /metrics page. See https://docs.victoriametrics.com/#push-metrics . By default, metrics exposed at /metrics page aren&#39;</span>t pushed to any remote storage
</span></span><span style="display:flex;"><span>   Supports an array of values separated by comma or specified via multiple flags.
</span></span><span style="display:flex;"><span>   Value can contain comma inside single-quoted or double-quoted string, <span style="color:#f92672">{}</span>, <span style="color:#f92672">[]</span> and <span style="color:#f92672">()</span> braces.
</span></span><span style="display:flex;"><span>-relabelConfig string
</span></span><span style="display:flex;"><span>   Optional path to a file with relabeling rules, which are applied to all the ingested metrics. The path can point either to local file or to http url. See https://docs.victoriametrics.com/#relabeling <span style="color:#66d9ef">for</span> details. The config is reloaded on SIGHUP signal
</span></span><span style="display:flex;"><span>-reloadAuthKey value
</span></span><span style="display:flex;"><span>   Auth key <span style="color:#66d9ef">for</span> /-/reload http endpoint. It must be passed via authKey query arg. It overrides -httpAuth.*
</span></span><span style="display:flex;"><span>   Flag value can be read from the given file when using -reloadAuthKey<span style="color:#f92672">=</span>file:///abs/path/to/file or -reloadAuthKey<span style="color:#f92672">=</span>file://./relative/path/to/file . Flag value can be read from the given http/https url when using -reloadAuthKey<span style="color:#f92672">=</span>http://host/path or -reloadAuthKey<span style="color:#f92672">=</span>https://host/path
</span></span><span style="display:flex;"><span>-retentionFilter array
</span></span><span style="display:flex;"><span>   Retention filter in the format <span style="color:#e6db74">&#39;filter:retention&#39;</span>. For example, <span style="color:#e6db74">&#39;{env=&#34;dev&#34;}:3d&#39;</span> configures the retention <span style="color:#66d9ef">for</span> time series with env<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dev&#34;</span> label to <span style="color:#ae81ff">3</span> days. See https://docs.victoriametrics.com/#retention-filters <span style="color:#66d9ef">for</span> details. This flag is available only in VictoriaMetrics enterprise. See https://docs.victoriametrics.com/enterprise/
</span></span><span style="display:flex;"><span>   Supports an array of values separated by comma or specified via multiple flags.
</span></span><span style="display:flex;"><span>   Value can contain comma inside single-quoted or double-quoted string, <span style="color:#f92672">{}</span>, <span style="color:#f92672">[]</span> and <span style="color:#f92672">()</span> braces.
</span></span><span style="display:flex;"><span>-retentionPeriod value
</span></span><span style="display:flex;"><span>   Data with timestamps outside the retentionPeriod is automatically deleted. The minimum retentionPeriod is 24h or 1d. See also -retentionFilter
</span></span><span style="display:flex;"><span>   The following optional suffixes are supported: s <span style="color:#f92672">(</span>second<span style="color:#f92672">)</span>, m <span style="color:#f92672">(</span>minute<span style="color:#f92672">)</span>, h <span style="color:#f92672">(</span>hour<span style="color:#f92672">)</span>, d <span style="color:#f92672">(</span>day<span style="color:#f92672">)</span>, w <span style="color:#f92672">(</span>week<span style="color:#f92672">)</span>, y <span style="color:#f92672">(</span>year<span style="color:#f92672">)</span>. If suffix isn<span style="color:#e6db74">&#39;t set, then the duration is counted in months (default 1)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-retentionTimezoneOffset duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The offset for performing indexdb rotation. If set to 0, then the indexdb rotation is performed at 4am UTC time per each -retentionPeriod. If set to 2h, then the indexdb rotation is performed at 4am EET time (the timezone with +2h offset)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.cacheTimestampOffset duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum duration since the current time for response data, which is always queried from the original raw data, without using the response cache. Increase this value if you see gaps in responses due to time synchronization issues between VictoriaMetrics and data sources. See also -search.disableAutoCacheReset (default 5m0s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.disableAutoCacheReset
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to disable automatic response cache reset if a sample with timestamp outside -search.cacheTimestampOffset is inserted into VictoriaMetrics
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.disableCache
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to disable response caching. This may be useful when ingesting historical data. See https://docs.victoriametrics.com/#backfilling . See also -search.resetRollupResultCacheOnStartup
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.disableImplicitConversion
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Whether to return an error for queries that rely on implicit subquery conversions, see https://docs.victoriametrics.com/metricsql/#subqueries for details. See also -search.logImplicitConversion
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.graphiteMaxPointsPerSeries int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum number of points per series Graphite render API can return (default 1000000)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.graphiteStorageStep duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The interval between datapoints stored in the database. It is used at Graphite Render API handler for normalizing the interval between datapoints in case it isn&#39;</span>t normalized. It can be overridden by sending <span style="color:#e6db74">&#39;storage_step&#39;</span> query arg to /render API or by sending the desired interval via <span style="color:#e6db74">&#39;Storage-Step&#39;</span> http header during querying /render API <span style="color:#f92672">(</span>default 10s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.ignoreExtraFiltersAtLabelsAPI
</span></span><span style="display:flex;"><span>   Whether to ignore match<span style="color:#f92672">[]</span>, extra_filters<span style="color:#f92672">[]</span> and extra_label query args at /api/v1/labels and /api/v1/label/.../values . This may be useful <span style="color:#66d9ef">for</span> decreasing load on VictoriaMetrics when extra filters match too many time series. The downside is that superfluous labels or series could be returned, which <span style="color:#66d9ef">do</span> not match the extra filters. See also -search.maxLabelsAPISeries and -search.maxLabelsAPIDuration
</span></span><span style="display:flex;"><span>-search.latencyOffset duration
</span></span><span style="display:flex;"><span>   The time when data points become visible in query results after the collection. It can be overridden on per-query basis via latency_offset arg. Too small value can result in incomplete last points <span style="color:#66d9ef">for</span> query results <span style="color:#f92672">(</span>default 30s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.logImplicitConversion
</span></span><span style="display:flex;"><span>   Whether to log queries with implicit subquery conversions, see https://docs.victoriametrics.com/metricsql/#subqueries <span style="color:#66d9ef">for</span> details. Such conversion can be disabled using -search.disableImplicitConversion
</span></span><span style="display:flex;"><span>-search.logQueryMemoryUsage size
</span></span><span style="display:flex;"><span>   Log query and increment vm_memory_intensive_queries_total metric each time the query requires more memory than specified by this flag. This may help detecting and optimizing heavy queries. Query logging is disabled by default. See also -search.logSlowQueryDuration and -search.maxMemoryPerQuery
</span></span><span style="display:flex;"><span>   Supports the following optional suffixes <span style="color:#66d9ef">for</span> size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB <span style="color:#f92672">(</span>default 0<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.logSlowQueryDuration duration
</span></span><span style="display:flex;"><span>   Log queries with execution time exceeding this value. Zero disables slow query logging. See also -search.logQueryMemoryUsage <span style="color:#f92672">(</span>default 5s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxConcurrentRequests int
</span></span><span style="display:flex;"><span>   The maximum number of concurrent search requests. It shouldn<span style="color:#e6db74">&#39;t be high, since a single request can saturate all the CPU cores, while many concurrently executed requests may require high amounts of memory. See also -search.maxQueueDuration and -search.maxMemoryPerQuery (default 16)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.maxExportDuration duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum duration for /api/v1/export call (default 720h0m0s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.maxExportSeries int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum number of time series, which can be returned from /api/v1/export* APIs. This option allows limiting memory usage (default 10000000)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.maxFederateSeries int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum number of time series, which can be returned from /federate. This option allows limiting memory usage (default 1000000)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.maxGraphiteSeries int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum number of time series, which can be scanned during queries to Graphite Render API. See https://docs.victoriametrics.com/#graphite-render-api-usage (default 300000)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.maxGraphiteTagKeys int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum number of tag keys returned from Graphite API, which returns tags. See https://docs.victoriametrics.com/#graphite-tags-api-usage (default 100000)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.maxGraphiteTagValues int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum number of tag values returned from Graphite API, which returns tag values. See https://docs.victoriametrics.com/#graphite-tags-api-usage (default 100000)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.maxLabelsAPIDuration duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum duration for /api/v1/labels, /api/v1/label/.../values and /api/v1/series requests. See also -search.maxLabelsAPISeries and -search.ignoreExtraFiltersAtLabelsAPI (default 5s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.maxLabelsAPISeries int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum number of time series, which could be scanned when searching for the matching time series at /api/v1/labels and /api/v1/label/.../values. This option allows limiting memory usage and CPU usage. See also -search.maxLabelsAPIDuration, -search.maxTagKeys, -search.maxTagValues and -search.ignoreExtraFiltersAtLabelsAPI (default 1000000)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.maxLookback duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Synonym to -search.lookback-delta from Prometheus. The value is dynamically detected from interval between time series datapoints if not set. It can be overridden on per-query basis via max_lookback arg. See also &#39;</span>-search.maxStalenessInterval<span style="color:#e6db74">&#39; flag, which has the same meaning due to historical reasons
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.maxMemoryPerQuery size
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum amounts of memory a single query may consume. Queries requiring more memory are rejected. The total memory limit for concurrently executed queries can be estimated as -search.maxMemoryPerQuery multiplied by -search.maxConcurrentRequests . See also -search.logQueryMemoryUsage
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Supports the following optional suffixes for size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB (default 0)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.maxPointsPerTimeseries int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The maximum points per a single timeseries returned from /api/v1/query_range. This option doesn&#39;</span>t limit the number of scanned raw samples in the database. The main purpose of this option is to limit the number of per-series points returned to graphing UI such as VMUI or Grafana. There is no sense in setting this limit to values bigger than the horizontal resolution of the graph. See also -search.maxResponseSeries <span style="color:#f92672">(</span>default 30000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxPointsSubqueryPerTimeseries int
</span></span><span style="display:flex;"><span>   The maximum number of points per series, which can be generated by subquery. See https://valyala.medium.com/prometheus-subqueries-in-victoriametrics-9b1492b720b3 <span style="color:#f92672">(</span>default 100000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxQueryDuration duration
</span></span><span style="display:flex;"><span>   The maximum duration <span style="color:#66d9ef">for</span> query execution. It can be overridden on a per-query basis via <span style="color:#e6db74">&#39;timeout&#39;</span> query arg <span style="color:#f92672">(</span>default 30s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxQueryLen size
</span></span><span style="display:flex;"><span>   The maximum search query length in bytes
</span></span><span style="display:flex;"><span>   Supports the following optional suffixes <span style="color:#66d9ef">for</span> size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB <span style="color:#f92672">(</span>default 16384<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxQueueDuration duration
</span></span><span style="display:flex;"><span>   The maximum time the request waits <span style="color:#66d9ef">for</span> execution when -search.maxConcurrentRequests limit is reached; see also -search.maxQueryDuration <span style="color:#f92672">(</span>default 10s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxResponseSeries int
</span></span><span style="display:flex;"><span>   The maximum number of time series which can be returned from /api/v1/query and /api/v1/query_range . The limit is disabled <span style="color:#66d9ef">if</span> it equals to 0. See also -search.maxPointsPerTimeseries and -search.maxUniqueTimeseries
</span></span><span style="display:flex;"><span>-search.maxSamplesPerQuery int
</span></span><span style="display:flex;"><span>   The maximum number of raw samples a single query can process across all time series. This protects from heavy queries, which <span style="color:#66d9ef">select</span> unexpectedly high number of raw samples. See also -search.maxSamplesPerSeries <span style="color:#f92672">(</span>default 1000000000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxSamplesPerSeries int
</span></span><span style="display:flex;"><span>   The maximum number of raw samples a single query can scan per each time series. This option allows limiting memory usage <span style="color:#f92672">(</span>default 30000000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxSeries int
</span></span><span style="display:flex;"><span>   The maximum number of time series, which can be returned from /api/v1/series. This option allows limiting memory usage <span style="color:#f92672">(</span>default 30000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxSeriesPerAggrFunc int
</span></span><span style="display:flex;"><span>   The maximum number of time series an aggregate MetricsQL <span style="color:#66d9ef">function</span> can generate <span style="color:#f92672">(</span>default 1000000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxStalenessInterval duration
</span></span><span style="display:flex;"><span>   The maximum interval <span style="color:#66d9ef">for</span> staleness calculations. By default, it is automatically calculated from the median interval between samples. This flag could be useful <span style="color:#66d9ef">for</span> tuning Prometheus data model closer to Influx-style data model. See https://prometheus.io/docs/prometheus/latest/querying/basics/#staleness <span style="color:#66d9ef">for</span> details. See also <span style="color:#e6db74">&#39;-search.setLookbackToStep&#39;</span> flag
</span></span><span style="display:flex;"><span>-search.maxStatusRequestDuration duration
</span></span><span style="display:flex;"><span>   The maximum duration <span style="color:#66d9ef">for</span> /api/v1/status/* requests <span style="color:#f92672">(</span>default 5m0s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxStepForPointsAdjustment duration
</span></span><span style="display:flex;"><span>   The maximum step when /api/v1/query_range handler adjusts points with timestamps closer than -search.latencyOffset to the current time. The adjustment is needed because such points may contain incomplete data <span style="color:#f92672">(</span>default 1m0s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxTSDBStatusSeries int
</span></span><span style="display:flex;"><span>   The maximum number of time series, which can be processed during the call to /api/v1/status/tsdb. This option allows limiting memory usage <span style="color:#f92672">(</span>default 10000000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxTagKeys int
</span></span><span style="display:flex;"><span>   The maximum number of tag keys returned from /api/v1/labels . See also -search.maxLabelsAPISeries and -search.maxLabelsAPIDuration <span style="color:#f92672">(</span>default 100000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxTagValueSuffixesPerSearch int
</span></span><span style="display:flex;"><span>   The maximum number of tag value suffixes returned from /metrics/find <span style="color:#f92672">(</span>default 100000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxTagValues int
</span></span><span style="display:flex;"><span>   The maximum number of tag values returned from /api/v1/label/&lt;label_name&gt;/values . See also -search.maxLabelsAPISeries and -search.maxLabelsAPIDuration <span style="color:#f92672">(</span>default 100000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxUniqueTimeseries int
</span></span><span style="display:flex;"><span>   The maximum number of unique time series, which can be selected during /api/v1/query and /api/v1/query_range queries. This option allows limiting memory usage <span style="color:#f92672">(</span>default 300000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.maxWorkersPerQuery int
</span></span><span style="display:flex;"><span>   The maximum number of CPU cores a single query can use. The default value should work good <span style="color:#66d9ef">for</span> most cases. The flag can be set to lower values <span style="color:#66d9ef">for</span> improving performance of big number of concurrently executed queries. The flag can be set to bigger values <span style="color:#66d9ef">for</span> improving performance of heavy queries, which scan big number of time series <span style="color:#f92672">(</span>&gt;10K<span style="color:#f92672">)</span> and/or big number of samples <span style="color:#f92672">(</span>&gt;100M<span style="color:#f92672">)</span>. There is no sense in setting this flag to values bigger than the number of CPU cores available on the system <span style="color:#f92672">(</span>default 16<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.minStalenessInterval duration
</span></span><span style="display:flex;"><span>   The minimum interval <span style="color:#66d9ef">for</span> staleness calculations. This flag could be useful <span style="color:#66d9ef">for</span> removing gaps on graphs generated from time series with irregular intervals between samples. See also <span style="color:#e6db74">&#39;-search.maxStalenessInterval&#39;</span>
</span></span><span style="display:flex;"><span>-search.minWindowForInstantRollupOptimization value
</span></span><span style="display:flex;"><span>   Enable cache-based optimization <span style="color:#66d9ef">for</span> repeated queries to /api/v1/query <span style="color:#f92672">(</span>aka instant queries<span style="color:#f92672">)</span>, which contain rollup functions with lookbehind window exceeding the given value
</span></span><span style="display:flex;"><span>   The following optional suffixes are supported: s <span style="color:#f92672">(</span>second<span style="color:#f92672">)</span>, m <span style="color:#f92672">(</span>minute<span style="color:#f92672">)</span>, h <span style="color:#f92672">(</span>hour<span style="color:#f92672">)</span>, d <span style="color:#f92672">(</span>day<span style="color:#f92672">)</span>, w <span style="color:#f92672">(</span>week<span style="color:#f92672">)</span>, y <span style="color:#f92672">(</span>year<span style="color:#f92672">)</span>. If suffix isn<span style="color:#e6db74">&#39;t set, then the duration is counted in months (default 3h)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-search.noStaleMarkers
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Set this flag to true if the database doesn&#39;</span>t contain Prometheus stale markers, so there is no need in spending additional CPU time on its handling. Staleness markers may exist only in data obtained from Prometheus scrape targets
</span></span><span style="display:flex;"><span>-search.queryStats.lastQueriesCount int
</span></span><span style="display:flex;"><span>   Query stats <span style="color:#66d9ef">for</span> /api/v1/status/top_queries is tracked on this number of last queries. Zero value disables query stats tracking <span style="color:#f92672">(</span>default 20000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.queryStats.minQueryDuration duration
</span></span><span style="display:flex;"><span>   The minimum duration <span style="color:#66d9ef">for</span> queries to track in query stats at /api/v1/status/top_queries. Queries with lower duration are ignored in query stats <span style="color:#f92672">(</span>default 1ms<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-search.resetCacheAuthKey value
</span></span><span style="display:flex;"><span>   Optional authKey <span style="color:#66d9ef">for</span> resetting rollup cache via /internal/resetRollupResultCache call
</span></span><span style="display:flex;"><span>   Flag value can be read from the given file when using -search.resetCacheAuthKey<span style="color:#f92672">=</span>file:///abs/path/to/file or -search.resetCacheAuthKey<span style="color:#f92672">=</span>file://./relative/path/to/file . Flag value can be read from the given http/https url when using -search.resetCacheAuthKey<span style="color:#f92672">=</span>http://host/path or -search.resetCacheAuthKey<span style="color:#f92672">=</span>https://host/path
</span></span><span style="display:flex;"><span>-search.resetRollupResultCacheOnStartup
</span></span><span style="display:flex;"><span>   Whether to reset rollup result cache on startup. See https://docs.victoriametrics.com/#rollup-result-cache . See also -search.disableCache
</span></span><span style="display:flex;"><span>-search.setLookbackToStep
</span></span><span style="display:flex;"><span>   Whether to fix lookback interval to <span style="color:#e6db74">&#39;step&#39;</span> query arg value. If set to true, the query model becomes closer to InfluxDB data model. If set to true, <span style="color:#66d9ef">then</span> -search.maxLookback and -search.maxStalenessInterval are ignored
</span></span><span style="display:flex;"><span>-search.treatDotsAsIsInRegexps
</span></span><span style="display:flex;"><span>   Whether to treat dots as is in regexp label filters used in queries. For example, foo<span style="color:#f92672">{</span>bar<span style="color:#f92672">=</span>~<span style="color:#e6db74">&#34;a.b.c&#34;</span><span style="color:#f92672">}</span> will be automatically converted to foo<span style="color:#f92672">{</span>bar<span style="color:#f92672">=</span>~<span style="color:#e6db74">&#34;a\\.b\\.c&#34;</span><span style="color:#f92672">}</span>, i.e. all the dots in regexp filters will be automatically escaped in order to match only dot char instead of matching any char. Dots in <span style="color:#e6db74">&#34;.+&#34;</span>, <span style="color:#e6db74">&#34;.*&#34;</span> and <span style="color:#e6db74">&#34;.{n}&#34;</span> regexps aren<span style="color:#e6db74">&#39;t escaped. This option is DEPRECATED in favor of {__graphite__=&#34;a.*.c&#34;} syntax for selecting metrics matching the given Graphite metrics filter
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-selfScrapeInstance string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Value for &#39;</span>instance<span style="color:#e6db74">&#39; label, which is added to self-scraped metrics (default &#34;self&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-selfScrapeInterval duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Interval for self-scraping own metrics at /metrics page
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-selfScrapeJob string
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Value for &#39;</span>job<span style="color:#e6db74">&#39; label, which is added to self-scraped metrics (default &#34;victoria-metrics&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-smallMergeConcurrency int
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Deprecated: this flag does nothing
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-snapshotAuthKey value
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   authKey, which must be passed in query string to /snapshot* pages
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Flag value can be read from the given file when using -snapshotAuthKey=file:///abs/path/to/file or -snapshotAuthKey=file://./relative/path/to/file . Flag value can be read from the given http/https url when using -snapshotAuthKey=http://host/path or -snapshotAuthKey=https://host/path
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-snapshotCreateTimeout duration
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Deprecated: this flag does nothing
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-snapshotsMaxAge value
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Automatically delete snapshots older than -snapshotsMaxAge if it is set to non-zero duration. Make sure that backup process has enough time to finish the backup before the corresponding snapshot is automatically deleted
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   The following optional suffixes are supported: s (second), m (minute), h (hour), d (day), w (week), y (year). If suffix isn&#39;</span>t set, <span style="color:#66d9ef">then</span> the duration is counted in months <span style="color:#f92672">(</span>default 0<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-sortLabels
</span></span><span style="display:flex;"><span>   Whether to sort labels <span style="color:#66d9ef">for</span> incoming samples before writing them to storage. This may be needed <span style="color:#66d9ef">for</span> reducing memory usage at storage when the order of labels in incoming samples is random. For example, <span style="color:#66d9ef">if</span> m<span style="color:#f92672">{</span>k1<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;v1&#34;</span>,k2<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;v2&#34;</span><span style="color:#f92672">}</span> may be sent as m<span style="color:#f92672">{</span>k2<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;v2&#34;</span>,k1<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;v1&#34;</span><span style="color:#f92672">}</span>. Enabled sorting <span style="color:#66d9ef">for</span> labels can slow down ingestion performance a bit
</span></span><span style="display:flex;"><span>-storage.cacheSizeIndexDBDataBlocks size
</span></span><span style="display:flex;"><span>   Overrides max size <span style="color:#66d9ef">for</span> indexdb/dataBlocks cache. See https://docs.victoriametrics.com/single-server-victoriametrics/#cache-tuning
</span></span><span style="display:flex;"><span>   Supports the following optional suffixes <span style="color:#66d9ef">for</span> size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB <span style="color:#f92672">(</span>default 0<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-storage.cacheSizeIndexDBIndexBlocks size
</span></span><span style="display:flex;"><span>   Overrides max size <span style="color:#66d9ef">for</span> indexdb/indexBlocks cache. See https://docs.victoriametrics.com/single-server-victoriametrics/#cache-tuning
</span></span><span style="display:flex;"><span>   Supports the following optional suffixes <span style="color:#66d9ef">for</span> size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB <span style="color:#f92672">(</span>default 0<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-storage.cacheSizeIndexDBTagFilters size
</span></span><span style="display:flex;"><span>   Overrides max size <span style="color:#66d9ef">for</span> indexdb/tagFiltersToMetricIDs cache. See https://docs.victoriametrics.com/single-server-victoriametrics/#cache-tuning
</span></span><span style="display:flex;"><span>   Supports the following optional suffixes <span style="color:#66d9ef">for</span> size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB <span style="color:#f92672">(</span>default 0<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-storage.cacheSizeStorageTSID size
</span></span><span style="display:flex;"><span>   Overrides max size <span style="color:#66d9ef">for</span> storage/tsid cache. See https://docs.victoriametrics.com/single-server-victoriametrics/#cache-tuning
</span></span><span style="display:flex;"><span>   Supports the following optional suffixes <span style="color:#66d9ef">for</span> size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB <span style="color:#f92672">(</span>default 0<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-storage.maxDailySeries int
</span></span><span style="display:flex;"><span>   The maximum number of unique series can be added to the storage during the last <span style="color:#ae81ff">24</span> hours. Excess series are logged and dropped. This can be useful <span style="color:#66d9ef">for</span> limiting series churn rate. See https://docs.victoriametrics.com/#cardinality-limiter . See also -storage.maxHourlySeries
</span></span><span style="display:flex;"><span>-storage.maxHourlySeries int
</span></span><span style="display:flex;"><span>   The maximum number of unique series can be added to the storage during the last hour. Excess series are logged and dropped. This can be useful <span style="color:#66d9ef">for</span> limiting series cardinality. See https://docs.victoriametrics.com/#cardinality-limiter . See also -storage.maxDailySeries
</span></span><span style="display:flex;"><span>-storage.minFreeDiskSpaceBytes size
</span></span><span style="display:flex;"><span>   The minimum free disk space at -storageDataPath after which the storage stops accepting new data
</span></span><span style="display:flex;"><span>   Supports the following optional suffixes <span style="color:#66d9ef">for</span> size values: KB, MB, GB, TB, KiB, MiB, GiB, TiB <span style="color:#f92672">(</span>default 10000000<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-storageDataPath string
</span></span><span style="display:flex;"><span>   Path to storage data <span style="color:#f92672">(</span>default <span style="color:#e6db74">&#34;victoria-metrics-data&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>-streamAggr.config string
</span></span><span style="display:flex;"><span>   Optional path to file with stream aggregation config. See https://docs.victoriametrics.com/stream-aggregation/ . See also -streamAggr.keepInput, -streamAggr.dropInput and -streamAggr.dedupInterval
</span></span><span style="display:flex;"><span>-streamAggr.dedupInterval duration
</span></span><span style="display:flex;"><span>   Input samples are de-duplicated with this interval before optional aggregation with -streamAggr.config . See also -streamAggr.dropInputLabels and -dedup.minScrapeInterval and https://docs.victoriametrics.com/stream-aggregation/#deduplication
</span></span><span style="display:flex;"><span>-streamAggr.dropInput
</span></span><span style="display:flex;"><span>   Whether to drop all the input samples after the aggregation with -streamAggr.config. By default, only aggregated samples are dropped, <span style="color:#66d9ef">while</span> the remaining samples are stored in the database. See also -streamAggr.keepInput and https://docs.victoriametrics.com/stream-aggregation/
</span></span><span style="display:flex;"><span>-streamAggr.dropInputLabels array
</span></span><span style="display:flex;"><span>   An optional list of labels to drop from samples before stream de-duplication and aggregation . See https://docs.victoriametrics.com/stream-aggregation/#dropping-unneeded-labels
</span></span><span style="display:flex;"><span>   Supports an array of values separated by comma or specified via multiple flags.
</span></span><span style="display:flex;"><span>   Value can contain comma inside single-quoted or double-quoted string, <span style="color:#f92672">{}</span>, <span style="color:#f92672">[]</span> and <span style="color:#f92672">()</span> braces.
</span></span><span style="display:flex;"><span>-streamAggr.ignoreFirstIntervals int
</span></span><span style="display:flex;"><span>   Number of aggregation intervals to skip after the start. Increase this value <span style="color:#66d9ef">if</span> you observe incorrect aggregation results after restarts. It could be caused by receiving unordered delayed data from clients pushing data into the database. See https://docs.victoriametrics.com/stream-aggregation/#ignore-aggregation-intervals-on-start
</span></span><span style="display:flex;"><span>-streamAggr.ignoreOldSamples
</span></span><span style="display:flex;"><span>   Whether to ignore input samples with old timestamps outside the current aggregation interval. See https://docs.victoriametrics.com/stream-aggregation/#ignoring-old-samples
</span></span><span style="display:flex;"><span>-streamAggr.keepInput
</span></span><span style="display:flex;"><span>   Whether to keep all the input samples after the aggregation with -streamAggr.config. By default, only aggregated samples are dropped, <span style="color:#66d9ef">while</span> the remaining samples are stored in the database. See also -streamAggr.dropInput and https://docs.victoriametrics.com/stream-aggregation/
</span></span><span style="display:flex;"><span>-tls array
</span></span><span style="display:flex;"><span>   Whether to enable TLS <span style="color:#66d9ef">for</span> incoming HTTP requests at the given -httpListenAddr <span style="color:#f92672">(</span>aka https<span style="color:#f92672">)</span>. -tlsCertFile and -tlsKeyFile must be set <span style="color:#66d9ef">if</span> -tls is set. See also -mtls
</span></span><span style="display:flex;"><span>   Supports array of values separated by comma or specified via multiple flags.
</span></span><span style="display:flex;"><span>   Empty values are set to false.
</span></span><span style="display:flex;"><span>-tlsAutocertCacheDir string
</span></span><span style="display:flex;"><span>   Directory to store TLS certificates issued via Let<span style="color:#e6db74">&#39;s Encrypt. Certificates are lost on restarts if this flag isn&#39;</span>t set. This flag is available only in Enterprise binaries. See https://docs.victoriametrics.com/enterprise/
</span></span><span style="display:flex;"><span>-tlsAutocertEmail string
</span></span><span style="display:flex;"><span>   Contact email <span style="color:#66d9ef">for</span> the issued Let<span style="color:#e6db74">&#39;s Encrypt TLS certificates. See also -tlsAutocertHosts and -tlsAutocertCacheDir .This flag is available only in Enterprise binaries. See https://docs.victoriametrics.com/enterprise/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">-tlsAutocertHosts array
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   Optional hostnames for automatic issuing of Let&#39;</span>s Encrypt TLS certificates. These hostnames must be reachable at -httpListenAddr . The -httpListenAddr must listen tcp port <span style="color:#ae81ff">443</span> . The -tlsAutocertHosts overrides -tlsCertFile and -tlsKeyFile . See also -tlsAutocertEmail and -tlsAutocertCacheDir . This flag is available only in Enterprise binaries. See https://docs.victoriametrics.com/enterprise/
</span></span><span style="display:flex;"><span>   Supports an array of values separated by comma or specified via multiple flags.
</span></span><span style="display:flex;"><span>   Value can contain comma inside single-quoted or double-quoted string, <span style="color:#f92672">{}</span>, <span style="color:#f92672">[]</span> and <span style="color:#f92672">()</span> braces.
</span></span><span style="display:flex;"><span>-tlsCertFile array
</span></span><span style="display:flex;"><span>   Path to file with TLS certificate <span style="color:#66d9ef">for</span> the corresponding -httpListenAddr <span style="color:#66d9ef">if</span> -tls is set. Prefer ECDSA certs instead of RSA certs as RSA certs are slower. The provided certificate file is automatically re-read every second, so it can be dynamically updated. See also -tlsAutocertHosts
</span></span><span style="display:flex;"><span>   Supports an array of values separated by comma or specified via multiple flags.
</span></span><span style="display:flex;"><span>   Value can contain comma inside single-quoted or double-quoted string, <span style="color:#f92672">{}</span>, <span style="color:#f92672">[]</span> and <span style="color:#f92672">()</span> braces.
</span></span><span style="display:flex;"><span>-tlsCipherSuites array
</span></span><span style="display:flex;"><span>   Optional list of TLS cipher suites <span style="color:#66d9ef">for</span> incoming requests over HTTPS <span style="color:#66d9ef">if</span> -tls is set. See the list of supported cipher suites at https://pkg.go.dev/crypto/tls#pkg-constants
</span></span><span style="display:flex;"><span>   Supports an array of values separated by comma or specified via multiple flags.
</span></span><span style="display:flex;"><span>   Value can contain comma inside single-quoted or double-quoted string, <span style="color:#f92672">{}</span>, <span style="color:#f92672">[]</span> and <span style="color:#f92672">()</span> braces.
</span></span><span style="display:flex;"><span>-tlsKeyFile array
</span></span><span style="display:flex;"><span>   Path to file with TLS key <span style="color:#66d9ef">for</span> the corresponding -httpListenAddr <span style="color:#66d9ef">if</span> -tls is set. The provided key file is automatically re-read every second, so it can be dynamically updated. See also -tlsAutocertHosts
</span></span><span style="display:flex;"><span>   Supports an array of values separated by comma or specified via multiple flags.
</span></span><span style="display:flex;"><span>   Value can contain comma inside single-quoted or double-quoted string, <span style="color:#f92672">{}</span>, <span style="color:#f92672">[]</span> and <span style="color:#f92672">()</span> braces.
</span></span><span style="display:flex;"><span>-tlsMinVersion array
</span></span><span style="display:flex;"><span>   Optional minimum TLS version to use <span style="color:#66d9ef">for</span> the corresponding -httpListenAddr <span style="color:#66d9ef">if</span> -tls is set. Supported values: TLS10, TLS11, TLS12, TLS13
</span></span><span style="display:flex;"><span>   Supports an array of values separated by comma or specified via multiple flags.
</span></span><span style="display:flex;"><span>   Value can contain comma inside single-quoted or double-quoted string, <span style="color:#f92672">{}</span>, <span style="color:#f92672">[]</span> and <span style="color:#f92672">()</span> braces.
</span></span><span style="display:flex;"><span>-usePromCompatibleNaming
</span></span><span style="display:flex;"><span>   Whether to replace characters unsupported by Prometheus with underscores in the ingested metric names and label names. For example, foo.bar<span style="color:#f92672">{</span>a.b<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;c&#39;</span><span style="color:#f92672">}</span> is transformed into foo_bar<span style="color:#f92672">{</span>a_b<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;c&#39;</span><span style="color:#f92672">}</span> during data ingestion <span style="color:#66d9ef">if</span> this flag is set. See https://prometheus.io/docs/concepts/data_model/#metric-names-and-labels
</span></span><span style="display:flex;"><span>-version
</span></span><span style="display:flex;"><span>   Show VictoriaMetrics version
</span></span><span style="display:flex;"><span>-vmalert.proxyURL string
</span></span><span style="display:flex;"><span>   Optional URL <span style="color:#66d9ef">for</span> proxying requests to vmalert. For example, <span style="color:#66d9ef">if</span> -vmalert.proxyURL<span style="color:#f92672">=</span>http://vmalert:8880 , <span style="color:#66d9ef">then</span> alerting API requests such as /api/v1/rules from Grafana will be proxied to http://vmalert:8880/api/v1/rules
</span></span><span style="display:flex;"><span>-vmui.customDashboardsPath string
</span></span><span style="display:flex;"><span>   Optional path to vmui dashboards. See https://github.com/VictoriaMetrics/VictoriaMetrics/tree/master/app/vmui/packages/vmui/public/dashboards
</span></span><span style="display:flex;"><span>-vmui.defaultTimezone string
</span></span><span style="display:flex;"><span>   The default timezone to be used in vmui. Timezone must be a valid IANA Time Zone. For example: America/New_York, Europe/Berlin, Etc/GMT+3 or Local</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
  <button
    class="hextra-code-copy-btn hx-group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
    title="Copy code"
  >
    <div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4"></div>
    <div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4"></div>
  </button>
</div>

  
</div>

        </div>
        <div class="hx-mt-16"></div>
        <div class="hx-mb-8 hx-flex hx-items-center hx-border-t hx-pt-8 dark:hx-border-neutral-800 contrast-more:hx-border-neutral-400 dark:contrast-more:hx-border-neutral-400 print:hx-hidden"><a
        href="/docs/quickstart/"
        title="快速开始"
        class="hx-flex hx-max-w-[50%] hx-items-center hx-gap-1 hx-py-4 hx-text-base hx-font-medium hx-text-gray-600 hx-transition-colors [word-break:break-word] hover:hx-text-primary-600 dark:hx-text-gray-300 md:hx-text-lg ltr:hx-pr-4 rtl:hx-pl-4"
      ><svg class="hx-inline hx-h-5 hx-shrink-0 ltr:hx-rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg>快速开始</a><a
        href="/docs/cluster/"
        title="集群版本"
        class="hx-flex hx-max-w-[50%] hx-items-center hx-gap-1 hx-py-4 hx-text-base hx-font-medium hx-text-gray-600 hx-transition-colors [word-break:break-word] hover:hx-text-primary-600 dark:hx-text-gray-300 md:hx-text-lg ltr:hx-ml-auto ltr:hx-pl-4 ltr:hx-text-right rtl:hx-mr-auto rtl:hx-pr-4 rtl:hx-text-left"
      >集群版本<svg class="hx-inline hx-h-5 hx-shrink-0 rtl:-hx-rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg></a></div>
        
      </main>
    </article>
  </div>

      <footer class="hextra-footer hx-bg-gray-100 hx-pb-[env(safe-area-inset-bottom)] dark:hx-bg-neutral-900 print:hx-bg-transparent"><div
    class="hx-max-w-screen-xl hx-mx-auto hx-flex hx-justify-center hx-py-12 hx-pl-[max(env(safe-area-inset-left),1.5rem)] hx-pr-[max(env(safe-area-inset-right),1.5rem)] hx-text-gray-600 dark:hx-text-gray-400 md:hx-justify-start"
  >
    <div class="hx-flex hx-w-full hx-flex-col hx-items-center sm:hx-items-start"><div class="hx-font-semibold"><a class="hx-flex hx-text-sm hx-items-center hx-gap-1 hx-text-current" target="_blank" rel="noopener noreferrer" title="Hextra GitHub Homepage" href="https://github.com/imfing/hextra">
    <span>Powered by Hextra<svg height=1em class="hx-inline-block ltr:hx-ml-1 rtl:hx-mr-1 hx-align-[-2.5px]" viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="m 105.50024,22.224647 c -9.59169,-5.537563 -21.40871,-5.537563 -31.000093,0 L 39.054693,42.689119 C 29.463353,48.226675 23.55484,58.460531 23.55484,69.535642 v 40.928918 c 0,11.07542 5.908513,21.3092 15.499853,26.84652 l 35.445453,20.46446 c 9.591313,5.53732 21.408404,5.53732 31.000094,0 l 35.44507,-20.46446 c 9.59131,-5.53732 15.49985,-15.7711 15.49985,-26.84652 V 69.535642 c 0,-11.075111 -5.90854,-21.308967 -15.49985,-26.846523 z M 34.112797,85.737639 c -1.384445,2.397827 -1.384445,5.352099 0,7.749927 l 24.781554,42.922974 c 1.38437,2.39783 3.942853,3.87496 6.711592,3.87496 h 49.563107 c 2.76905,0 5.3273,-1.47713 6.71144,-3.87496 l 24.78194,-42.922974 c 1.38414,-2.397828 1.38414,-5.3521 0,-7.749927 L 121.88049,42.814746 c -1.38414,-2.397828 -3.94239,-3.874964 -6.71144,-3.874964 H 65.605944 c -2.768739,0 -5.327223,1.477059 -6.711592,3.874964 z" style="stroke-width:0.774993" /></svg></span>
  </a></div>
    </div>
  </div>
</footer>
    
    <script defer src="/js/main.js" integrity=""></script>


<script defer src="/lib/flexsearch/flexsearch.bundle.min.0425860527cc9968f9f049421c7a56b39327d475e2e3a8f550416be3a9134327.js" integrity="sha256-BCWGBSfMmWj58ElCHHpWs5Mn1HXi46j1UEFr46kTQyc="></script>
    <script defer src="/en.search.js" integrity=""></script>


  </body>
</html>
